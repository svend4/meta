<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Шрифт Solan — Старгейт (Engel, ~2000-е)</title>
<style>
@font-face {
  font-family: 'Solan4';
  src: url('data:font/truetype;base64,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') format('truetype');
}
@font-face {
  font-family: 'Solan3';
  src: url('data:font/truetype;base64,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') format('truetype');
}

* { box-sizing: border-box; margin: 0; padding: 0; }
body { background: #0a0a0a; color: #e0e0e0; font-family: 'Courier New', monospace;
       padding: 24px; }

h1 { color: #4fc3f7; font-size: 1.4em; margin-bottom: 4px; }
h2 { color: #81c784; font-size: 1em; margin: 20px 0 8px; }
.meta { color: #888; font-size: 0.8em; margin-bottom: 20px; }

.section { margin-bottom: 28px; }

.grid {
  display: flex; flex-wrap: wrap; gap: 6px;
}

.glyph-card {
  background: #1a1a2e;
  border: 1px solid #2a2a4a;
  border-radius: 6px;
  padding: 8px 6px 4px;
  width: 68px;
  text-align: center;
  cursor: pointer;
  transition: border-color .2s, background .2s;
}
.glyph-card:hover {
  border-color: #4fc3f7;
  background: #1e2a3a;
}
.glyph-char {
  font-family: 'Solan4', sans-serif;
  font-size: 32px;
  line-height: 1;
  display: block;
  color: #4fc3f7;
}
.glyph-char.v3 {
  font-family: 'Solan3', sans-serif;
  color: #ff8a65;
}
.glyph-label {
  font-size: 9px;
  color: #666;
  margin-top: 4px;
}
.glyph-code {
  font-size: 10px;
  color: #444;
}

/* Pixel grid */
.pixel-grid {
  display: inline-grid;
  grid-template-columns: repeat(8, 5px);
  gap: 1px;
  margin: 3px auto;
}
.pixel-grid .px {
  width: 5px; height: 5px;
  background: #111;
}
.pixel-grid .px.on {
  background: #4fc3f7;
}

/* Triangle section */
.triangle { margin: 16px 0; }
.tri-row {
  display: flex; justify-content: center;
  gap: 4px; margin: 3px 0;
}
.tri-cell {
  font-family: 'Solan4', sans-serif;
  font-size: 22px;
  color: #e0e0e0;
  width: 32px; height: 32px;
  display: flex; align-items: center; justify-content: center;
  border: 1px solid #222;
  border-radius: 3px;
  background: #111;
}
.tri-cell.w0 { color: #78909c; border-color: #1a1a1a; }
.tri-cell.w1 { color: #4db6ac; }
.tri-cell.w2 { color: #81c784; }
.tri-cell.w3 { color: #fff176; }
.tri-cell.w4 { color: #ffb74d; }
.tri-cell.w5 { color: #ef9a9a; }
.tri-cell.w6 { color: #ce93d8; }
.tri-cell.pixel { opacity: 1; }
.tri-cell.seq   { opacity: 0.38; }
.tri-label { font-family: monospace; font-size: 10px; color: #444;
             align-self: center; margin-left: 10px; white-space: nowrap; }

/* Phonetic table */
.phon-grid {
  display: flex; flex-wrap: wrap; gap: 10px; margin: 12px 0;
}
.phon-cell {
  background: #111; border: 1px solid #222; border-radius: 4px;
  padding: 8px 10px; min-width: 88px; text-align: center; cursor: default;
}
.phon-cell:hover { border-color: #444; }
.phon-ru    { font-size: 20px; color: #e0e0e0; font-weight: bold; margin-bottom: 4px; }
.phon-solan { font-family: 'Solan4', sans-serif; font-size: 38px; line-height: 1.1; margin-bottom: 2px; }
.phon-info  { font-family: monospace; font-size: 11px; }
.phon-conf  { font-size: 11px; margin: 2px 0; }
.phon-segs  { font-family: monospace; font-size: 9px; color: #555; }

.compare { display: flex; gap: 20px; flex-wrap: wrap; margin-bottom: 16px; }
.compare-block { }
.compare-label { font-size: 10px; color: #888; margin-bottom: 4px; }

.diff-table { border-collapse: collapse; font-size: 12px; }
.diff-table td, .diff-table th { padding: 4px 8px; border: 1px solid #333; }
.diff-table th { color: #4fc3f7; background: #111; }
.diff-table .changed { color: #ff8a65; }

</style>
</head>
<body>
<h1>⎕ Шрифт SOLAN — Алфавит «Старгейт»</h1>
<p class="meta">
  Автор: Stanislav Engel (svend) · Создан ~2000-е · TTF-версии: Solan3, Solan4 (2016-05-06)<br>
  Структура: 71 глиф · Основа: 6 линий квадрата = 2⁶ = 64 символа Q6<br>
  Отправлен Францу Герману · Декабрь 2013 · «МОЙ АЛФАВИТ! )»
</p>
<div class="section">
<h2>Все символы шрифта Solan4 (синие) · Solan3 (оранжевые = изменены)</h2>
<h2>Строчные (a–z)</h2>
<div class="grid">
<div class="glyph-card" title="ASCII 113 | совпадает в Solan3 и Solan4">
<span class="glyph-char">q</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'q'</div>
<div class="glyph-code">#113</div>
</div>
<div class="glyph-card" title="ASCII 119 | совпадает в Solan3 и Solan4">
<span class="glyph-char">w</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'w'</div>
<div class="glyph-code">#119</div>
</div>
<div class="glyph-card" title="ASCII 101 | совпадает в Solan3 и Solan4">
<span class="glyph-char">e</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'e'</div>
<div class="glyph-code">#101</div>
</div>
<div class="glyph-card" title="ASCII 114 | ИЗМЕНЁН в Solan4">
<span class="glyph-char">r</span><span class="glyph-char v3" title="Solan3">r</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'r'</div>
<div class="glyph-code">#114</div>
</div>
<div class="glyph-card" title="ASCII 116 | совпадает в Solan3 и Solan4">
<span class="glyph-char">t</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'t'</div>
<div class="glyph-code">#116</div>
</div>
<div class="glyph-card" title="ASCII 121 | совпадает в Solan3 и Solan4">
<span class="glyph-char">y</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'y'</div>
<div class="glyph-code">#121</div>
</div>
<div class="glyph-card" title="ASCII 117 | совпадает в Solan3 и Solan4">
<span class="glyph-char">u</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'u'</div>
<div class="glyph-code">#117</div>
</div>
<div class="glyph-card" title="ASCII 105 | совпадает в Solan3 и Solan4">
<span class="glyph-char">i</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'i'</div>
<div class="glyph-code">#105</div>
</div>
<div class="glyph-card" title="ASCII 111 | совпадает в Solan3 и Solan4">
<span class="glyph-char">o</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'o'</div>
<div class="glyph-code">#111</div>
</div>
<div class="glyph-card" title="ASCII 112 | совпадает в Solan3 и Solan4">
<span class="glyph-char">p</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'p'</div>
<div class="glyph-code">#112</div>
</div>
<div class="glyph-card" title="ASCII 97 | совпадает в Solan3 и Solan4">
<span class="glyph-char">a</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'a'</div>
<div class="glyph-code">#97</div>
</div>
<div class="glyph-card" title="ASCII 115 | совпадает в Solan3 и Solan4">
<span class="glyph-char">s</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'s'</div>
<div class="glyph-code">#115</div>
</div>
<div class="glyph-card" title="ASCII 100 | ИЗМЕНЁН в Solan4">
<span class="glyph-char">d</span><span class="glyph-char v3" title="Solan3">d</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'d'</div>
<div class="glyph-code">#100</div>
</div>
<div class="glyph-card" title="ASCII 102 | совпадает в Solan3 и Solan4">
<span class="glyph-char">f</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'f'</div>
<div class="glyph-code">#102</div>
</div>
<div class="glyph-card" title="ASCII 103 | ИЗМЕНЁН в Solan4">
<span class="glyph-char">g</span><span class="glyph-char v3" title="Solan3">g</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'g'</div>
<div class="glyph-code">#103</div>
</div>
<div class="glyph-card" title="ASCII 104 | совпадает в Solan3 и Solan4">
<span class="glyph-char">h</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'h'</div>
<div class="glyph-code">#104</div>
</div>
<div class="glyph-card" title="ASCII 106 | совпадает в Solan3 и Solan4">
<span class="glyph-char">j</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'j'</div>
<div class="glyph-code">#106</div>
</div>
<div class="glyph-card" title="ASCII 107 | совпадает в Solan3 и Solan4">
<span class="glyph-char">k</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'k'</div>
<div class="glyph-code">#107</div>
</div>
<div class="glyph-card" title="ASCII 108 | совпадает в Solan3 и Solan4">
<span class="glyph-char">l</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'l'</div>
<div class="glyph-code">#108</div>
</div>
<div class="glyph-card" title="ASCII 122 | совпадает в Solan3 и Solan4">
<span class="glyph-char">z</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'z'</div>
<div class="glyph-code">#122</div>
</div>
<div class="glyph-card" title="ASCII 120 | совпадает в Solan3 и Solan4">
<span class="glyph-char">x</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'x'</div>
<div class="glyph-code">#120</div>
</div>
<div class="glyph-card" title="ASCII 99 | совпадает в Solan3 и Solan4">
<span class="glyph-char">c</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'c'</div>
<div class="glyph-code">#99</div>
</div>
<div class="glyph-card" title="ASCII 118 | совпадает в Solan3 и Solan4">
<span class="glyph-char">v</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'v'</div>
<div class="glyph-code">#118</div>
</div>
<div class="glyph-card" title="ASCII 98 | совпадает в Solan3 и Solan4">
<span class="glyph-char">b</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'b'</div>
<div class="glyph-code">#98</div>
</div>
<div class="glyph-card" title="ASCII 110 | совпадает в Solan3 и Solan4">
<span class="glyph-char">n</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'n'</div>
<div class="glyph-code">#110</div>
</div>
<div class="glyph-card" title="ASCII 109 | совпадает в Solan3 и Solan4">
<span class="glyph-char">m</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'m'</div>
<div class="glyph-code">#109</div>
</div>
</div>
<h2>Заглавные (A–Z)</h2>
<div class="grid">
<div class="glyph-card" title="ASCII 81 | совпадает в Solan3 и Solan4">
<span class="glyph-char">Q</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'Q'</div>
<div class="glyph-code">#81</div>
</div>
<div class="glyph-card" title="ASCII 87 | совпадает в Solan3 и Solan4">
<span class="glyph-char">W</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'W'</div>
<div class="glyph-code">#87</div>
</div>
<div class="glyph-card" title="ASCII 69 | совпадает в Solan3 и Solan4">
<span class="glyph-char">E</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'E'</div>
<div class="glyph-code">#69</div>
</div>
<div class="glyph-card" title="ASCII 82 | ИЗМЕНЁН в Solan4">
<span class="glyph-char">R</span><span class="glyph-char v3" title="Solan3">R</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'R'</div>
<div class="glyph-code">#82</div>
</div>
<div class="glyph-card" title="ASCII 84 | совпадает в Solan3 и Solan4">
<span class="glyph-char">T</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'T'</div>
<div class="glyph-code">#84</div>
</div>
<div class="glyph-card" title="ASCII 89 | ИЗМЕНЁН в Solan4">
<span class="glyph-char">Y</span><span class="glyph-char v3" title="Solan3">Y</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'Y'</div>
<div class="glyph-code">#89</div>
</div>
<div class="glyph-card" title="ASCII 85 | совпадает в Solan3 и Solan4">
<span class="glyph-char">U</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'U'</div>
<div class="glyph-code">#85</div>
</div>
<div class="glyph-card" title="ASCII 73 | совпадает в Solan3 и Solan4">
<span class="glyph-char">I</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'I'</div>
<div class="glyph-code">#73</div>
</div>
<div class="glyph-card" title="ASCII 79 | совпадает в Solan3 и Solan4">
<span class="glyph-char">O</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'O'</div>
<div class="glyph-code">#79</div>
</div>
<div class="glyph-card" title="ASCII 80 | совпадает в Solan3 и Solan4">
<span class="glyph-char">P</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'P'</div>
<div class="glyph-code">#80</div>
</div>
<div class="glyph-card" title="ASCII 65 | ИЗМЕНЁН в Solan4">
<span class="glyph-char">A</span><span class="glyph-char v3" title="Solan3">A</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'A'</div>
<div class="glyph-code">#65</div>
</div>
<div class="glyph-card" title="ASCII 83 | совпадает в Solan3 и Solan4">
<span class="glyph-char">S</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'S'</div>
<div class="glyph-code">#83</div>
</div>
<div class="glyph-card" title="ASCII 68 | совпадает в Solan3 и Solan4">
<span class="glyph-char">D</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'D'</div>
<div class="glyph-code">#68</div>
</div>
<div class="glyph-card" title="ASCII 70 | совпадает в Solan3 и Solan4">
<span class="glyph-char">F</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'F'</div>
<div class="glyph-code">#70</div>
</div>
<div class="glyph-card" title="ASCII 71 | совпадает в Solan3 и Solan4">
<span class="glyph-char">G</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'G'</div>
<div class="glyph-code">#71</div>
</div>
<div class="glyph-card" title="ASCII 72 | ИЗМЕНЁН в Solan4">
<span class="glyph-char">H</span><span class="glyph-char v3" title="Solan3">H</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'H'</div>
<div class="glyph-code">#72</div>
</div>
<div class="glyph-card" title="ASCII 74 | совпадает в Solan3 и Solan4">
<span class="glyph-char">J</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'J'</div>
<div class="glyph-code">#74</div>
</div>
<div class="glyph-card" title="ASCII 75 | совпадает в Solan3 и Solan4">
<span class="glyph-char">K</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'K'</div>
<div class="glyph-code">#75</div>
</div>
<div class="glyph-card" title="ASCII 76 | совпадает в Solan3 и Solan4">
<span class="glyph-char">L</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'L'</div>
<div class="glyph-code">#76</div>
</div>
<div class="glyph-card" title="ASCII 90 | ИЗМЕНЁН в Solan4">
<span class="glyph-char">Z</span><span class="glyph-char v3" title="Solan3">Z</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'Z'</div>
<div class="glyph-code">#90</div>
</div>
<div class="glyph-card" title="ASCII 88 | совпадает в Solan3 и Solan4">
<span class="glyph-char">X</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'X'</div>
<div class="glyph-code">#88</div>
</div>
<div class="glyph-card" title="ASCII 67 | совпадает в Solan3 и Solan4">
<span class="glyph-char">C</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'C'</div>
<div class="glyph-code">#67</div>
</div>
<div class="glyph-card" title="ASCII 86 | совпадает в Solan3 и Solan4">
<span class="glyph-char">V</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'V'</div>
<div class="glyph-code">#86</div>
</div>
<div class="glyph-card" title="ASCII 66 | совпадает в Solan3 и Solan4">
<span class="glyph-char">B</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'B'</div>
<div class="glyph-code">#66</div>
</div>
<div class="glyph-card" title="ASCII 78 | ИЗМЕНЁН в Solan4">
<span class="glyph-char">N</span><span class="glyph-char v3" title="Solan3">N</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'N'</div>
<div class="glyph-code">#78</div>
</div>
<div class="glyph-card" title="ASCII 77 | совпадает в Solan3 и Solan4">
<span class="glyph-char">M</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'M'</div>
<div class="glyph-code">#77</div>
</div>
</div>
<h2>Цифры (0–9)</h2>
<div class="grid">
<div class="glyph-card" title="ASCII 49 | совпадает в Solan3 и Solan4">
<span class="glyph-char">1</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'1'</div>
<div class="glyph-code">#49</div>
</div>
<div class="glyph-card" title="ASCII 50 | совпадает в Solan3 и Solan4">
<span class="glyph-char">2</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'2'</div>
<div class="glyph-code">#50</div>
</div>
<div class="glyph-card" title="ASCII 51 | совпадает в Solan3 и Solan4">
<span class="glyph-char">3</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'3'</div>
<div class="glyph-code">#51</div>
</div>
<div class="glyph-card" title="ASCII 52 | совпадает в Solan3 и Solan4">
<span class="glyph-char">4</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'4'</div>
<div class="glyph-code">#52</div>
</div>
<div class="glyph-card" title="ASCII 53 | совпадает в Solan3 и Solan4">
<span class="glyph-char">5</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'5'</div>
<div class="glyph-code">#53</div>
</div>
<div class="glyph-card" title="ASCII 54 | совпадает в Solan3 и Solan4">
<span class="glyph-char">6</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'6'</div>
<div class="glyph-code">#54</div>
</div>
<div class="glyph-card" title="ASCII 55 | совпадает в Solan3 и Solan4">
<span class="glyph-char">7</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'7'</div>
<div class="glyph-code">#55</div>
</div>
<div class="glyph-card" title="ASCII 56 | совпадает в Solan3 и Solan4">
<span class="glyph-char">8</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'8'</div>
<div class="glyph-code">#56</div>
</div>
<div class="glyph-card" title="ASCII 57 | совпадает в Solan3 и Solan4">
<span class="glyph-char">9</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div></div>
<div class="glyph-label">'9'</div>
<div class="glyph-code">#57</div>
</div>
<div class="glyph-card" title="ASCII 48 | совпадает в Solan3 и Solan4">
<span class="glyph-char">0</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'0'</div>
<div class="glyph-code">#48</div>
</div>
</div>
<h2>Спецсимволы</h2>
<div class="grid">
<div class="glyph-card" title="ASCII 35 | совпадает в Solan3 и Solan4">
<span class="glyph-char">#</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div></div>
<div class="glyph-label">'#'</div>
<div class="glyph-code">#35</div>
</div>
<div class="glyph-card" title="ASCII 36 | совпадает в Solan3 и Solan4">
<span class="glyph-char">$</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'$'</div>
<div class="glyph-code">#36</div>
</div>
<div class="glyph-card" title="ASCII 37 | совпадает в Solan3 и Solan4">
<span class="glyph-char">%</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'%'</div>
<div class="glyph-code">#37</div>
</div>
<div class="glyph-card" title="ASCII 38 | совпадает в Solan3 и Solan4">
<span class="glyph-char">&</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">'&'</div>
<div class="glyph-code">#38</div>
</div>
<div class="glyph-card" title="ASCII 42 | совпадает в Solan3 и Solan4">
<span class="glyph-char">*</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div></div>
<div class="glyph-label">'*'</div>
<div class="glyph-code">#42</div>
</div>
<div class="glyph-card" title="ASCII 40 | совпадает в Solan3 и Solan4">
<span class="glyph-char">(</span>
<div class="pixel-grid"><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div></div>
<div class="glyph-label">'('</div>
<div class="glyph-code">#40</div>
</div>
<div class="glyph-card" title="ASCII 41 | совпадает в Solan3 и Solan4">
<span class="glyph-char">)</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div></div>
<div class="glyph-label">')'</div>
<div class="glyph-code">#41</div>
</div>
<div class="glyph-card" title="ASCII 39 | совпадает в Solan3 и Solan4">
<span class="glyph-char">'</span>
<div class="pixel-grid"><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div></div>
<div class="glyph-label">'''</div>
<div class="glyph-code">#39</div>
</div>
<div class="glyph-card" title="ASCII 34 | совпадает в Solan3 и Solan4">
<span class="glyph-char">"</span>
<div class="pixel-grid"><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px  on"></div><div class="px  on"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div><div class="px"></div></div>
<div class="glyph-label">'"'</div>
<div class="glyph-code">#34</div>
</div>
</div>
</div>
<div class="section">
<h2>Различия: Solan3 vs Solan4 (9 изменённых глифов: A H N R Y Z d g r)</h2>
<div class="compare">
<div class="compare-block">
<div class="compare-label">'A' (#65)</div>
<div style="display:flex;gap:6px;align-items:center">
<div><div class="compare-label" style="color:#ff8a65">Solan3</div>
<span class="glyph-char v3" style="font-size:40px">A</span><br><div class="pixel-grid"><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div></div></div>
<div><div class="compare-label" style="color:#4fc3f7">Solan4</div>
<span class="glyph-char" style="font-size:40px">A</span><br><div class="pixel-grid"><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div></div></div>
</div></div>
<div class="compare-block">
<div class="compare-label">'H' (#72)</div>
<div style="display:flex;gap:6px;align-items:center">
<div><div class="compare-label" style="color:#ff8a65">Solan3</div>
<span class="glyph-char v3" style="font-size:40px">H</span><br><div class="pixel-grid"><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div></div></div>
<div><div class="compare-label" style="color:#4fc3f7">Solan4</div>
<span class="glyph-char" style="font-size:40px">H</span><br><div class="pixel-grid"><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div></div></div>
</div></div>
<div class="compare-block">
<div class="compare-label">'N' (#78)</div>
<div style="display:flex;gap:6px;align-items:center">
<div><div class="compare-label" style="color:#ff8a65">Solan3</div>
<span class="glyph-char v3" style="font-size:40px">N</span><br><div class="pixel-grid"><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div></div></div>
<div><div class="compare-label" style="color:#4fc3f7">Solan4</div>
<span class="glyph-char" style="font-size:40px">N</span><br><div class="pixel-grid"><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div></div></div>
</div></div>
<div class="compare-block">
<div class="compare-label">'R' (#82)</div>
<div style="display:flex;gap:6px;align-items:center">
<div><div class="compare-label" style="color:#ff8a65">Solan3</div>
<span class="glyph-char v3" style="font-size:40px">R</span><br><div class="pixel-grid"><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div></div></div>
<div><div class="compare-label" style="color:#4fc3f7">Solan4</div>
<span class="glyph-char" style="font-size:40px">R</span><br><div class="pixel-grid"><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div></div></div>
</div></div>
<div class="compare-block">
<div class="compare-label">'Y' (#89)</div>
<div style="display:flex;gap:6px;align-items:center">
<div><div class="compare-label" style="color:#ff8a65">Solan3</div>
<span class="glyph-char v3" style="font-size:40px">Y</span><br><div class="pixel-grid"><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div></div></div>
<div><div class="compare-label" style="color:#4fc3f7">Solan4</div>
<span class="glyph-char" style="font-size:40px">Y</span><br><div class="pixel-grid"><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div></div></div>
</div></div>
<div class="compare-block">
<div class="compare-label">'Z' (#90)</div>
<div style="display:flex;gap:6px;align-items:center">
<div><div class="compare-label" style="color:#ff8a65">Solan3</div>
<span class="glyph-char v3" style="font-size:40px">Z</span><br><div class="pixel-grid"><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div></div></div>
<div><div class="compare-label" style="color:#4fc3f7">Solan4</div>
<span class="glyph-char" style="font-size:40px">Z</span><br><div class="pixel-grid"><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div></div></div>
</div></div>
<div class="compare-block">
<div class="compare-label">'d' (#100)</div>
<div style="display:flex;gap:6px;align-items:center">
<div><div class="compare-label" style="color:#ff8a65">Solan3</div>
<span class="glyph-char v3" style="font-size:40px">d</span><br><div class="pixel-grid"><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div></div></div>
<div><div class="compare-label" style="color:#4fc3f7">Solan4</div>
<span class="glyph-char" style="font-size:40px">d</span><br><div class="pixel-grid"><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div></div></div>
</div></div>
<div class="compare-block">
<div class="compare-label">'g' (#103)</div>
<div style="display:flex;gap:6px;align-items:center">
<div><div class="compare-label" style="color:#ff8a65">Solan3</div>
<span class="glyph-char v3" style="font-size:40px">g</span><br><div class="pixel-grid"><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div></div></div>
<div><div class="compare-label" style="color:#4fc3f7">Solan4</div>
<span class="glyph-char" style="font-size:40px">g</span><br><div class="pixel-grid"><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div></div></div>
</div></div>
<div class="compare-block">
<div class="compare-label">'r' (#114)</div>
<div style="display:flex;gap:6px;align-items:center">
<div><div class="compare-label" style="color:#ff8a65">Solan3</div>
<span class="glyph-char v3" style="font-size:40px">r</span><br><div class="pixel-grid"><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div><div class="px on" style="background:#ff8a65"></div></div></div>
<div><div class="compare-label" style="color:#4fc3f7">Solan4</div>
<span class="glyph-char" style="font-size:40px">r</span><br><div class="pixel-grid"><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px" style=""></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div><div class="px on" style="background:#4fc3f7"></div></div></div>
</div></div>
</div></div>
<div class="section">
<h2>Треугольник Хассе B₆ — Solan (64/64 вершин Q6)</h2>
<p class="meta">● яркие = пиксельно подтверждено (24/64) · ○ тусклые = последовательное назначение (40/64)<br>Наведите на символ — h-индекс, биты, активные сегменты, русская фонетика · <b>Нажмите → Q6-Эксплорер</b></p>
<div class="triangle">
<div class="tri-row"><div class="tri-cell w0 seq" title="h=0  000000  ∅  ○">0</div><span class="tri-label">w=0&thinsp;(1)</span></div>
<div class="tri-row"><div class="tri-cell w1 seq" title="h=1  000001  T  ○">1</div><div class="tri-cell w1 seq" title="h=2  000010  B  ○">2</div><div class="tri-cell w1 seq" title="h=4  000100  L  ○">3</div><div class="tri-cell w1 seq" title="h=8  001000  R  ○">4</div><div class="tri-cell w1 seq" title="h=16  010000  D1  ○">5</div><div class="tri-cell w1 seq" title="h=32  100000  D2  ○">6</div><span class="tri-label">w=1&thinsp;(6)</span></div>
<div class="tri-row"><div class="tri-cell w2 seq" title="h=3  000011  T+B  ○ · Н [medium]">7</div><div class="tri-cell w2 seq" title="h=5  000101  T+L  ○">8</div><div class="tri-cell w2 seq" title="h=6  000110  B+L  ○">9</div><div class="tri-cell w2 seq" title="h=9  001001  T+R  ○ · Л [medium]">A</div><div class="tri-cell w2 seq" title="h=10  001010  B+R  ○">B</div><div class="tri-cell w2 pixel" title="h=12  001100  L+R  ●">H</div><div class="tri-cell w2 seq" title="h=17  010001  T+D1  ○">D</div><div class="tri-cell w2 seq" title="h=18  010010  B+D1  ○">E</div><div class="tri-cell w2 seq" title="h=20  010100  L+D1  ○ · В [low]">F</div><div class="tri-cell w2 seq" title="h=24  011000  R+D1  ○ · М [low]">G</div><div class="tri-cell w2 seq" title="h=33  100001  T+D2  ○">H</div><div class="tri-cell w2 seq" title="h=34  100010  B+D2  ○">I</div><div class="tri-cell w2 seq" title="h=36  100100  L+D2  ○">J</div><div class="tri-cell w2 seq" title="h=40  101000  R+D2  ○">K</div><div class="tri-cell w2 pixel" title="h=48  110000  D1+D2  ● · Т [high]">L</div><span class="tri-label">w=2&thinsp;(15)</span></div>
<div class="tri-row"><div class="tri-cell w3 seq" title="h=7  000111  T+B+L  ○">M</div><div class="tri-cell w3 seq" title="h=11  001011  T+B+R  ○">N</div><div class="tri-cell w3 seq" title="h=13  001101  T+L+R  ○">O</div><div class="tri-cell w3 pixel" title="h=14  001110  B+L+R  ● · Б [medium]">Z</div><div class="tri-cell w3 pixel" title="h=19  010011  T+B+D1  ●">C</div><div class="tri-cell w3 pixel" title="h=21  010101  T+L+D1  ●">G</div><div class="tri-cell w3 seq" title="h=22  010110  B+L+D1  ○">S</div><div class="tri-cell w3 seq" title="h=25  011001  T+R+D1  ○">T</div><div class="tri-cell w3 seq" title="h=26  011010  B+R+D1  ○">U</div><div class="tri-cell w3 pixel" title="h=28  011100  L+R+D1  ●">V</div><div class="tri-cell w3 pixel" title="h=35  100011  T+B+D2  ●">J</div><div class="tri-cell w3 seq" title="h=37  100101  T+L+D2  ○">X</div><div class="tri-cell w3 seq" title="h=38  100110  B+L+D2  ○">Y</div><div class="tri-cell w3 pixel" title="h=41  101001  T+R+D2  ●">N</div><div class="tri-cell w3 seq" title="h=42  101010  B+R+D2  ○">a</div><div class="tri-cell w3 pixel" title="h=44  101100  L+R+D2  ●">B</div><div class="tri-cell w3 pixel" title="h=49  110001  T+D1+D2  ●">D</div><div class="tri-cell w3 seq" title="h=50  110010  B+D1+D2  ○ · Д [low]">d</div><div class="tri-cell w3 seq" title="h=52  110100  L+D1+D2  ○">e</div><div class="tri-cell w3 pixel" title="h=56  111000  R+D1+D2  ●">h</div><span class="tri-label">w=3&thinsp;(20)</span></div>
<div class="tri-row"><div class="tri-cell w4 pixel" title="h=15  001111  T+B+L+R  ● · Р [high]">A</div><div class="tri-cell w4 pixel" title="h=23  010111  T+B+L+D1  ●">O</div><div class="tri-cell w4 seq" title="h=27  011011  T+B+R+D1  ○">i</div><div class="tri-cell w4 seq" title="h=29  011101  T+L+R+D1  ○">j</div><div class="tri-cell w4 seq" title="h=30  011110  B+L+R+D1  ○">k</div><div class="tri-cell w4 pixel" title="h=39  100111  T+B+L+D2  ●">a</div><div class="tri-cell w4 seq" title="h=43  101011  T+B+R+D2  ○">m</div><div class="tri-cell w4 pixel" title="h=45  101101  T+L+R+D2  ●">t</div><div class="tri-cell w4 seq" title="h=46  101110  B+L+R+D2  ○">o</div><div class="tri-cell w4 pixel" title="h=51  110011  T+B+D1+D2  ●">U</div><div class="tri-cell w4 seq" title="h=53  110101  T+L+D1+D2  ○">q</div><div class="tri-cell w4 pixel" title="h=54  110110  B+L+D1+D2  ●">I</div><div class="tri-cell w4 pixel" title="h=57  111001  T+R+D1+D2  ●">X</div><div class="tri-cell w4 seq" title="h=58  111010  B+R+D1+D2  ○">t</div><div class="tri-cell w4 pixel" title="h=60  111100  L+R+D1+D2  ●">W</div><span class="tri-label">w=4&thinsp;(15)</span></div>
<div class="tri-row"><div class="tri-cell w5 pixel" title="h=31  011111  T+B+L+R+D1  ●">K</div><div class="tri-cell w5 seq" title="h=47  101111  T+B+L+R+D2  ○ · О [medium]">w</div><div class="tri-cell w5 pixel" title="h=55  110111  T+B+L+D1+D2  ●">P</div><div class="tri-cell w5 seq" title="h=59  111011  T+B+R+D1+D2  ○">y</div><div class="tri-cell w5 pixel" title="h=61  111101  T+L+R+D1+D2  ●">f</div><div class="tri-cell w5 pixel" title="h=62  111110  B+L+R+D1+D2  ●">Q</div><span class="tri-label">w=5&thinsp;(6)</span></div>
<div class="tri-row"><div class="tri-cell w6 pixel" title="h=63  111111  T+B+L+R+D1+D2  ● · А [high]">E</div><span class="tri-label">w=6&thinsp;(1)</span></div>
</div>
</div>
<div class="section">
<h2>Русская фонетика — «Алфавит 16 букв / 36 звуков»</h2>
<p class="meta">Авторская система Энгеля ~2000-е гг.  Каждой русской букве соответствует Q6-символ Solan.<br>● пиксельно подтверждено · ○ последовательное назначение · цвет = уверенность · <b>Нажмите на карточку → Q6-Эксплорер</b></p>
<div class="phon-grid">
<div class="phon-cell" title="А · h=63 111111 · T+B+L+R+D1+D2 · ●●● ● · все 6 отрезков ⊠"><div class="phon-ru">А</div><div class="phon-solan" style="color:#81c784">E</div><div class="phon-info" style="color:#81c784">h=63</div><div class="phon-conf" style="color:#81c784">●●● ●</div><div class="phon-segs">T+B+L+R+D1+D2</div></div>
<div class="phon-cell" title="Р · h=15 001111 · T+B+L+R · ●●● ● · рамка □"><div class="phon-ru">Р</div><div class="phon-solan" style="color:#81c784">A</div><div class="phon-info" style="color:#81c784">h=15</div><div class="phon-conf" style="color:#81c784">●●● ●</div><div class="phon-segs">T+B+L+R</div></div>
<div class="phon-cell" title="Т · h=48 110000 · D1+D2 · ●●● ● · только диагонали ╳"><div class="phon-ru">Т</div><div class="phon-solan" style="color:#81c784">L</div><div class="phon-info" style="color:#81c784">h=48</div><div class="phon-conf" style="color:#81c784">●●● ●</div><div class="phon-segs">D1+D2</div></div>
<div class="phon-cell" title="Л · h=9 001001 · T+R · ●●○ ○ · угол ⌐ (верх+право)"><div class="phon-ru">Л</div><div class="phon-solan" style="color:#fff176">A</div><div class="phon-info" style="color:#fff176">h=9</div><div class="phon-conf" style="color:#fff176">●●○ ○</div><div class="phon-segs">T+R</div></div>
<div class="phon-cell" title="Н · h=3 000011 · T+B · ●●○ ○ · горизонтали = (верх+низ)"><div class="phon-ru">Н</div><div class="phon-solan" style="color:#fff176">7</div><div class="phon-info" style="color:#fff176">h=3</div><div class="phon-conf" style="color:#fff176">●●○ ○</div><div class="phon-segs">T+B</div></div>
<div class="phon-cell" title="О · h=47 101111 · T+L+R+D1+D2 · ●●○ ○ · рамка без низа + диаг."><div class="phon-ru">О</div><div class="phon-solan" style="color:#fff176">w</div><div class="phon-info" style="color:#fff176">h=47</div><div class="phon-conf" style="color:#fff176">●●○ ○</div><div class="phon-segs">T+L+R+D1+D2</div></div>
<div class="phon-cell" title="Б · h=14 001110 · B+L+R · ●●○ ● · U-образный"><div class="phon-ru">Б</div><div class="phon-solan" style="color:#fff176">Z</div><div class="phon-info" style="color:#fff176">h=14</div><div class="phon-conf" style="color:#fff176">●●○ ●</div><div class="phon-segs">B+L+R</div></div>
<div class="phon-cell" title="М · h=24 011000 · R+D1 · ●○○ ○ · правая сторона + диаг.╲"><div class="phon-ru">М</div><div class="phon-solan" style="color:#ffb74d">G</div><div class="phon-info" style="color:#ffb74d">h=24</div><div class="phon-conf" style="color:#ffb74d">●○○ ○</div><div class="phon-segs">R+D1</div></div>
<div class="phon-cell" title="В · h=20 010100 · L+D1 · ●○○ ○ · левая сторона + диаг.╲"><div class="phon-ru">В</div><div class="phon-solan" style="color:#ffb74d">F</div><div class="phon-info" style="color:#ffb74d">h=20</div><div class="phon-conf" style="color:#ffb74d">●○○ ○</div><div class="phon-segs">L+D1</div></div>
<div class="phon-cell" title="Д · h=50 110010 · B+D1+D2 · ●○○ ○ · треугольник △ (низ+диаг.)"><div class="phon-ru">Д</div><div class="phon-solan" style="color:#ffb74d">d</div><div class="phon-info" style="color:#ffb74d">h=50</div><div class="phon-conf" style="color:#ffb74d">●○○ ○</div><div class="phon-segs">B+D1+D2</div></div>
<div class="phon-cell" title="Г · h=49 110001 · T+D1+D2 · ●○○ ● · ╳ с верхней чертой"><div class="phon-ru">Г</div><div class="phon-solan" style="color:#ffb74d">D</div><div class="phon-info" style="color:#ffb74d">h=49</div><div class="phon-conf" style="color:#ffb74d">●○○ ●</div><div class="phon-segs">T+D1+D2</div></div>
<div class="phon-cell" title="У · h=51 110011 · T+B+D1+D2 · ●○○ ● · ромб ◇ (X с двумя чертами)"><div class="phon-ru">У</div><div class="phon-solan" style="color:#ffb74d">U</div><div class="phon-info" style="color:#ffb74d">h=51</div><div class="phon-conf" style="color:#ffb74d">●○○ ●</div><div class="phon-segs">T+B+D1+D2</div></div>
<div class="phon-cell" title="И · h=44 101100 · L+R+D2 · ●○○ ● · N-образный ╱ (И)"><div class="phon-ru">И</div><div class="phon-solan" style="color:#ffb74d">B</div><div class="phon-info" style="color:#ffb74d">h=44</div><div class="phon-conf" style="color:#ffb74d">●○○ ●</div><div class="phon-segs">L+R+D2</div></div>
<div class="phon-cell" title="З · h=19 010011 · T+B+D1 · ●○○ ● · Z-образный ╲ (З)"><div class="phon-ru">З</div><div class="phon-solan" style="color:#ffb74d">C</div><div class="phon-info" style="color:#ffb74d">h=19</div><div class="phon-conf" style="color:#ffb74d">●○○ ●</div><div class="phon-segs">T+B+D1</div></div>
<div class="phon-cell" title="Ж · h=28 011100 · L+R+D1 · ●○○ ● · N-образный ╲ (Ж)"><div class="phon-ru">Ж</div><div class="phon-solan" style="color:#ffb74d">V</div><div class="phon-info" style="color:#ffb74d">h=28</div><div class="phon-conf" style="color:#ffb74d">●○○ ●</div><div class="phon-segs">L+R+D1</div></div>
<div class="phon-cell" title="Ч · h=35 100011 · T+B+D2 · ●○○ ● · Z-образный ╱ (Ч)"><div class="phon-ru">Ч</div><div class="phon-solan" style="color:#ffb74d">J</div><div class="phon-info" style="color:#ffb74d">h=35</div><div class="phon-conf" style="color:#ffb74d">●○○ ●</div><div class="phon-segs">T+B+D2</div></div>
</div>

<br>
<p class="meta" style="margin-top:12px">Транслитерация: введите русский текст → символы Solan</p>
<textarea id="ru-inp" rows="2" cols="40"
  placeholder="Введите русский текст..."
  style="background:#111;color:#ccc;border:1px solid #333;padding:8px;font-size:14px;width:100%;max-width:440px"></textarea>
<br><br>
<div id="ru-out" style="font-family:Solan4,sans-serif;font-size:48px;color:#81c784;
  min-height:60px;padding:8px;background:#111;border:1px solid #222;
  letter-spacing:8px;max-width:90vw;word-break:break-all"></div>
<p class="meta" style="margin-top:6px">Распознаются: А Б В Г Д Ж З И Л М Н О Р Т У Ч (16/16 букв)</p>
<script>
(function() {
  var MAP = {"А":"E","Р":"A","Т":"L","Л":"A","Н":"7","О":"w","Б":"Z","М":"G","В":"F","Д":"d","Г":"D","У":"U","И":"B","З":"C","Ж":"V","Ч":"J"};
  document.getElementById("ru-inp").addEventListener("input", function() {
    var t = this.value.toUpperCase();
    var out = "";
    for (var i = 0; i < t.length; i++) {
      out += MAP[t[i]] !== undefined ? MAP[t[i]] : t[i];
    }
    document.getElementById("ru-out").textContent = out;
  });
})();
</script>

<br>
<p class="meta" style="margin-top:10px">Обратная транслитерация: вставьте символы Solan → получите русский текст</p>
<textarea id="solan-inp" rows="2" cols="40"
  placeholder="Вставьте символы Solan..."
  style="background:#111;color:#4fc3f7;border:1px solid #333;padding:8px;font-size:14px;
         width:100%;max-width:440px;font-family:Solan4,sans-serif"></textarea>
<br><br>
<div id="solan-out"
     style="font-size:32px;color:#e0c080;min-height:48px;padding:8px;
            background:#111;border:1px solid #222;max-width:90vw;letter-spacing:4px"></div>
<p class="meta" style="margin-top:6px">Примечание: A → Р/Л (омоним в текущем наборе)</p>
<script>
(function() {
  var REV = {"E":"А","A":"Р/Л","L":"Т","7":"Н","w":"О","Z":"Б","G":"М","F":"В","d":"Д","D":"Г","U":"У","B":"И","C":"З","V":"Ж","J":"Ч"};
  document.getElementById("solan-inp").addEventListener("input", function() {
    var t = this.value;
    var out = "";
    for (var i = 0; i < t.length; i++) {
      out += REV[t[i]] !== undefined ? REV[t[i]] : (t[i]===" " ? " " : "·");
    }
    document.getElementById("solan-out").textContent = out;
  });
})();
</script>
</div>
<div class="section">
<h2>Q6-Эксплорер — Интерактивный подбор символа</h2>
<p class="meta">Нажмите на сегмент квадрата или кнопку ниже · Ползунок перебирает все 64 вершины Q6</p>
<div style="display:flex;gap:24px;flex-wrap:wrap;align-items:flex-start;margin:12px 0">
  <!-- SVG interactive square -->
  <svg id="q6-svg" width="160" height="160" viewBox="0 0 100 100"
       style="display:block;background:#0a0a0a;border:1px solid #1a1a1a;border-radius:4px;flex-shrink:0">
    <rect x="10" y="10" width="80" height="80" fill="none" stroke="#1a1a1a" stroke-width="0.5"/>
    <!-- visible segments -->
    <line id="sv-D1" x1="10" y1="10" x2="90" y2="90" stroke="#2a2a2a" stroke-width="5" stroke-linecap="round"/>
    <line id="sv-D2" x1="90" y1="10" x2="10" y2="90" stroke="#2a2a2a" stroke-width="5" stroke-linecap="round"/>
    <line id="sv-T"  x1="10" y1="10" x2="90" y2="10" stroke="#2a2a2a" stroke-width="5" stroke-linecap="round"/>
    <line id="sv-B"  x1="10" y1="90" x2="90" y2="90" stroke="#2a2a2a" stroke-width="5" stroke-linecap="round"/>
    <line id="sv-L"  x1="10" y1="10" x2="10" y2="90" stroke="#2a2a2a" stroke-width="5" stroke-linecap="round"/>
    <line id="sv-R"  x1="90" y1="10" x2="90" y2="90" stroke="#2a2a2a" stroke-width="5" stroke-linecap="round"/>
    <!-- hit zones (transparent, on top) -->
    <line x1="10" y1="10" x2="90" y2="90" stroke="transparent" stroke-width="18" class="q6hit" data-s="D1" style="cursor:pointer"/>
    <line x1="90" y1="10" x2="10" y2="90" stroke="transparent" stroke-width="18" class="q6hit" data-s="D2" style="cursor:pointer"/>
    <line x1="10" y1="10" x2="90" y2="10" stroke="transparent" stroke-width="18" class="q6hit" data-s="T"  style="cursor:pointer"/>
    <line x1="10" y1="90" x2="90" y2="90" stroke="transparent" stroke-width="18" class="q6hit" data-s="B"  style="cursor:pointer"/>
    <line x1="10" y1="10" x2="10" y2="90" stroke="transparent" stroke-width="18" class="q6hit" data-s="L"  style="cursor:pointer"/>
    <line x1="90" y1="10" x2="90" y2="90" stroke="transparent" stroke-width="18" class="q6hit" data-s="R"  style="cursor:pointer"/>
  </svg>
  <!-- Info panel -->
  <div style="min-width:140px">
    <div style="display:flex;gap:16px;align-items:flex-end;margin-bottom:8px">
      <div id="q6-char"
           style="font-family:Solan4,sans-serif;font-size:80px;color:#4fc3f7;
                  line-height:1;background:#111;padding:6px 12px;
                  border:1px solid #1e1e1e;border-radius:3px;min-width:64px;text-align:center">0</div>
      <div id="q6-ru"
           style="font-size:52px;color:#e0c080;line-height:1;
                  background:#111;padding:6px 10px;
                  border:1px solid #1e1e1e;border-radius:3px;min-width:48px;text-align:center">—</div>
    </div>
    <div id="q6-h"    style="font-family:monospace;font-size:16px;color:#4fc3f7;margin:4px 0">h = 0</div>
    <div id="q6-bits" style="font-family:monospace;font-size:14px;color:#555">D2·D1·R·L·B·T = 000000</div>
    <div id="q6-segs" style="font-size:13px;color:#888;margin-top:4px">—</div>
    <div id="q6-conf" style="font-size:11px;color:#444;margin-top:4px"></div>
  </div>
</div>
<!-- Segment toggle buttons -->
<div style="display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 12px">
  <button class="q6btn" data-s="T"  onclick="q6toggle('T')" >T  верх ─</button>
  <button class="q6btn" data-s="B"  onclick="q6toggle('B')" >B  низ  ─</button>
  <button class="q6btn" data-s="L"  onclick="q6toggle('L')" >L  лево │</button>
  <button class="q6btn" data-s="R"  onclick="q6toggle('R')" >R  право│</button>
  <button class="q6btn" data-s="D1" onclick="q6toggle('D1')">D1 диаг ╲</button>
  <button class="q6btn" data-s="D2" onclick="q6toggle('D2')">D2 диаг ╱</button>
  <button onclick="q6reset()"
          style="background:#111;border:1px solid #333;color:#666;
                 padding:5px 12px;cursor:pointer;border-radius:3px;font-size:12px">↺ сброс</button>
</div>
<!-- h slider -->
<div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap">
  <span style="color:#555;font-size:12px">h:</span>
  <input id="q6-range" type="range" min="0" max="63" value="0"
         oninput="q6setH(+this.value)"
         style="width:200px;accent-color:#4fc3f7">
  <span id="q6-rval" style="font-family:monospace;font-size:12px;color:#555">0 / 63</span>
</div>
<!-- Hamming neighbours (d=1) -->
<p class="meta" style="margin:14px 0 6px">Соседи по Q6 (расстояние Хэмминга d=1) — нажмите для перехода:</p>
<div id="q6-nbrs" style="display:flex;gap:6px;flex-wrap:wrap"></div>
<style>
.q6btn {
  background:#111; border:1px solid #2a2a2a; color:#555;
  padding:5px 10px; cursor:pointer; border-radius:3px;
  font-family:monospace; font-size:12px; transition:all .1s;
}
.q6btn.on { background:#0d2030; border-color:#4fc3f7; color:#4fc3f7; }
</style>
<script>
(function() {
  var BITS = {T:1,B:2,L:4,R:8,D1:16,D2:32};
  var st = {T:0,B:0,L:0,R:0,D1:0,D2:0};
  var H2C = {0:"0",1:"1",2:"2",3:"7",4:"3",5:"8",6:"9",7:"M",8:"4",9:"A",10:"B",11:"N",12:"H",13:"O",14:"Z",15:"A",16:"5",17:"D",18:"E",19:"C",20:"F",21:"G",22:"S",23:"O",24:"G",25:"T",26:"U",27:"i",28:"V",29:"j",30:"k",31:"K",32:"6",33:"H",34:"I",35:"J",36:"J",37:"X",38:"Y",39:"a",40:"K",41:"N",42:"a",43:"m",44:"B",45:"t",46:"o",47:"w",48:"L",49:"D",50:"d",51:"U",52:"e",53:"q",54:"I",55:"P",56:"h",57:"X",58:"t",59:"y",60:"W",61:"f",62:"Q",63:"E"};
  var H2RU = {3:"Н",9:"Л",14:"Б",15:"Р",19:"З",20:"В",24:"М",28:"Ж",35:"Ч",44:"И",47:"О",48:"Т",49:"Г",50:"Д",51:"У",63:"А"};
  var H2OK = {12:1,14:1,15:1,19:1,21:1,23:1,28:1,31:1,35:1,39:1,41:1,44:1,45:1,48:1,49:1,51:1,54:1,55:1,56:1,57:1,60:1,61:1,62:1,63:1};
  var SEG_COL = "#4fc3f7";
  var SEG_OFF = "#2a2a2a";

  function hval() {
    var v=0; for(var s in BITS) v += st[s]*BITS[s]; return v;
  }
  function segsStr(hv) {
    var a=[]; for(var s in BITS) if(BITS[s]&hv) a.push(s); return a.join("+") || "—";
  }
  function update() {
    var hv = hval();
    var ch = H2C[hv]||"?";
    var ru = H2RU[hv]||"—";
    var bits = hv.toString(2).padStart(6,"0");
    document.getElementById("q6-char").textContent = ch;
    document.getElementById("q6-ru").textContent = ru;
    document.getElementById("q6-h").textContent = "h = "+hv;
    document.getElementById("q6-bits").textContent = "D2·D1·R·L·B·T = "+bits;
    document.getElementById("q6-segs").textContent = segsStr(hv);
    document.getElementById("q6-conf").textContent = H2OK[hv] ? "● пиксельно подтверждено" : "○ последовательное назначение";
    document.getElementById("q6-range").value = hv;
    document.getElementById("q6-rval").textContent = hv+" / 63";
    var ruEl = document.getElementById("q6-ru");
    ruEl.style.color = ru==="—" ? "#333" : "#e0c080";
    for(var s in BITS) {
      var vis = document.getElementById("sv-"+s);
      if(vis) vis.setAttribute("stroke", st[s] ? SEG_COL : SEG_OFF);
      var btn = document.querySelector(".q6btn[data-s='"+s+"']");
      if(btn) { if(st[s]) btn.classList.add("on"); else btn.classList.remove("on"); }
    }
    // Hamming neighbours
    var nbrsEl = document.getElementById("q6-nbrs");
    if (nbrsEl) {
      nbrsEl.innerHTML = "";
      Object.keys(BITS).forEach(function(s) {
        var nh = hv ^ BITS[s];
        var nc = H2C[nh] || "?";
        var nr = H2RU[nh] || "";
        var ok = H2OK[nh];
        var cell = document.createElement("div");
        cell.title = "h="+nh+" (±"+s+")";
        cell.style.cssText = "background:#0d0d0d;border:1px solid #1c1c1c;border-radius:3px;"+
          "padding:5px 7px;text-align:center;cursor:pointer;min-width:46px;"+
          "transition:border-color .1s";
        cell.innerHTML =
          "<div style='color:#3a3a3a;font-size:9px;font-family:monospace;margin-bottom:2px'>±"+s+"</div>"+
          "<div style='font-family:Solan4,sans-serif;font-size:26px;line-height:1;color:"+(ok?"#4fc3f7":"#446677")+"'>"+nc+"</div>"+
          "<div style='font-size:13px;color:"+(nr?"#e0c080":"#2a2a2a")+"'>"+( nr||"—" )+"</div>"+
          "<div style='font-size:9px;color:#333;font-family:monospace'>"+nh+"</div>";
        cell.addEventListener("mouseenter", function() { this.style.borderColor="#333"; });
        cell.addEventListener("mouseleave", function() { this.style.borderColor="#1c1c1c"; });
        (function(nhv) {
          cell.addEventListener("click", function() { q6setH(nhv); });
        })(nh);
        nbrsEl.appendChild(cell);
      });
    }
  }
  window.q6toggle = function(s) { st[s]=st[s]?0:1; update(); };
  window.q6setH = function(hv) {
    for(var s in BITS) st[s]=(hv&BITS[s])?1:0; update();
  };
  window.q6reset = function() { for(var s in st) st[s]=0; update(); };
  window.q6GetH  = function() { return hval(); };
  document.querySelectorAll(".q6hit").forEach(function(el) {
    el.addEventListener("click", function() { q6toggle(this.getAttribute("data-s")); });
  });
  // Make Hasse triangle cells and phonetic cells clickable → Q6 explorer
  function wireCell(el) {
    var m = el.title.match(/h=(\d+)/);
    if (!m) return;
    var hv = +m[1];
    el.style.cursor = "pointer";
    el.addEventListener("click", function() {
      q6setH(hv);
      document.getElementById("q6-char").scrollIntoView({behavior:"smooth", block:"center"});
    });
  }
  document.querySelectorAll(".tri-cell").forEach(wireCell);
  document.querySelectorAll(".phon-cell").forEach(wireCell);
  update();
})();
</script>
</div>
<div class="section">
<h2>Q6 Клеточный Автомат — пространство состояний (Z₂)⁶</h2>
<p class="meta">Каждая клетка = вершина Q6 · Правило XOR использует структуру группы (Z₂)⁶ → фрактал Серпинского<br>
Нажмите на клетку <b>верхней строки</b> — установить h из Q6-Эксплорера · <span style="color:#e0c040">■</span> = русская буква</p>
<!-- Controls -->
<div style="display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 6px;align-items:center">
  <span style="color:#555;font-size:11px">Правило:</span>
  <button class="cabtn active" id="ca-rule-xor"  onclick="caSetRule('xor')" >XOR ⊕</button>
  <button class="cabtn"        id="ca-rule-xor3" onclick="caSetRule('xor3')">XOR3</button>
  <button class="cabtn"        id="ca-rule-and"  onclick="caSetRule('and')" >AND &amp;</button>
  <button class="cabtn"        id="ca-rule-or"   onclick="caSetRule('or')"  >OR  |</button>
  <span style="color:#2a2a2a">│</span>
  <span style="color:#555;font-size:11px">IC:</span>
  <button class="cabtn" onclick="caIC('center')">центр h=63</button>
  <button class="cabtn" onclick="caIC('edge')"  >край  h=63</button>
  <button class="cabtn" onclick="caIC('random')">случайно</button>
  <span style="color:#2a2a2a">│</span>
  <button class="cabtn" onclick="caStep()">→ шаг</button>
  <button class="cabtn" id="ca-auto-btn" onclick="caToggleAuto()">▶ авто</button>
  <button class="cabtn" onclick="caReset()">↺ сброс</button>
</div>
<!-- CA space-time grid -->
<div id="ca-grid"
     style="font-family:Solan4,monospace;font-size:14px;line-height:1.15;
            background:#060606;border:1px solid #1a1a1a;border-radius:3px;
            padding:6px 8px;overflow-x:auto;white-space:nowrap;
            margin:4px 0;user-select:none"></div>
<p class="meta" id="ca-status" style="margin-top:4px;font-family:monospace"></p>
<!-- 4-panel rule comparison -->
<p class="meta" style="margin:10px 0 4px">
  Сравнение правил — одинаковые начальные условия, 18 шагов, 24 клетки
  <span style="color:#444"> · нажмите панель → развернуть в главном CA</span>
</p>
<div id="ca-compare" style="display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-bottom:6px">
  <div class="ca-panel" onclick="caSetRule('xor')">
    <div class="ca-panel-title">XOR ⊕ — фрактал Серпинского</div>
    <div id="ca-cmp-xor" class="ca-panel-grid"></div>
  </div>
  <div class="ca-panel" onclick="caSetRule('xor3')">
    <div class="ca-panel-title">XOR3 — сдвиговый осциллятор</div>
    <div id="ca-cmp-xor3" class="ca-panel-grid"></div>
  </div>
  <div class="ca-panel" onclick="caSetRule('and')">
    <div class="ca-panel-title">AND &amp; — разрушительный, схлопывается</div>
    <div id="ca-cmp-and" class="ca-panel-grid"></div>
  </div>
  <div class="ca-panel" onclick="caSetRule('or')">
    <div class="ca-panel-title">OR | — заполняющий, расширяется</div>
    <div id="ca-cmp-or" class="ca-panel-grid"></div>
  </div>
</div>
<style>
.ca-panel {
  background:#060606;border:1px solid #1c1c1c;border-radius:3px;
  padding:5px 7px;cursor:pointer;transition:border-color .15s;
}
.ca-panel:hover { border-color:#333; }
.ca-panel-title { font-size:10px;color:#4a4a4a;margin-bottom:3px;font-family:monospace; }
.ca-panel-grid  { font-family:Solan4,monospace;font-size:11px;line-height:1.1;white-space:nowrap;overflow:hidden; }
</style>
<!-- Orbit table -->
<p class="meta" style="margin:10px 0 4px">
  Орбиты — транзиент T и период P для каждого правила · первые 16 клеток цикла
</p>
<table id="orbit-table"
       style="width:100%;border-collapse:collapse;font-family:monospace;font-size:12px;margin-bottom:6px">
</table>
<!-- Entropy sparklines -->
<p class="meta" style="margin:10px 0 3px">
  Энтропия H(t) — <span style="color:#aaa">распределение состояний клеток по шагам ·</span>
  <span style="color:#333">▁▂▃▄▅▆▇█ = низкая → высокая</span>
</p>
<table id="entropy-sparks"
       style="width:100%;border-collapse:collapse;font-family:monospace;font-size:12px;margin-bottom:6px">
</table>
<style>
.cabtn {
  background:#111; border:1px solid #2a2a2a; color:#555;
  padding:4px 9px; cursor:pointer; border-radius:3px;
  font-size:11px; font-family:monospace; transition:border-color .1s,color .1s;
}
.cabtn:hover  { border-color:#444; color:#888; }
.cabtn.active { border-color:#4fc3f7; color:#4fc3f7; background:#0d2030; }
</style>
<script>
(function() {
  var CW = 48, CH = 26;  // ширина в клетках, высота в шагах
  var RULE = 'xor';
  var INIT = Array(CW).fill(0);
  var HIST = [];           // история: list of row arrays
  var AUTO_ID = null;

  var H2C = {0:"0",1:"1",2:"2",3:"7",4:"3",5:"8",6:"9",7:"M",8:"4",9:"A",10:"B",11:"N",12:"H",13:"O",14:"Z",15:"A",16:"5",17:"D",18:"E",19:"C",20:"F",21:"G",22:"S",23:"O",24:"G",25:"T",26:"U",27:"i",28:"V",29:"j",30:"k",31:"K",32:"6",33:"H",34:"I",35:"J",36:"J",37:"X",38:"Y",39:"a",40:"K",41:"N",42:"a",43:"m",44:"B",45:"t",46:"o",47:"w",48:"L",49:"D",50:"d",51:"U",52:"e",53:"q",54:"I",55:"P",56:"h",57:"X",58:"t",59:"y",60:"W",61:"f",62:"Q",63:"E"};
  var H2RU = {3:1,9:1,14:1,15:1,19:1,20:1,24:1,28:1,35:1,44:1,47:1,48:1,49:1,50:1,51:1,63:1};

  function hw(h){var c=0;while(h){c+=h&1;h>>=1;}return c;}
  var WC = ["#222","#1a3a6a","#1e52a0","#2a70cc","#50a0e0","#88cce8","#e8e8e8"];
  function col(h){ return H2RU[h] ? "#e0c040" : WC[hw(h)]; }

  function nextRow(row) {
    var n=row.length, out=[];
    for(var i=0;i<n;i++){
      var l=row[(i-1+n)%n], r=row[(i+1)%n];
      if(RULE==='xor')  out.push(l^r);
      else if(RULE==='xor3') out.push(l^row[i]^r);
      else if(RULE==='and')  out.push(l&r);
      else                   out.push(l|r);
    }
    return out;
  }

  function nextRowWith(row, r) {
    var n=row.length, out=[];
    for(var i=0;i<n;i++){
      var l=row[(i-1+n)%n], s=row[i], ri=row[(i+1)%n];
      if(r==='xor')  out.push(l^ri);
      else if(r==='xor3') out.push(l^s^ri);
      else if(r==='and')  out.push(l&ri);
      else                out.push(l|ri);
    }
    return out;
  }

  var CMP_W=24, CMP_H=18;
  function renderCompare() {
    var src = INIT.slice(0,CMP_W);
    while(src.length < CMP_W) src.push(0);
    ['xor','xor3','and','or'].forEach(function(r) {
      var el=document.getElementById('ca-cmp-'+r); if(!el) return;
      var html='', cur=src.slice();
      for(var t=0;t<CMP_H;t++){
        html+='<div>';
        for(var i=0;i<CMP_W;i++){
          var h=cur[i]; html+='<span style="color:'+col(h)+'">'+(H2C[h]||'?')+'</span>';
        }
        html+='</div>';
        cur=nextRowWith(cur,r);
      }
      el.innerHTML=html;
    });
  }

  function findOrbitJS(init, r, maxSteps) {
    var seen={}, cur=init.slice();
    for(var t=0;t<=maxSteps;t++){
      var key=cur.join(',');
      if(seen.hasOwnProperty(key)) return {transient:seen[key], period:t-seen[key]};
      seen[key]=t;
      cur=nextRowWith(cur,r);
    }
    return {transient:null, period:null};
  }

  var RULE_LABELS = {
    'xor':  'XOR ⊕ — (Z₂)⁶, фрактал',
    'xor3': 'XOR3  — сдвиг',
    'and':  'AND & — схлопывается',
    'or':   'OR |  — расширяется'
  };

  function renderOrbitTable() {
    var tbl = document.getElementById('orbit-table'); if(!tbl) return;
    var init = INIT.slice(0, 24); while(init.length<24) init.push(0);
    var html='';
    ['xor','xor3','and','or'].forEach(function(r) {
      var o = findOrbitJS(init, r, 800);
      var tp = (o.transient===null)
        ? '<span style="color:#555">T=? P&gt;800</span>'
        : '<span style="color:#aaa">T='+o.transient+'</span>&nbsp;&nbsp;<span style="color:#4fc3f7">P='+o.period+'</span>';
      // Build cycle strip (up to 8 states, 16 cells each)
      var strip='', cur=init.slice();
      for(var i=0;i<(o.transient||0);i++) cur=nextRowWith(cur,r);
      var pLimit = Math.min(o.period||0, 8);
      for(var s=0;s<pLimit;s++){
        strip += '<span style="display:inline-block;margin-right:5px">';
        for(var i=0;i<16;i++){
          var h=cur[i]; strip+='<span style="color:'+col(h)+'">'+(H2C[h]||'?')+'</span>';
        }
        strip += '</span>';
        if(s < pLimit-1) strip += '<span style="color:#333">→</span>';
        cur = nextRowWith(cur,r);
      }
      if(o.period>8) strip += '<span style="color:#333"> …</span>';
      if(!o.period) strip = '<span style="color:#2a2a2a">—</span>';
      html += '<tr>'
        + '<td style="color:#4fc3f7;padding:3px 10px 3px 0;white-space:nowrap">'+RULE_LABELS[r]+'</td>'
        + '<td style="padding:3px 12px 3px 0;white-space:nowrap">'+tp+'</td>'
        + '<td style="font-family:Solan4,monospace;font-size:12px;padding:3px 0">'+strip+'</td>'
        + '</tr>';
    });
    tbl.innerHTML = html;
  }

  function calcEntropy(row) {
    var n=row.length, cnt={}, H=0;
    row.forEach(function(h){ cnt[h]=(cnt[h]||0)+1; });
    Object.keys(cnt).forEach(function(k){ var p=cnt[k]/n; H-=p*Math.log2(p); });
    return H;
  }

  var ENT_BLOCK=' ▁▂▃▄▅▆▇█';
  var ENT_COLORS={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
  var ENT_LABELS={xor:'XOR ⊕',xor3:'XOR3 ',and:'AND & ',or:'OR |  '};

  function renderEntropySparklines() {
    var tbl=document.getElementById('entropy-sparks'); if(!tbl) return;
    var src=INIT.slice(0,CW); while(src.length<CW) src.push(0);
    var STEPS=CW-1;  // same number of steps as CA width
    var profs={}, maxH=0;
    ['xor','xor3','and','or'].forEach(function(r){
      var cur=src.slice(), prof=[calcEntropy(cur)];
      for(var t=0;t<STEPS;t++){ cur=nextRowWith(cur,r); prof.push(calcEntropy(cur)); }
      profs[r]=prof;
      maxH=Math.max(maxH,Math.max.apply(null,prof));
    });
    maxH=Math.max(maxH,1e-9);
    var html='';
    ['xor','xor3','and','or'].forEach(function(r){
      var prof=profs[r], spark='';
      prof.forEach(function(h){
        var idx=Math.min(8,Math.floor(8*h/maxH));
        spark+=ENT_BLOCK[idx];
      });
      var h0=prof[0], hf=prof[prof.length-1];
      var trend=hf>h0+0.02?'↑':hf<h0-0.02?'↓':'→';
      var col=ENT_COLORS[r];
      html+='<tr>'
        +'<td style="color:'+col+';padding:2px 10px 2px 0;white-space:nowrap">'+ENT_LABELS[r]+'</td>'
        +'<td style="color:'+col+';padding:2px 10px 2px 0;letter-spacing:0">'+spark+'</td>'
        +'<td style="color:#555;padding:2px 8px 2px 0;white-space:nowrap">H₀='+h0.toFixed(2)+'</td>'
        +'<td style="color:#555;padding:2px 8px 2px 0;white-space:nowrap">Hf='+hf.toFixed(2)+'</td>'
        +'<td style="color:'+col+';padding:2px 0">'+trend+'</td>'
        +'</tr>';
    });
    tbl.innerHTML=html;
  }

  function buildHistory() {
    HIST = [INIT.slice()];
    var cur = HIST[0];
    for(var t=1;t<CH;t++){cur=nextRow(cur);HIST.push(cur);}
  }

  function render() {
    var g = document.getElementById('ca-grid'); if(!g) return;
    var html='';
    for(var t=0;t<HIST.length;t++){
      var row=HIST[t], isTop=(t===0);
      html += isTop ? '<div id="ca-row0">' : '<div>';
      for(var i=0;i<row.length;i++){
        var h=row[i], c=H2C[h]||'?';
        html += '<span style="color:'+col(h)+'"'+(isTop?' data-idx="'+i+'"':'')+
                ' title="h='+h+'">' + c + '</span>';
      }
      html += '</div>';
    }
    g.innerHTML = html;
    // Wire initial row clicks
    document.querySelectorAll('#ca-row0 span').forEach(function(sp){
      sp.style.cursor='pointer';
      sp.addEventListener('click',function(){
        var idx=+this.getAttribute('data-idx');
        var newH = (typeof q6GetH==='function') ? q6GetH() : (INIT[idx]===63?0:63);
        INIT[idx]=newH;
        buildHistory();
        render();
      });
    });
    var t0 = HIST.length-1;
    var st = document.getElementById('ca-status'); if(st) st.textContent='правило: '+RULE+'  ·  t='+t0+'  ·  ширина='+CW;
    renderCompare();
    renderOrbitTable();
    renderEntropySparklines();
  }

  window.caNextRow    = nextRowWith;
  window.caH2C        = H2C;
  window.caCol        = col;
  window.findOrbitJS  = findOrbitJS;
  window.caSetRule = function(r){
    RULE=r;
    document.querySelectorAll('[id^="ca-rule-"]').forEach(function(b){b.classList.remove('active');});
    var b=document.getElementById('ca-rule-'+r); if(b) b.classList.add('active');
    buildHistory(); render();
  };
  window.caIC = function(type){
    var c=Array(CW).fill(0);
    if(type==='center') c[Math.floor(CW/2)]=63;
    else if(type==='edge') c[0]=63;
    else for(var i=0;i<CW;i++) c[i]=Math.floor(Math.random()*64);
    INIT=c; buildHistory(); render();
  };
  window.caReset = function(){ buildHistory(); render(); };
  window.caStep  = function(){
    var last=HIST[HIST.length-1];
    if(HIST.length>=CH) HIST.shift();
    HIST.push(nextRow(last)); render();
  };
  window.caToggleAuto = function(){
    if(AUTO_ID){
      clearInterval(AUTO_ID); AUTO_ID=null;
      document.getElementById('ca-auto-btn').textContent='▶ авто';
      document.getElementById('ca-auto-btn').classList.remove('active');
    } else {
      AUTO_ID=setInterval(caStep,100);
      document.getElementById('ca-auto-btn').textContent='⏸ стоп';
      document.getElementById('ca-auto-btn').classList.add('active');
    }
  };

  buildHistory(); render();
})();
</script>
</div>
<div class="section">
<h2>Слово на орбите Q6</h2>
<p class="meta">Русское слово → фонетическая кодировка Q6 → CA → орбитальная сигнатура<br>
Алфавит: А Б В Г Д Ж З И Л М Н О Р Т У Ч · остальные буквы пропускаются</p>
<div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin:8px 0">
  <input id="word-inp" type="text" value="РАТОН" maxlength="20"
         style="background:#111;color:#ccc;border:1px solid #333;padding:6px 10px;
                font-size:14px;font-family:monospace;width:160px;border-radius:3px"
         oninput="wordUpdate()">
  <span style="color:#333;font-size:11px">Правило:</span>
  <button class="cabtn active" id="wr-xor"  onclick="wordSetRule('xor')" >XOR ⊕</button>
  <button class="cabtn"        id="wr-xor3" onclick="wordSetRule('xor3')">XOR3</button>
  <button class="cabtn"        id="wr-and"  onclick="wordSetRule('and')" >AND &amp;</button>
  <button class="cabtn"        id="wr-or"   onclick="wordSetRule('or')"  >OR |</button>
</div>
<!-- Encoded sequence display -->
<div id="word-encoded" style="margin:6px 0 4px;font-size:12px;font-family:monospace;color:#555"></div>
<div id="word-solan"   style="font-family:Solan4,monospace;font-size:20px;letter-spacing:4px;margin-bottom:8px"></div>
<!-- CA diagram -->
<div id="word-ca"
     style="font-family:Solan4,monospace;font-size:13px;line-height:1.15;
            background:#060606;border:1px solid #1a1a1a;border-radius:3px;
            padding:6px 8px;white-space:nowrap;overflow-x:auto;display:inline-block;margin:4px 0"></div>
<!-- Orbit mini-table -->
<table id="word-orbits"
       style="margin-top:8px;border-collapse:collapse;font-family:monospace;font-size:12px"></table>
<script>
(function() {
  // Фонетическая карта: русская буква → h
  var WH = {А:63,Р:15,Т:48,Л:9,Н:3,О:47,Б:14,М:24,В:20,Д:50,Г:49,У:51,И:44,З:19,Ж:28,Ч:35};
  var WR = 'xor';
  var WW = 24;   // ширина CA
  var WS = 20;   // шаги

  function encodeWord(word) {
    var out=[];
    word.toUpperCase().split('').forEach(function(c){ if(WH[c]!==undefined) out.push(WH[c]); });
    return out;
  }
  function padTo(cells, w) {
    if(!cells.length) return Array(w).fill(0);
    var out=[];
    for(var i=0;i<w;i++) out.push(cells[i%cells.length]);
    return out;
  }
  function findOrbit(init, rule, maxSteps) {
    var seen={}, cur=init.slice();
    for(var t=0;t<=maxSteps;t++){
      var key=cur.join(',');
      if(seen.hasOwnProperty(key)) return {transient:seen[key],period:t-seen[key]};
      seen[key]=t; cur=caNextRow(cur,rule);
    }
    return {transient:null,period:null};
  }

  var WCOLORS={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
  var WLABELS={xor:'XOR ⊕',xor3:'XOR3',and:'AND &',or:'OR | '};

  function wordUpdate() {
    var word = (document.getElementById('word-inp').value||'РАТОН').toUpperCase();
    var raw  = encodeWord(word);
    var H2C  = caH2C, col = caCol;

    // Encoded display
    var encEl = document.getElementById('word-encoded');
    var solEl = document.getElementById('word-solan');
    if(encEl) {
      if(raw.length===0){
        encEl.textContent='(нет фонетических символов)';
        solEl.innerHTML='';
      } else {
        var letters = word.split('').filter(function(c){return WH[c]!==undefined;});
        encEl.innerHTML = letters.map(function(c,i){
          return '<span title="'+c+'=h'+WH[c]+'" style="margin-right:6px;color:#666">'+c
                 +'<sub style="font-size:9px;color:#333">'+WH[c]+'</sub></span>';
        }).join('');
        solEl.innerHTML = raw.map(function(h){
          return '<span style="color:'+col(h)+'" title="h='+h+'">'+(H2C[h]||'?')+'</span>';
        }).join('');
      }
    }

    if(!raw.length) {
      var ca=document.getElementById('word-ca'); if(ca) ca.innerHTML='';
      var ot=document.getElementById('word-orbits'); if(ot) ot.innerHTML='';
      return;
    }

    var cells = padTo(raw, WW);

    // CA diagram
    var caEl = document.getElementById('word-ca');
    if(caEl) {
      var html='', cur=cells.slice();
      for(var t=0;t<=WS;t++){
        html+='<div><span style="color:#333;font-family:monospace;font-size:11px">'+
              (t<10?'  ':t<100?' ':'')+t+' │ </span>';
        for(var i=0;i<WW;i++){
          var h=cur[i]; html+='<span style="color:'+col(h)+'">'+(H2C[h]||'?')+'</span>';
        }
        html+='</div>';
        cur=caNextRow(cur,WR);
      }
      caEl.innerHTML=html;
    }

    // Orbit table
    var otEl = document.getElementById('word-orbits');
    if(otEl) {
      var ohtml='';
      ['xor','xor3','and','or'].forEach(function(r){
        var o=findOrbit(cells,r,1000);
        var c=WCOLORS[r];
        var ts=o.transient!==null?o.transient:'?';
        var ps=o.period!==null?o.period:'>1000';
        ohtml+='<tr>'
          +'<td style="color:'+c+';padding:2px 12px 2px 0;white-space:nowrap">'+WLABELS[r]+'</td>'
          +'<td style="color:#555;padding:2px 10px 2px 0;white-space:nowrap">T='+ts+'</td>'
          +'<td style="color:'+c+';padding:2px 0;white-space:nowrap">P='+ps+'</td>'
          +'</tr>';
      });
      otEl.innerHTML=ohtml;
    }
  }

  window.wordUpdate  = wordUpdate;
  window.wordSetRule = function(r) {
    WR = r;
    document.querySelectorAll('[id^="wr-"]').forEach(function(b){b.classList.remove('active');});
    var b=document.getElementById('wr-'+r); if(b) b.classList.add('active');
    wordUpdate();
  };

  wordUpdate();
})();
</script>
</div>
<div class="section">
<h2>Орбитальный лексикон Q6</h2>
<p class="meta">Найти слова с похожими орбитами в словаре из 49 слов ·
  <span style="color:#444">width=16, max_steps=800</span></p>
<div style="display:flex;gap:8px;align-items:center;margin:6px 0 10px">
  <input id="lex-inp" type="text" value="РАТОН" maxlength="20"
         style="background:#111;color:#ccc;border:1px solid #333;
                padding:6px 10px;font-size:14px;font-family:monospace;
                width:160px;border-radius:3px"
         oninput="lexFind()">
  <span style="color:#555;font-size:11px;font-family:monospace">
    → ближайшие орбитальные соседи из лексикона</span>
</div>
<div id="lex-sig" style="font-size:11px;color:#444;font-family:monospace;margin-bottom:6px"></div>
<div id="lex-results" style="font-family:monospace;font-size:12px"></div>
<script>
(function() {
  var WH2={А:63,Р:15,Т:48,Л:9,Н:3,О:47,Б:14,М:24,В:20,Д:50,Г:49,У:51,И:44,З:19,Ж:28,Ч:35};
  var LCOL={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
  var LEXW=16, LEXSTEPS=800;

  var LEXICON=['ГОРА','ВОДА','НОРА','ЛУНА','ВОЛНА','ТУМАН','ТУНДРА','ДУГА','ГРУДА',
    'ЗИМА','ЛУГА','УДАР','ВЗЛОМ','РАБОТА','НАДО','ДОБРО','ОБРАЗ','ТРОН','ГОРН',
    'БОЛТ','ЛИТР','НОТА','РОТА','РУЛОН','ЗОНТ','ТОННА','ЖУРНАЛ','ВИТРАЖ','МОНТАЖ',
    'ДОМРА','НАБОР','НИТРО','ЗУБР','НАРОД','ДРОН','МАРТ','УТРО','МАТ','РИТМ',
    'ДУМА','НОРМА','МОДА','ГОРОД','ЗАВОД','ДРОВА','ЖАТВА','БИТВА','ЖИТО','РАТОН'];

  function encL(word) {
    var out=[];
    word.toUpperCase().split('').forEach(function(c){ if(WH2[c]!==undefined) out.push(WH2[c]); });
    return out;
  }
  function padL(cells,w) {
    if(!cells.length) return Array(w).fill(0);
    return Array.from({length:w},function(_,i){ return cells[i%cells.length]; });
  }
  function sigL(word) {
    var cells=padL(encL(word),LEXW), sig={};
    ['xor','xor3','and','or'].forEach(function(r){
      sig[r]=findOrbitJS(cells,r,LEXSTEPS);
    });
    return sig;
  }
  function distL(s1,s2) {
    var total=0,count=0;
    ['xor','xor3','and','or'].forEach(function(r){
      var p1=s1[r]?s1[r].period:null, p2=s2[r]?s2[r].period:null;
      if(p1!==null&&p2!==null){total+=Math.abs(p1-p2)/Math.max(p1,p2,1);count++;}
    });
    return count>0?total/count:NaN;
  }

  // Pre-compute lexicon signatures once
  var _lexSigs=null;
  function getLexSigs() {
    if(!_lexSigs){ _lexSigs={}; LEXICON.forEach(function(w){ _lexSigs[w]=sigL(w); }); }
    return _lexSigs;
  }

  window.lexFind = function() {
    var word=(document.getElementById('lex-inp').value||'РАТОН').toUpperCase();
    var raw=encL(word);
    var sigEl=document.getElementById('lex-sig');
    var resEl=document.getElementById('lex-results');
    if(!raw.length){
      if(sigEl) sigEl.textContent='(нет фонетических символов)';
      if(resEl) resEl.innerHTML='';
      return;
    }
    var ts=sigL(word);
    var sigStr=['xor','xor3','and','or'].map(function(r){
      var o=ts[r]; var col=LCOL[r];
      return '<span style="color:'+col+'">P<sub>'+r+'</sub>='+
             (o&&o.period!==null?o.period:'?')+'</span>';
    }).join('  ');
    if(sigEl) sigEl.innerHTML='Сигнатура: '+sigStr;

    var lsigs=getLexSigs();
    var dists=LEXICON.map(function(w){
      return {word:w,dist:distL(ts,lsigs[w]),sig:lsigs[w]};
    });
    dists.sort(function(a,b){ return (isNaN(a.dist)?1:isNaN(b.dist)?-1:a.dist-b.dist); });

    var maxD=dists.reduce(function(m,x){ return (!isNaN(x.dist)&&x.dist>m)?x.dist:m; },0)||1;
    var html='';
    dists.slice(0,10).forEach(function(item){
      var blen=20, filled=Math.round(item.dist/maxD*blen);
      var bar='█'.repeat(filled)+'░'.repeat(blen-filled);
      var ps=['xor','xor3','and','or'].map(function(r){
        var o=item.sig[r]; return (o&&o.period!==null?o.period:'?');
      }).join(' ');
      var dStr=isNaN(item.dist)?'NaN':item.dist.toFixed(3);
      var eq=item.dist<0.001?'<span style="color:#4caf50"> ≡</span>':'';
      html+='<div style="display:flex;gap:8px;align-items:baseline;margin:1px 0">'
        +'<span style="min-width:90px;color:#aaa">'+item.word+'</span>'
        +'<span style="color:#4fc3f7">|'+bar+'|</span>'
        +'<span style="color:#555"> '+dStr+'</span>'
        +'<span style="color:#2a2a2a;font-size:10px"> ['+ps+']</span>'
        +eq+'</div>';
    });
    if(resEl) resEl.innerHTML=html;
  };

  // Export for sibling sections
  window.lexAllSigs   = getLexSigs;
  window.lexDistL     = distL;
  window.sigL         = sigL;
  window.encL         = encL;
  window.padL         = padL;
  window.LEXW         = LEXW;
  window.LEXSTEPS     = LEXSTEPS;
  window.LEXICON_ARR  = LEXICON;

  // Init on load
  setTimeout(lexFind,100);
})();
</script>
</div>
<div class="section">
<h2>Матрица расстояний Q6</h2>
<p class="meta">Попарные орбитальные расстояния для 49 слов ·
  <span style="color:#2d6a2d">■ зелёный = 0</span> →
  <span style="color:#999900">■ жёлтый = 0.5</span> →
  <span style="color:#8b1a1a">■ красный = 1</span> ·
  наведите курсор на ячейку</p>
<div style="display:flex;gap:20px;flex-wrap:wrap;align-items:flex-start;margin-top:8px">
  <div>
    <canvas id="mat-canvas" style="cursor:crosshair;display:block"></canvas>
    <div id="mat-tip" style="font-family:monospace;font-size:11px;color:#666;
         min-height:16px;margin-top:4px"> </div>
  </div>
  <div>
    <div id="mat-pairs" style="font-family:monospace;font-size:12px"></div>
  </div>
</div>
<script>
(function() {
  var CS=8, LW=76, LH=60;
  var _mwords=null, _msigs=null, _mcache={};

  function mDist(s1,s2) {
    var total=0,count=0;
    ['xor','xor3','and','or'].forEach(function(r){
      var p1=s1[r]?s1[r].period:null, p2=s2[r]?s2[r].period:null;
      if(p1!==null&&p2!==null){total+=Math.abs(p1-p2)/Math.max(p1,p2,1);count++;}
    });
    return count>0?total/count:NaN;
  }

  function hsl(d) {
    if(isNaN(d)) return '#222';
    var hue=Math.round(120*(1-Math.min(1,Math.max(0,d))));
    return 'hsl('+hue+',60%,28%)';
  }

  function getCachedDist(i,j) {
    var k=i<j?i*100+j:j*100+i;
    if(_mcache[k]===undefined)
      _mcache[k]=mDist(_msigs[_mwords[i]],_msigs[_mwords[j]]);
    return _mcache[k];
  }

  function drawMatrix() {
    var sigs=window.lexAllSigs?window.lexAllSigs():null;
    if(!sigs) return;
    _msigs=sigs;
    _mwords=Object.keys(sigs);
    var n=_mwords.length;
    var canvas=document.getElementById('mat-canvas');
    canvas.width=LW+n*CS; canvas.height=LH+n*CS;
    var ctx=canvas.getContext('2d');
    ctx.fillStyle='#0d0d0d';
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Column labels (rotated -90°)
    ctx.font='7px monospace'; ctx.fillStyle='#444'; ctx.textAlign='right';
    for(var j=0;j<n;j++){
      ctx.save();
      ctx.translate(LW+j*CS+CS/2, LH-2);
      ctx.rotate(-Math.PI/2);
      ctx.fillText(_mwords[j].substring(0,7),0,0);
      ctx.restore();
    }
    // Row labels
    ctx.font='7px monospace'; ctx.fillStyle='#444'; ctx.textAlign='right';
    for(var i=0;i<n;i++){
      ctx.fillText(_mwords[i].substring(0,8), LW-2, LH+i*CS+CS-1);
    }
    // Cells
    for(var i=0;i<n;i++){
      for(var j=0;j<n;j++){
        if(i===j){ ctx.fillStyle='#181818'; }
        else { ctx.fillStyle=hsl(getCachedDist(i,j)); }
        ctx.fillRect(LW+j*CS, LH+i*CS, CS-1, CS-1);
      }
    }
    renderPairs(n);
  }

  function renderPairs(n) {
    if(!_mwords||!_msigs) return;
    // Collect unique pairs, sort by distance
    var pairs=[];
    for(var i=0;i<_mwords.length;i++){
      for(var j=i+1;j<_mwords.length;j++){
        var d=getCachedDist(i,j);
        pairs.push([_mwords[i],_mwords[j],d]);
      }
    }
    pairs.sort(function(a,b){
      return isNaN(a[2])?1:isNaN(b[2])?-1:a[2]-b[2];
    });
    var near=pairs.slice(0,12);
    var far=pairs.filter(function(p){return !isNaN(p[2]);})
               .slice(-5).reverse();
    var maxD=pairs.reduce(function(m,p){return !isNaN(p[2])&&p[2]>m?p[2]:m;},0)||1;

    function barHTML(d) {
      var blen=16, f=isNaN(d)?blen:Math.round(d/maxD*blen);
      var hue=Math.round(120*(1-Math.min(1,Math.max(0,d))));
      var col=isNaN(d)?'#333':'hsl('+hue+',60%,40%)';
      return '<span style="color:'+col+'">|'+'█'.repeat(f)+'░'.repeat(blen-f)+'|</span>';
    }
    var html='<div style="color:#3a3a3a;font-size:10px;margin-bottom:4px">Ближайшие пары</div>';
    near.forEach(function(p){
      var eq=p[2]<0.001?' <span style="color:#4caf50">≡</span>':'';
      var ds=isNaN(p[2])?'NaN':p[2].toFixed(3);
      html+='<div style="margin:1px 0;white-space:nowrap">'
        +'<span style="color:#777;min-width:80px;display:inline-block">'+p[0]+'</span>'
        +'<span style="color:#333"> ↔ </span>'
        +'<span style="color:#777;min-width:80px;display:inline-block">'+p[1]+'</span>'
        +barHTML(p[2])
        +' <span style="color:#444">'+ds+'</span>'+eq
        +'</div>';
    });
    html+='<div style="color:#3a3a3a;font-size:10px;margin:10px 0 4px">Дальние пары</div>';
    far.forEach(function(p){
      html+='<div style="margin:1px 0;white-space:nowrap">'
        +'<span style="color:#555;min-width:80px;display:inline-block">'+p[0]+'</span>'
        +'<span style="color:#333"> ↔ </span>'
        +'<span style="color:#555;min-width:80px;display:inline-block">'+p[1]+'</span>'
        +barHTML(p[2])
        +' <span style="color:#444">'+p[2].toFixed(3)+'</span>'
        +'</div>';
    });
    document.getElementById('mat-pairs').innerHTML=html;
  }

  // Hover tooltip
  function initTooltip() {
    var canvas=document.getElementById('mat-canvas');
    var tip=document.getElementById('mat-tip');
    canvas.addEventListener('mousemove',function(e){
      if(!_mwords||!_msigs){tip.textContent=' ';return;}
      var r=canvas.getBoundingClientRect();
      var mx=(e.clientX-r.left)*(canvas.width/r.width);
      var my=(e.clientY-r.top)*(canvas.height/r.height);
      var j=Math.floor((mx-LW)/CS);
      var i=Math.floor((my-LH)/CS);
      var n=_mwords.length;
      if(i>=0&&i<n&&j>=0&&j<n){
        var d=getCachedDist(i,j);
        if(i===j) tip.textContent=_mwords[i]+' (собственная орбита)';
        else tip.textContent=_mwords[i]+' ↔ '+_mwords[j]
          +'  d = '+(isNaN(d)?'NaN':d.toFixed(4));
      } else {
        tip.textContent=' ';
      }
    });
    canvas.addEventListener('mouseleave',function(){tip.textContent=' ';});
  }

  initTooltip();
  window.mDist = mDist;
  setTimeout(function(){
    if(window.lexAllSigs) drawMatrix();
  }, 200);
})();
</script>
</div>
<div class="section">
<h2>Дендрограмма Q6 (UPGMA)</h2>
<p class="meta">Иерархическая кластеризация среднего расстояния · слайдер = высота отсечения · метки слева, корень справа</p>
<div style="display:flex;gap:16px;align-items:center;margin-bottom:8px;flex-wrap:wrap">
  <label style="color:#555;font-size:12px;font-family:monospace">Отсечение:&nbsp;
    <input type="range" id="dend-cut" min="0" max="100" value="5" step="1"
           style="vertical-align:middle;width:110px;accent-color:#4caf50">
    <span id="dend-cut-val" style="font-family:monospace;color:#777;min-width:44px;display:inline-block">auto</span>
  </label>
  <span id="dend-stats" style="font-family:monospace;font-size:11px;color:#3a3a3a"></span>
</div>
<canvas id="dend-canvas" width="700"
  style="display:block;border:1px solid #1a1a1a;cursor:crosshair"></canvas>
<div id="dend-info"
  style="font-family:monospace;font-size:11px;color:#444;min-height:16px;margin-top:4px"> </div>
<script>
(function(){
  var LW=82, RM=18, STEP=13;
  var PALETTE=['#2196f3','#4caf50','#ff9800','#e91e63','#9c27b0',
               '#00bcd4','#8bc34a','#ff5722','#3f51b5','#009688'];
  var _words=null, _dd=null, _nodeY={}, _nodeX={};
  var _hovLeaf=-1, _leafIds=null;

  function upgma(words,mat){
    var n=words.length, nodes={}, dm={};
    function key(a,b){return a<b?a+','+b:b+','+a;}
    for(var i=0;i<n;i++) nodes[i]={label:words[i],height:0,left:null,right:null,size:1};
    var active=new Set();
    for(var i=0;i<n;i++) active.add(i);
    for(var i=0;i<n;i++) for(var j=i+1;j<n;j++) dm[key(i,j)]=mat[i][j];
    var nextId=n;
    while(active.size>1){
      var minD=Infinity,minI=-1,minJ=-1,arr=Array.from(active);
      for(var a=0;a<arr.length;a++) for(var b=a+1;b<arr.length;b++){
        var d=dm[key(arr[a],arr[b])];
        if(d<minD){minD=d;minI=arr[a];minJ=arr[b];}
      }
      var si=nodes[minI].size,sj=nodes[minJ].size,nid=nextId++;
      nodes[nid]={label:null,height:minD,left:minI,right:minJ,size:si+sj};
      active.delete(minI);active.delete(minJ);
      active.forEach(function(k){
        var dki=dm[key(k,minI)]||0,dkj=dm[key(k,minJ)]||0;
        dm[key(k,nid)]=(dki*si+dkj*sj)/(si+sj);
      });
      active.add(nid);
    }
    return{nodes:nodes,root:Array.from(active)[0]};
  }

  function leafOrder(nodes,root){
    function dfs(nid){
      var nd=nodes[nid];
      if(nd.label!==null) return[nid];
      var li=nd.left,ri=nd.right;
      if(nodes[li].size>nodes[ri].size){var t=li;li=ri;ri=t;}
      return dfs(li).concat(dfs(ri));
    }
    return dfs(root);
  }

  function flatClusters(nodes,root,cut){
    var res=[];
    function collect(nid){
      var nd=nodes[nid];
      if(nd.label!==null){res.push([nid]);return;}
      if(nd.height<=cut){
        var lv=[];
        (function L(s){var sn=nodes[s];if(sn.label!==null){lv.push(s);return;}L(sn.left);L(sn.right);})(nid);
        res.push(lv);
      } else {collect(nd.left);collect(nd.right);}
    }
    collect(root);
    res.sort(function(a,b){return b.length-a.length;});
    return res;
  }

  function assignPositions(canvas){
    if(!_dd||!_words) return;
    var nd=_dd.nodes, root=_dd.root;
    var maxH=nd[root].height||1, W=canvas.width, gw=W-LW-RM;
    // leaf y
    _leafIds=leafOrder(nd,root);
    _leafIds.forEach(function(id,i){_nodeY[id]=i*STEP+STEP/2;});
    // internal y (bottom-up)
    (function dfsY(nid){
      var n=nd[nid]; if(n.label!==null) return;
      dfsY(n.left);dfsY(n.right);
      _nodeY[nid]=(_nodeY[n.left]+_nodeY[n.right])/2;
    })(root);
    // node x
    (function dfsX(nid){
      var n=nd[nid];
      _nodeX[nid]=LW+n.height/maxH*gw;
      if(n.left!==null){dfsX(n.left);dfsX(n.right);}
    })(root);
    canvas.height=_words.length*STEP+STEP;
  }

  function draw(canvas,ctx){
    if(!_dd||!_words) return;
    var nd=_dd.nodes, root=_dd.root;
    var maxH=nd[root].height||1;
    var W=canvas.width, H=canvas.height, gw=W-LW-RM;
    var cut=parseInt(document.getElementById('dend-cut').value)/100*maxH;
    var clusters=flatClusters(nd,root,cut);
    var leafCl={};
    clusters.forEach(function(cl,ci){cl.forEach(function(lid){leafCl[lid]=ci;});});

    ctx.fillStyle='#0d0d0d'; ctx.fillRect(0,0,W,H);

    // Cut line
    var cutX=LW+cut/maxH*gw;
    ctx.save(); ctx.strokeStyle='rgba(70,120,70,0.4)';
    ctx.lineWidth=1; ctx.setLineDash([3,4]);
    ctx.beginPath(); ctx.moveTo(cutX,0); ctx.lineTo(cutX,H); ctx.stroke();
    ctx.setLineDash([]); ctx.restore();

    // Edges (post-order)
    (function drawE(nid){
      var n=nd[nid]; if(n.label!==null) return;
      drawE(n.left); drawE(n.right);
      var xl=_nodeX[n.left],yl=_nodeY[n.left];
      var xr=_nodeX[n.right],yr=_nodeY[n.right];
      var xp=_nodeX[nid];
      var ci=leafCl[n.left]!==undefined?leafCl[n.left]:clusters.length-1;
      var col=PALETTE[ci%PALETTE.length]+'55';
      ctx.strokeStyle=col; ctx.lineWidth=1.2;
      ctx.beginPath(); ctx.moveTo(xl,yl); ctx.lineTo(xp,yl); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(xr,yr); ctx.lineTo(xp,yr); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(xp,yl); ctx.lineTo(xp,yr); ctx.stroke();
    })(root);

    // Leaf labels + dots
    ctx.font='9px monospace';
    _leafIds.forEach(function(lid,i){
      var ci=leafCl[lid]!==undefined?leafCl[lid]:0;
      var col=PALETTE[ci%PALETTE.length];
      var hl=i===_hovLeaf;
      var y=_nodeY[lid];
      if(hl){ctx.fillStyle='rgba(255,255,255,0.08)';ctx.fillRect(0,y-STEP/2+1,LW-2,STEP-2);}
      ctx.fillStyle=hl?'#eee':col+'aa';
      ctx.fillText(_words[lid],2,y+3);
      ctx.beginPath(); ctx.arc(LW,y,hl?3:1.5,0,Math.PI*2);
      ctx.fillStyle=hl?'#fff':col; ctx.fill();
    });

    // Stats
    var st=document.getElementById('dend-stats');
    if(st) st.textContent='кластеров: '+clusters.length
      +'  (отсечение '+cut.toFixed(4)+' / '+maxH.toFixed(4)+')';
    var cv=document.getElementById('dend-cut-val');
    if(cv) cv.textContent=cut.toFixed(4);
  }

  function build(canvas,ctx){
    var sigs=window.lexAllSigs?window.lexAllSigs():null;
    if(!sigs) return;
    _words=Object.keys(sigs);
    var n=_words.length, mat=[];
    for(var i=0;i<n;i++){
      mat.push([]);
      for(var j=0;j<n;j++)
        mat[i].push(i===j?0:(window.mDist?window.mDist(sigs[_words[i]],sigs[_words[j]]):NaN));
    }
    _dd=upgma(_words,mat);
    assignPositions(canvas);
    draw(canvas,ctx);
  }

  function initHover(canvas,ctx){
    canvas.addEventListener('mousemove',function(e){
      if(!_leafIds) return;
      var r=canvas.getBoundingClientRect();
      var my=(e.clientY-r.top)*(canvas.height/r.height);
      var best=-1,bestD=Infinity;
      _leafIds.forEach(function(lid,i){
        var d=Math.abs(_nodeY[lid]-my);
        if(d<bestD){bestD=d;best=i;}
      });
      var nh=bestD<STEP/2?best:-1;
      if(nh!==_hovLeaf){
        _hovLeaf=nh; draw(canvas,ctx);
        var info=document.getElementById('dend-info');
        if(info) info.textContent=nh!==-1?'▸ '+_words[_leafIds[nh]]:'  ';
      }
    });
    canvas.addEventListener('mouseleave',function(){
      _hovLeaf=-1; draw(canvas,ctx);
      var info=document.getElementById('dend-info');
      if(info) info.textContent=' ';
    });
  }

  setTimeout(function(){
    var canvas=document.getElementById('dend-canvas');
    var ctx=canvas.getContext('2d');
    initHover(canvas,ctx);
    document.getElementById('dend-cut').addEventListener('input',function(){
      draw(canvas,ctx);
    });
    build(canvas,ctx);
  },500);
})();
</script>
</div>
<div class="section">
<h2>Граф орбитального сходства Q6</h2>
<p class="meta">Слова — узлы · ребро если орбитальное расстояние &lt; порог · раскладка: Fruchterman-Reingold</p>
<div style="display:flex;gap:16px;align-items:center;margin-bottom:8px;flex-wrap:wrap">
  <label style="color:#555;font-size:12px;font-family:monospace">Порог:&nbsp;
    <input type="range" id="graph-thresh" min="0" max="45" value="10" step="1"
           style="vertical-align:middle;width:100px;accent-color:#4caf50">
    <span id="graph-thresh-val" style="font-family:monospace;color:#777;min-width:32px;display:inline-block">0.10</span>
  </label>
  <button id="graph-reset"
    style="background:#161616;color:#555;border:1px solid #2a2a2a;padding:3px 10px;
           cursor:pointer;font-family:monospace;font-size:11px">⟳ перезапуск</button>
  <span id="graph-stats" style="font-family:monospace;font-size:11px;color:#3a3a3a"></span>
</div>
<canvas id="graph-canvas" width="640" height="430"
  style="cursor:crosshair;display:block;border:1px solid #1a1a1a"></canvas>
<div id="graph-info"
  style="font-family:monospace;font-size:11px;color:#444;min-height:16px;margin-top:4px"> </div>
<script>
(function() {
  var W=640, H=430, MARGIN=44;
  var PALETTE=['#2196f3','#4caf50','#ff9800','#e91e63','#9c27b0',
               '#00bcd4','#8bc34a','#ff5722','#3f51b5','#009688'];
  var nodes=[], hoveredNode=-1;
  var _words=null, _sigs=null, _gd=null;

  function dist2(s1,s2){
    return window.mDist ? window.mDist(s1,s2) : NaN;
  }

  function buildGD(thresh) {
    var n=_words.length;
    var adj=_words.map(function(){return [];});
    var edgeList=[];
    for(var i=0;i<n;i++){
      for(var j=i+1;j<n;j++){
        var d=dist2(_sigs[_words[i]],_sigs[_words[j]]);
        if(!isNaN(d)&&d<thresh){
          adj[i].push(j); adj[j].push(i);
          edgeList.push({a:i,b:j,d:d});
        }
      }
    }
    var comp=new Array(n).fill(-1), nC=0;
    for(var s=0;s<n;s++){
      if(comp[s]!==-1) continue;
      var q=[s]; comp[s]=nC;
      while(q.length){
        var u=q.shift();
        adj[u].forEach(function(v){if(comp[v]===-1){comp[v]=nC;q.push(v);}});
      }
      nC++;
    }
    return {n:n,adj:adj,edges:edgeList,comp:comp,nComps:nC};
  }

  function placeCircle(n){
    nodes=[];
    for(var i=0;i<n;i++){
      var a=(i/n)*2*Math.PI;
      var r=Math.min(W-MARGIN*2,H-MARGIN*2)/2*0.65;
      nodes.push({x:W/2+r*Math.cos(a),y:H/2+r*Math.sin(a),vx:0,vy:0});
    }
  }

  function simulate(gd, steps){
    var n=gd.n;
    var k=Math.sqrt((W-MARGIN*2)*(H-MARGIN*2)/(n+1));
    var T=k*0.85;
    for(var step=0;step<steps;step++){
      T*=0.96;
      var dx=new Array(n).fill(0), dy=new Array(n).fill(0);
      for(var i=0;i<n;i++){
        for(var j=i+1;j<n;j++){
          var ddx=nodes[i].x-nodes[j].x, ddy=nodes[i].y-nodes[j].y;
          var dist=Math.sqrt(ddx*ddx+ddy*ddy)||0.1;
          var f=k*k/dist;
          dx[i]+=f*ddx/dist; dy[i]+=f*ddy/dist;
          dx[j]-=f*ddx/dist; dy[j]-=f*ddy/dist;
        }
      }
      gd.edges.forEach(function(e){
        var ddx=nodes[e.a].x-nodes[e.b].x, ddy=nodes[e.a].y-nodes[e.b].y;
        var dist=Math.sqrt(ddx*ddx+ddy*ddy)||0.1;
        var f=dist*dist/k;
        dx[e.a]-=f*ddx/dist; dy[e.a]-=f*ddy/dist;
        dx[e.b]+=f*ddx/dist; dy[e.b]+=f*ddy/dist;
      });
      for(var i=0;i<n;i++){
        dx[i]+=0.07*(W/2-nodes[i].x);
        dy[i]+=0.07*(H/2-nodes[i].y);
      }
      for(var i=0;i<n;i++){
        var len=Math.sqrt(dx[i]*dx[i]+dy[i]*dy[i])||0.1;
        var disp=Math.min(len,T);
        nodes[i].x+=dx[i]/len*disp; nodes[i].y+=dy[i]/len*disp;
        nodes[i].x=Math.max(MARGIN,Math.min(W-MARGIN,nodes[i].x));
        nodes[i].y=Math.max(MARGIN,Math.min(H-MARGIN,nodes[i].y));
      }
    }
  }

  function draw(ctx, gd){
    ctx.clearRect(0,0,W,H);
    ctx.fillStyle='#0d0d0d'; ctx.fillRect(0,0,W,H);
    if(!gd) return;
    // Edges
    gd.edges.forEach(function(e){
      var ni=nodes[e.a], nj=nodes[e.b];
      var hl=hoveredNode!==-1&&(e.a===hoveredNode||e.b===hoveredNode);
      var col=PALETTE[gd.comp[e.a]%PALETTE.length];
      ctx.strokeStyle=hl?col+'cc':'rgba(40,65,40,0.45)';
      ctx.lineWidth=hl?1.5:0.6;
      ctx.beginPath(); ctx.moveTo(ni.x,ni.y); ctx.lineTo(nj.x,nj.y); ctx.stroke();
    });
    // Nodes
    for(var i=0;i<_words.length;i++){
      var nd=nodes[i];
      var hl=i===hoveredNode;
      var isNb=hoveredNode!==-1&&gd.adj[hoveredNode].indexOf(i)!==-1;
      var col=PALETTE[gd.comp[i]%PALETTE.length];
      ctx.beginPath();
      ctx.arc(nd.x,nd.y,hl?6:isNb?4.5:3,0,Math.PI*2);
      ctx.fillStyle=hl?'#fff':isNb?col:col+'55';
      ctx.fill();
      // Label
      ctx.font=(hl?'bold ':'')+((hl||isNb)?'9':'7')+'px monospace';
      ctx.fillStyle=hl?'#fff':isNb?col:col+'88';
      ctx.fillText(_words[i], nd.x+6, nd.y+3);
    }
  }

  function rebuild(){
    var sigs=window.lexAllSigs?window.lexAllSigs():null;
    if(!sigs) return;
    _sigs=sigs; _words=Object.keys(sigs);
    var thresh=parseInt(document.getElementById('graph-thresh').value)/100;
    document.getElementById('graph-thresh-val').textContent=thresh.toFixed(2);
    placeCircle(_words.length);
    _gd=buildGD(thresh);
    var canvas=document.getElementById('graph-canvas');
    var ctx=canvas.getContext('2d');
    simulate(_gd,300);
    draw(ctx,_gd);
    var st=document.getElementById('graph-stats');
    if(st) st.textContent='узлов: '+_gd.n+'  рёбер: '+_gd.edges.length+'  компонент: '+_gd.nComps;
  }

  function initHover(canvas,ctx){
    canvas.addEventListener('mousemove',function(e){
      if(!_words||!_gd) return;
      var r=canvas.getBoundingClientRect();
      var mx=(e.clientX-r.left)*(W/r.width), my=(e.clientY-r.top)*(H/r.height);
      var best=-1,bestD=Infinity;
      nodes.forEach(function(nd,i){
        var d=Math.hypot(nd.x-mx,nd.y-my);
        if(d<bestD){bestD=d;best=i;}
      });
      var nh=bestD<18?best:-1;
      if(nh!==hoveredNode){
        hoveredNode=nh; draw(ctx,_gd);
        var info=document.getElementById('graph-info');
        if(info){
          if(hoveredNode!==-1){
            var nb=_gd.adj[hoveredNode];
            var nbs=nb.map(function(i){return _words[i];}).join('  ');
            info.textContent=_words[hoveredNode]+'  ('+nb.length+' связей)'+(nbs?' → '+nbs:'  (изолирована)');
          } else { info.textContent=' '; }
        }
      }
    });
    canvas.addEventListener('mouseleave',function(){
      hoveredNode=-1; if(_gd) draw(ctx,_gd);
      var info=document.getElementById('graph-info');
      if(info) info.textContent=' ';
    });
  }

  setTimeout(function(){
    var canvas=document.getElementById('graph-canvas');
    var ctx=canvas.getContext('2d');
    if(!canvas||!ctx) return;
    initHover(canvas,ctx);
    document.getElementById('graph-thresh').addEventListener('input',rebuild);
    document.getElementById('graph-reset').addEventListener('click',rebuild);
    rebuild();
  },400);
})();
</script>
</div>
<div class="section">
<h2>MDS-карта орбитального пространства Q6</h2>
<p class="meta" id="mds-meta">Классическое MDS · 2D-вложение матрицы орбитальных расстояний · hover = ближайшие соседи</p>
<div style="display:flex;gap:16px;align-items:center;margin-bottom:8px;flex-wrap:wrap">
  <label style="color:#555;font-size:12px;font-family:monospace">Отсечение цветов:&nbsp;
    <input type="range" id="mds-cut" min="0" max="100" value="5" step="1"
      style="vertical-align:middle;width:110px;accent-color:#4caf50">
    <span id="mds-cut-val" style="font-family:monospace;color:#777;min-width:44px;display:inline-block">auto</span>
  </label>
  <span id="mds-cluster-count" style="font-family:monospace;font-size:11px;color:#3a3a3a"></span>
</div>
<canvas id="mds-canvas" width="700" height="460"
  style="display:block;border:1px solid #1a1a1a;cursor:crosshair"></canvas>
<div id="mds-info"
  style="font-family:monospace;font-size:11px;color:#444;min-height:16px;margin-top:4px"> </div>
<script>
(function(){
  var PALETTE=['#2196f3','#4caf50','#ff9800','#e91e63','#9c27b0',
               '#00bcd4','#8bc34a','#ff5722','#3f51b5','#009688'];
  var ML=14, MR=14, MT=20, MB=20;
  var _words=null, _coords=null, _dmat=null, _stress=null, _hovIdx=-1;

  // ── Tiny UPGMA (flat-clusters only) ──────────────────────────────────────
  function upgma(words, mat){
    var n=words.length, nodes={}, dm={};
    function key(a,b){return a<b?a+','+b:b+','+a;}
    for(var i=0;i<n;i++) nodes[i]={height:0,left:null,right:null,size:1,label:words[i]};
    var active=new Set();
    for(var i=0;i<n;i++) active.add(i);
    for(var i=0;i<n;i++) for(var j=i+1;j<n;j++) dm[key(i,j)]=mat[i][j];
    var nx=n;
    while(active.size>1){
      var minD=Infinity,minI=-1,minJ=-1,arr=Array.from(active);
      for(var a=0;a<arr.length;a++) for(var b=a+1;b<arr.length;b++){
        var d=dm[key(arr[a],arr[b])];
        if(d<minD){minD=d;minI=arr[a];minJ=arr[b];}
      }
      var si=nodes[minI].size,sj=nodes[minJ].size,nid=nx++;
      nodes[nid]={height:minD,left:minI,right:minJ,size:si+sj,label:null};
      active.delete(minI);active.delete(minJ);
      active.forEach(function(k){
        var dki=dm[key(k,minI)]||0,dkj=dm[key(k,minJ)]||0;
        dm[key(k,nid)]=(dki*si+dkj*sj)/(si+sj);
      });
      active.add(nid);
    }
    return{nodes:nodes,root:Array.from(active)[0]};
  }

  function flatClusters(nodes,root,cut){
    var res=[];
    function collect(nid){
      var nd=nodes[nid];
      if(nd.label!==null){res.push([nid]);return;}
      if(nd.height<=cut){
        var lv=[];
        (function L(s){var sn=nodes[s];if(sn.label!==null){lv.push(s);return;}L(sn.left);L(sn.right);})(nid);
        res.push(lv);
      } else {collect(nd.left);collect(nd.right);}
    }
    collect(root);
    res.sort(function(a,b){return b.length-a.length;});
    return res;
  }

  // ── Classical MDS (power iteration) ──────────────────────────────────────
  function classicalMds(n, dmat){
    var D2=dmat.map(function(r){return r.map(function(d){return d*d;});});
    var rm=D2.map(function(r){return r.reduce(function(s,x){return s+x;},0)/n;});
    var cm=Array.from({length:n},function(_,j){return D2.reduce(function(s,r){return s+r[j];},0)/n;});
    var gm=cm.reduce(function(s,x){return s+x;},0)/n;
    var B=D2.map(function(r,i){return r.map(function(d,j){return -0.5*(d-rm[i]-cm[j]+gm);});});
    function mv(M,v){return M.map(function(r){return r.reduce(function(s,x,k){return s+x*v[k];},0);});}
    function dot(a,b){return a.reduce(function(s,x,i){return s+x*b[i];},0);}
    function norm(v){return Math.sqrt(dot(v,v));}
    var coords=[],rem=B.map(function(r){return r.slice();});
    for(var d=0;d<2;d++){
      var v=Array.from({length:n},function(_,i){return i%2===0?1:-1;});
      var nv=norm(v); v=v.map(function(x){return x/nv;});
      var prevL=Infinity;
      for(var it=0;it<200;it++){
        var w=mv(rem,v),nw=norm(w);
        if(nw<1e-14) break;
        v=w.map(function(x){return x/nw;});
        var lam=dot(mv(rem,v),v);
        if(Math.abs(lam-prevL)<1e-12*(Math.abs(lam)+1e-12)) break;
        prevL=lam;
      }
      var lam=dot(mv(rem,v),v);
      var sc=Math.sqrt(Math.max(0,lam));
      coords.push(v.map(function(x){return x*sc;}));
      for(var i=0;i<n;i++) for(var j=0;j<n;j++) rem[i][j]-=lam*v[i]*v[j];
    }
    return Array.from({length:n},function(_,i){return [coords[0][i],coords[1][i]];});
  }

  function kruskalStress(dmat,coords){
    var n=coords.length,num=0,den=0;
    for(var i=0;i<n;i++) for(var j=i+1;j<n;j++){
      var do_=dmat[i][j];
      var dm_=Math.sqrt((coords[i][0]-coords[j][0])**2+(coords[i][1]-coords[j][1])**2);
      num+=(do_-dm_)**2; den+=do_*do_;
    }
    return den>1e-14?Math.sqrt(num/den):0;
  }

  // ── Layout helpers ────────────────────────────────────────────────────────
  function toCanvas(c,W,H,xmin,xmax,ymin,ymax){
    var pad=28;
    var cx=ML+pad+(c[0]-xmin)/(xmax-xmin||1)*(W-ML-MR-2*pad);
    var cy=MT+pad+(ymax-c[1])/(ymax-ymin||1)*(H-MT-MB-2*pad);
    return[cx,cy];
  }

  function nearestK(idx,k){
    var dists=_words.map(function(_,j){return{j:j,d:_dmat[idx][j]};});
    dists.sort(function(a,b){return a.d-b.d;});
    return dists.slice(1,k+1);
  }

  // ── Draw ──────────────────────────────────────────────────────────────────
  function draw(canvas,ctx){
    if(!_coords||!_words) return;
    var W=canvas.width, H=canvas.height;
    var n=_words.length;
    var cut=parseInt(document.getElementById('mds-cut').value)/100*
            (_dmat?Math.max(..._dmat.map(function(r){return Math.max(...r);})):1);
    var dd=upgma(_words,_dmat);
    var clusters=flatClusters(dd.nodes,dd.root,cut);
    var leafCl={};
    clusters.forEach(function(cl,ci){cl.forEach(function(lid){leafCl[lid]=ci;});});

    var xs=_coords.map(function(c){return c[0];}),
        ys=_coords.map(function(c){return c[1];});
    var xmin=Math.min(...xs),xmax=Math.max(...xs);
    var ymin=Math.min(...ys),ymax=Math.max(...ys);

    ctx.fillStyle='#0d0d0d'; ctx.fillRect(0,0,W,H);

    // Nearest-neighbor lines for hovered word
    if(_hovIdx>=0){
      var nb=nearestK(_hovIdx,4);
      var p0=toCanvas(_coords[_hovIdx],W,H,xmin,xmax,ymin,ymax);
      nb.forEach(function(nb_){
        var p1=toCanvas(_coords[nb_.j],W,H,xmin,xmax,ymin,ymax);
        ctx.strokeStyle='rgba(255,255,255,0.18)'; ctx.lineWidth=1;
        ctx.setLineDash([3,5]);
        ctx.beginPath(); ctx.moveTo(p0[0],p0[1]); ctx.lineTo(p1[0],p1[1]); ctx.stroke();
        ctx.setLineDash([]);
      });
    }

    // Dots + labels
    ctx.font='9px monospace';
    _words.forEach(function(w,i){
      var ci=leafCl[i]!==undefined?leafCl[i]:0;
      var col=PALETTE[ci%PALETTE.length];
      var p=toCanvas(_coords[i],W,H,xmin,xmax,ymin,ymax);
      var hl=i===_hovIdx;
      var r=hl?5:3;
      // Glow for hovered
      if(hl){
        ctx.beginPath(); ctx.arc(p[0],p[1],9,0,Math.PI*2);
        ctx.fillStyle=col+'22'; ctx.fill();
      }
      ctx.beginPath(); ctx.arc(p[0],p[1],r,0,Math.PI*2);
      ctx.fillStyle=hl?'#ffffff':col; ctx.fill();
      // Label
      var lx=p[0]+6, ly=p[1]-4;
      if(lx+w.length*6>W-MR) lx=p[0]-w.length*6-4;
      ctx.fillStyle=hl?'#fff':col+'cc';
      ctx.fillText(w,lx,ly);
    });

    // Stress badge
    if(_stress!==null){
      var sl=_stress<=0.05?'отлично':_stress<=0.1?'хорошо':_stress<=0.2?'приемлемо':'слабо';
      ctx.font='10px monospace';
      ctx.fillStyle='#333'; ctx.fillText('stress '+_stress.toFixed(4)+' ('+sl+')',W-150,H-6);
    }

    // Stats
    var cc=document.getElementById('mds-cluster-count');
    if(cc) cc.textContent='кластеров: '+clusters.length
      +'  (отсечение '+cut.toFixed(4)+')';
    var cv=document.getElementById('mds-cut-val');
    if(cv) cv.textContent=cut.toFixed(4);
  }

  // ── Init ──────────────────────────────────────────────────────────────────
  function initHover(canvas,ctx){
    canvas.addEventListener('mousemove',function(e){
      if(!_coords) return;
      var r=canvas.getBoundingClientRect();
      var mx=(e.clientX-r.left)*(canvas.width/r.width);
      var my=(e.clientY-r.top)*(canvas.height/r.height);
      var W=canvas.width, H=canvas.height;
      var xs=_coords.map(function(c){return c[0];}),
          ys=_coords.map(function(c){return c[1];});
      var xmin=Math.min(...xs),xmax=Math.max(...xs);
      var ymin=Math.min(...ys),ymax=Math.max(...ys);
      var best=-1,bestD=Infinity;
      _coords.forEach(function(c,i){
        var p=toCanvas(c,W,H,xmin,xmax,ymin,ymax);
        var d=(p[0]-mx)**2+(p[1]-my)**2;
        if(d<bestD){bestD=d;best=i;}
      });
      var nh=bestD<400?best:-1;
      if(nh!==_hovIdx){
        _hovIdx=nh; draw(canvas,ctx);
        var info=document.getElementById('mds-info');
        if(info){
          if(nh>=0){
            var nb=nearestK(nh,4);
            var nbs=nb.map(function(x){return _words[x.j]+'('+x.d.toFixed(3)+')';}).join('  ');
            info.textContent='▸ '+_words[nh]+'  →  '+nbs;
          } else { info.textContent=' '; }
        }
      }
    });
    canvas.addEventListener('mouseleave',function(){
      _hovIdx=-1; draw(canvas,ctx);
      var info=document.getElementById('mds-info'); if(info) info.textContent=' ';
    });
  }

  function build(canvas,ctx){
    var sigs=window.lexAllSigs?window.lexAllSigs():null;
    if(!sigs) return;
    _words=Object.keys(sigs);
    var n=_words.length;
    _dmat=Array.from({length:n},function(_,i){
      return Array.from({length:n},function(_,j){
        return i===j?0:(window.mDist?window.mDist(sigs[_words[i]],sigs[_words[j]]):NaN);
      });
    });
    _coords=classicalMds(n,_dmat);
    _stress=kruskalStress(_dmat,_coords);
    draw(canvas,ctx);
  }

  window.classicalMds  = classicalMds;
  window.kruskalStress = kruskalStress;

  setTimeout(function(){
    var canvas=document.getElementById('mds-canvas');
    var ctx=canvas.getContext('2d');
    initHover(canvas,ctx);
    document.getElementById('mds-cut').addEventListener('input',function(){
      draw(canvas,ctx);
    });
    build(canvas,ctx);
  },700);
})();
</script>
</div>
<div class="section">
<h2>Анализ CA-правил Q6</h2>
<p class="meta">Матрица расстояний и MDS по каждому правилу отдельно · hover = слово во всех 4 квадрантах · цвет = период</p>
<canvas id="rules-canvas" width="700" height="600"
  style="display:block;border:1px solid #1a1a1a;cursor:crosshair"></canvas>
<div id="rules-info"
  style="font-family:monospace;font-size:11px;color:#444;min-height:16px;margin-top:4px"> </div>
<script>
(function(){
  var RULES=['xor','xor3','and','or'];
  var RLBL ={xor:'XOR',xor3:'XOR3',and:'AND',or:'OR'};
  var LCOL ={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
  var PCOL =['#4caf50','#2196f3','#ff9800','#e91e63','#9c27b0'];
  var QW=350, QH=300, HDR=28, PAD=18;
  var _words=null, _sigs=null, _rd={}, _hovIdx=-1;

  // ── Math ───────────────────────────────────────────────────────────────
  function cmds(n,dmat){
    var D2=dmat.map(function(r){return r.map(function(d){return d*d;});});
    var rm=D2.map(function(r){return r.reduce(function(s,x){return s+x;},0)/n;});
    var cm=Array.from({length:n},function(_,j){return D2.reduce(function(s,r){return s+r[j];},0)/n;});
    var gm=cm.reduce(function(s,x){return s+x;},0)/n;
    var B=D2.map(function(r,i){return r.map(function(d,j){return -0.5*(d-rm[i]-cm[j]+gm);});});
    function mv(M,v){return M.map(function(r){return r.reduce(function(s,x,k){return s+x*v[k];},0);});}
    function dot(a,b){return a.reduce(function(s,x,i){return s+x*b[i];},0);}
    var coords=[],rem=B.map(function(r){return r.slice();});
    for(var d=0;d<2;d++){
      var v=Array.from({length:n},function(_,i){return i%2===0?1:-1;});
      var nv=Math.sqrt(dot(v,v)); v=v.map(function(x){return x/nv;});
      var pl=Infinity;
      for(var it=0;it<200;it++){
        var w=mv(rem,v),nw=Math.sqrt(dot(w,w));
        if(nw<1e-14)break; v=w.map(function(x){return x/nw;});
        var lam=dot(mv(rem,v),v);
        if(Math.abs(lam-pl)<1e-12*(Math.abs(lam)+1e-12))break; pl=lam;
      }
      var lam=dot(mv(rem,v),v),sc=Math.sqrt(Math.max(0,lam));
      coords.push(v.map(function(x){return x*sc;}));
      for(var i=0;i<n;i++) for(var j=0;j<n;j++) rem[i][j]-=lam*v[i]*v[j];
    }
    return Array.from({length:n},function(_,i){return [coords[0][i],coords[1][i]];});
  }

  function stress(dmat,c){
    var n=c.length,num=0,den=0;
    for(var i=0;i<n;i++) for(var j=i+1;j<n;j++){
      var d0=dmat[i][j],dm=Math.sqrt((c[i][0]-c[j][0])**2+(c[i][1]-c[j][1])**2);
      num+=(d0-dm)**2; den+=d0*d0;
    }
    return den>1e-14?Math.sqrt(num/den):0;
  }

  function entropy(vals){
    var cnt={},n=0;
    vals.forEach(function(v){if(v!==null){cnt[v]=(cnt[v]||0)+1;n++;}});
    if(!n) return 0;
    return -Object.values(cnt).reduce(function(H,c){var p=c/n;return H+p*Math.log2(p);},0);
  }

  // ── Build per-rule data ────────────────────────────────────────────────
  function buildAll(sigs){
    _words=Object.keys(sigs); _sigs=sigs;
    var n=_words.length;
    RULES.forEach(function(rule){
      var periods=_words.map(function(w){var s=sigs[w][rule];return s?s.period:null;});
      var dmat=Array.from({length:n},function(_,i){
        return Array.from({length:n},function(_,j){
          if(i===j) return 0;
          var p1=periods[i],p2=periods[j];
          if(p1===null||p2===null) return 0;
          return Math.abs(p1-p2)/Math.max(p1,p2,1);
        });
      });
      var raw=cmds(n,dmat);
      var degen=raw.every(function(c){return Math.abs(c[0])<1e-9&&Math.abs(c[1])<1e-9;});
      var coords=degen?raw.map(function(_,i){
        return[0.22*Math.cos(2*Math.PI*i/n),0.22*Math.sin(2*Math.PI*i/n)];
      }):raw;
      var ups=Array.from(new Set(periods.filter(function(p){return p!==null;}))).sort(function(a,b){return a-b;});
      var pmap={}; ups.forEach(function(p,i){pmap[p]=PCOL[i%PCOL.length];});
      _rd[rule]={periods:periods,coords:coords,dmat:dmat,degen:degen,
                 ups:ups,pmap:pmap,entropy:entropy(periods),stress:stress(dmat,raw)};
    });
  }

  // ── Draw ──────────────────────────────────────────────────────────────
  function drawAll(canvas,ctx){
    if(!_words) return;
    var n=_words.length;
    ctx.fillStyle='#0d0d0d'; ctx.fillRect(0,0,canvas.width,canvas.height);
    RULES.forEach(function(rule,ri){
      var qx=(ri%2)*QW, qy=Math.floor(ri/2)*QH;
      var rd=_rd[rule];
      // Border
      ctx.strokeStyle=LCOL[rule]+'44'; ctx.lineWidth=1;
      ctx.strokeRect(qx+0.5,qy+0.5,QW-1,QH-1);
      // Header bg
      ctx.fillStyle=LCOL[rule]+'18';
      ctx.fillRect(qx,qy,QW,HDR);
      // Header text
      ctx.fillStyle=LCOL[rule]; ctx.font='bold 11px monospace';
      var htext=RLBL[rule]+'  H='+rd.entropy.toFixed(3)+'  '
        +(rd.degen?'P=1 для всех (нет дискриминации)':rd.ups.map(function(p){return 'P='+p;}).join('/'));
      ctx.fillText(htext, qx+8, qy+17);
      // Stress
      if(!rd.degen){
        ctx.fillStyle='#444'; ctx.font='9px monospace';
        ctx.fillText('stress '+rd.stress.toFixed(3),qx+QW-75,qy+17);
      }
      // Separator
      ctx.strokeStyle=LCOL[rule]+'33'; ctx.lineWidth=1;
      ctx.beginPath(); ctx.moveTo(qx,qy+HDR); ctx.lineTo(qx+QW,qy+HDR); ctx.stroke();
      // Plot coords
      var xs=rd.coords.map(function(c){return c[0];}),
          ys=rd.coords.map(function(c){return c[1];});
      var x0=Math.min.apply(null,xs),x1=Math.max.apply(null,xs);
      var y0=Math.min.apply(null,ys),y1=Math.max.apply(null,ys);
      var pw=QW-2*PAD, ph=QH-HDR-2*PAD;
      function px(x){return qx+PAD+(x-x0)/(x1-x0||1)*pw;}
      function py(y){return qy+HDR+PAD+(y1-y)/(y1-y0||1)*ph;}
      // Hover lines
      if(_hovIdx>=0){
        var hx=px(rd.coords[_hovIdx][0]),hy=py(rd.coords[_hovIdx][1]);
        ctx.strokeStyle='rgba(255,255,255,0.12)'; ctx.lineWidth=1;
        ctx.setLineDash([3,5]);
        for(var k=0;k<n;k++){
          if(k===_hovIdx) continue;
          ctx.beginPath(); ctx.moveTo(hx,hy);
          ctx.lineTo(px(rd.coords[k][0]),py(rd.coords[k][1])); ctx.stroke();
        }
        ctx.setLineDash([]);
      }
      // Dots
      ctx.font='8px monospace';
      rd.coords.forEach(function(c,i){
        var col=rd.pmap[rd.periods[i]]||'#888';
        var hl=i===_hovIdx;
        var cx=px(c[0]),cy=py(c[1]),r=hl?5:2.5;
        if(hl){
          ctx.beginPath(); ctx.arc(cx,cy,9,0,Math.PI*2);
          ctx.fillStyle=col+'22'; ctx.fill();
        }
        ctx.beginPath(); ctx.arc(cx,cy,r,0,Math.PI*2);
        ctx.fillStyle=hl?'#fff':col+(hl?'':'bb'); ctx.fill();
        if(hl){
          ctx.fillStyle='#fff'; ctx.font='9px monospace';
          var lx=cx+7,ly=cy-3;
          if(lx+_words[i].length*5>qx+QW-4) lx=cx-_words[i].length*5-5;
          ctx.fillText(_words[i],lx,ly);
        }
      });
    });
  }

  // ── Hover ─────────────────────────────────────────────────────────────
  function initHover(canvas,ctx){
    canvas.addEventListener('mousemove',function(e){
      if(!_words) return;
      var r=canvas.getBoundingClientRect();
      var mx=(e.clientX-r.left)*(canvas.width/r.width);
      var my=(e.clientY-r.top)*(canvas.height/r.height);
      var ri=Math.floor(mx/QW),rj=Math.floor(my/QH);
      if(ri<0||ri>1||rj<0||rj>1){if(_hovIdx!==-1){_hovIdx=-1;drawAll(canvas,ctx);}return;}
      var rule=RULES[rj*2+ri], rd=_rd[rule];
      if(!rd) return;
      var qx=ri*QW, qy=rj*QH, n=_words.length;
      var xs=rd.coords.map(function(c){return c[0];}),
          ys=rd.coords.map(function(c){return c[1];});
      var x0=Math.min.apply(null,xs),x1=Math.max.apply(null,xs);
      var y0=Math.min.apply(null,ys),y1=Math.max.apply(null,ys);
      var pw=QW-2*PAD, ph=QH-HDR-2*PAD;
      function px(x){return qx+PAD+(x-x0)/(x1-x0||1)*pw;}
      function py(y){return qy+HDR+PAD+(y1-y)/(y1-y0||1)*ph;}
      var best=-1,bestD=Infinity;
      rd.coords.forEach(function(c,i){
        var d=(px(c[0])-mx)**2+(py(c[1])-my)**2;
        if(d<bestD){bestD=d;best=i;}
      });
      var nh=bestD<400?best:-1;
      if(nh!==_hovIdx){
        _hovIdx=nh; drawAll(canvas,ctx);
        var info=document.getElementById('rules-info');
        if(info){
          if(nh>=0){
            var w=_words[nh];
            var parts=RULES.map(function(r){
              var p=_rd[r].periods[nh];
              return RLBL[r]+'='+p;
            }).join('  ');
            info.textContent='▸ '+w+'  |  '+parts;
          } else { info.textContent=' '; }
        }
      }
    });
    canvas.addEventListener('mouseleave',function(){
      _hovIdx=-1; drawAll(canvas,ctx);
      var info=document.getElementById('rules-info');
      if(info) info.textContent=' ';
    });
  }

  setTimeout(function(){
    var canvas=document.getElementById('rules-canvas');
    var ctx=canvas.getContext('2d');
    initHover(canvas,ctx);
    var sigs=window.lexAllSigs?window.lexAllSigs():null;
    if(sigs){buildAll(sigs);drawAll(canvas,ctx);}
  },800);
})();
</script>
</div>
<div class="section">
<h2>Транзиентный анализ Q6 — 13 классов</h2>
<p class="meta">Позиция = (AND транзиент × OR транзиент) · цвет = XOR транзиент (синий=2 / оранжевый=8) · hover = подробности</p>
<canvas id="trans-canvas" width="700" height="430"
  style="display:block;border:1px solid #1a1a1a;cursor:crosshair"></canvas>
<div id="trans-info"
  style="font-family:monospace;font-size:11px;color:#444;min-height:16px;margin-top:4px"> </div>
<script>
(function(){
  var AND_T=[1,2,3,4,7], OR_T=[7,6,4,3,2,1]; // grid axes (or_t top→bottom)
  var LM=50, TM=52, RM=10, BM=32;
  var CW=null, CH=null; // computed in build
  var BLUE='#2196f3', ORANGE='#ff9800';
  var _words=null, _entries=null, _hovIdx=-1, _dotPos=[];

  function xorCol(xt){return xt===2?BLUE:ORANGE;}

  function build(sigs){
    _words=Object.keys(sigs);
    _entries=_words.map(function(w){
      var s=sigs[w];
      return{
        word:w,
        xor_t:s.xor?s.xor.transient:null,
        and_t:s.and?s.and.transient:null, and_p:s.and?s.and.period:null,
        or_t :s.or ?s.or.transient :null, or_p :s.or ?s.or.period :null,
        xor3_p:s.xor3?s.xor3.period:null,
      };
    });
  }

  function draw(canvas,ctx){
    if(!_entries) return;
    var W=canvas.width, H=canvas.height;
    var gridW=W-LM-RM, gridH=H-TM-BM;
    CW=gridW/AND_T.length; CH=gridH/OR_T.length;
    ctx.fillStyle='#0d0d0d'; ctx.fillRect(0,0,W,H);

    // Grid lines
    ctx.strokeStyle='#222'; ctx.lineWidth=0.5;
    for(var ci=0;ci<=AND_T.length;ci++){
      var gx=LM+ci*CW;
      ctx.beginPath(); ctx.moveTo(gx,TM); ctx.lineTo(gx,TM+gridH); ctx.stroke();
    }
    for(var ri=0;ri<=OR_T.length;ri++){
      var gy=TM+ri*CH;
      ctx.beginPath(); ctx.moveTo(LM,gy); ctx.lineTo(LM+gridW,gy); ctx.stroke();
    }

    // Axis labels
    ctx.fillStyle='#555'; ctx.font='10px monospace';
    ctx.fillText('AND транзиент →',LM,TM-36);
    AND_T.forEach(function(v,ci){
      ctx.fillStyle='#888'; ctx.font='10px monospace';
      ctx.textAlign='center';
      ctx.fillText('t='+v, LM+ci*CW+CW/2, TM-20);
    });
    ctx.textAlign='left';
    ctx.fillStyle='#555'; ctx.font='10px monospace';
    ctx.fillText('OR',4,TM+gridH/2);
    ctx.fillText('транз',2,TM+gridH/2+12);
    ctx.fillText('↑',18,TM+12);
    OR_T.forEach(function(v,ri){
      ctx.fillStyle='#888'; ctx.font='9px monospace';
      ctx.textAlign='right';
      ctx.fillText('t='+v, LM-4, TM+ri*CH+CH/2+4);
    });
    ctx.textAlign='left';

    // Structural note
    ctx.fillStyle='#444'; ctx.font='9px monospace';
    ctx.fillText('XOR транзиент ≡ XOR3 период  (синий=2, оранжевый=8)',LM,H-8);

    // Group cells by (and_t, or_t), then arrange words
    var cellWords={};
    _entries.forEach(function(e){
      if(e.and_t===null||e.or_t===null) return;
      var k=e.and_t+','+e.or_t;
      (cellWords[k]=cellWords[k]||[]).push(e);
    });

    _dotPos=[];
    Object.keys(cellWords).forEach(function(k){
      var ws=cellWords[k]; if(!ws.length) return;
      var parts=k.split(',');
      var at=parseInt(parts[0]),ot=parseInt(parts[1]);
      var ci=AND_T.indexOf(at), ri=OR_T.indexOf(ot);
      if(ci<0||ri<0) return;
      var cx=LM+ci*CW, cy=TM+ri*CH;
      var pw=CW-6, ph=CH-10;
      // Cell background tint
      var allXt=ws[0].xor_t; var mixed=ws.some(function(e){return e.xor_t!==allXt;});
      var bgCol=mixed?'#88888820':(allXt===2?BLUE+'18':ORANGE+'18');
      ctx.fillStyle=bgCol; ctx.fillRect(cx+1,cy+1,CW-2,CH-2);

      // Arrange words
      var perRow=Math.max(1,Math.floor(pw/27));
      var rowH=Math.min(11, Math.floor(ph/Math.ceil(ws.length/perRow)));
      ws.forEach(function(e,i){
        var col=xorCol(e.xor_t);
        var r=Math.floor(i/perRow), c=i%perRow;
        var wx=cx+4+c*27, wy=cy+11+r*rowH;
        var hl=(_words?_words.indexOf(e.word):i)===_hovIdx;
        if(hl){
          ctx.fillStyle=col+'33';
          ctx.fillRect(wx-1,wy-8,26,10);
        }
        ctx.fillStyle=hl?'#fff':col;
        ctx.font=(hl?'bold ':'')+'8px monospace';
        var abbr=e.word.substring(0,4);
        ctx.fillText(abbr,wx,wy);
        // Store dot position
        _dotPos.push({idx:_words?_words.indexOf(e.word):i, cx:wx+12, cy:wy-4, e:e});
      });
    });
  }

  function initHover(canvas,ctx){
    canvas.addEventListener('mousemove',function(ev){
      if(!_entries||!_dotPos.length) return;
      var r=canvas.getBoundingClientRect();
      var mx=(ev.clientX-r.left)*(canvas.width/r.width);
      var my=(ev.clientY-r.top)*(canvas.height/r.height);
      var best=-1,bestD=Infinity;
      _dotPos.forEach(function(dp){
        var d=(dp.cx-mx)**2+(dp.cy-my)**2;
        if(d<bestD){bestD=d;best=dp.idx;}
      });
      var nh=bestD<200?best:-1;
      if(nh!==_hovIdx){
        _hovIdx=nh; draw(canvas,ctx);
        var info=document.getElementById('trans-info');
        if(info){
          if(nh>=0){
            var e=_entries[nh];
            info.textContent='▸ '+e.word
              +'  xor_t='+e.xor_t+'  xor3_p='+e.xor3_p
              +'  and=(t='+e.and_t+',p='+e.and_p+')'
              +'  or=(t='+e.or_t+',p='+e.or_p+')';
          } else { info.textContent=' '; }
        }
      }
    });
    canvas.addEventListener('mouseleave',function(){
      _hovIdx=-1; draw(canvas,ctx);
      var info=document.getElementById('trans-info'); if(info) info.textContent=' ';
    });
  }

  setTimeout(function(){
    var canvas=document.getElementById('trans-canvas');
    var ctx=canvas.getContext('2d');
    initHover(canvas,ctx);
    var sigs=window.lexAllSigs?window.lexAllSigs():null;
    if(sigs){build(sigs);draw(canvas,ctx);}
  },900);
})();
</script>
</div>
<div class="section">
<h2>Траектория CA Q6 — тепловая карта</h2>
<p class="meta">Слово → начальные условия → транзиент (оранжевый) + аттрактор (синий) · цвет клетки = Q6-значение (0→тёмно-синий, 63→жёлтый)</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="traj-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <span style="color:#333;font-size:13px">или</span>
  <input id="traj-custom" type="text" placeholder="своё слово…"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;
           font-size:13px;width:120px;text-transform:uppercase"/>
  <select id="traj-rule"
    style="background:#111;color:#4fc3f7;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor3">XOR3</option>
    <option value="xor">XOR ⊕</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <button id="traj-btn"
    style="background:#1e3a2a;color:#80deea;border:1px solid #2a6a4a;
           padding:5px 14px;cursor:pointer;font-size:13px">Показать</button>
  <label style="color:#444;font-size:12px">
    <input type="checkbox" id="traj-all-rules"/> Все 4 правила
  </label>
</div>
<canvas id="traj-canvas" width="700" height="200"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="traj-info"
  style="font-family:monospace;font-size:11px;color:#555;min-height:16px;margin-top:5px"> </div>
<script>
(function(){
  // ── Q6 → viridis-like HSL colour ──────────────────────────────────────────
  function q6Color(v) {
    var t = v / 63;
    var hue = Math.round(220 - t * 160);   // 220° (blue) → 60° (yellow)
    var lig = Math.round(15 + t * 55);     // 15% (dark) → 70% (bright)
    return 'hsl(' + hue + ',72%,' + lig + '%)';
  }

  // ── Shannon entropy ────────────────────────────────────────────────────────
  function shannonH(vals) {
    if (!vals.length) return 0;
    var freq = {}, n = vals.length;
    vals.forEach(function(v){ freq[v] = (freq[v]||0) + 1; });
    var h = 0;
    Object.keys(freq).forEach(function(k){
      var p = freq[k] / n;
      h -= p * Math.log2(p);
    });
    return Math.max(0, h);
  }

  // ── Compute trajectory using existing window exports ───────────────────────
  function computeTraj(word, rule) {
    var encFn = window.encL, padFn = window.padL;
    var nexFn = window.caNextRow, orbitFn = window.findOrbitJS;
    var lw = window.LEXW || 16, ls = window.LEXSTEPS || 800;
    if (!encFn || !padFn || !nexFn || !orbitFn) return null;
    var cells = padFn(encFn(word.toUpperCase()), lw);
    var orb = orbitFn(cells, rule, ls);
    if (orb.transient === null) return null;
    var tr = orb.transient, per = orb.period, n = tr + per;
    var rows = [], c = cells.slice();
    for (var i = 0; i < n; i++) { rows.push(c.slice()); c = nexFn(c, rule); }
    return { rows: rows, transient: tr, period: per, word: word, rule: rule };
  }

  // ── Stats ─────────────────────────────────────────────────────────────────
  function trajStats(traj) {
    var rows = traj.rows, tr = traj.transient;
    var attrVals = [], allVals = [];
    rows.forEach(function(r, i) {
      r.forEach(function(v) { allVals.push(v); if (i >= tr) attrVals.push(v); });
    });
    var uniq = new Set(attrVals).size;
    var mean = attrVals.length ? attrVals.reduce(function(s,x){return s+x;},0)/attrVals.length : 0;
    return {
      attr_entropy:  shannonH(attrVals),
      total_entropy: shannonH(allVals),
      mean_q6:       mean,
      unique_cells:  uniq,
    };
  }

  // ── Draw single rule heatmap ───────────────────────────────────────────────
  var LM=44, TM=18, RM=80, BM=24;

  function drawOne(traj, canvas, ctx, offsetY) {
    var rows = traj.rows, tr = traj.transient, per = traj.period;
    var n = rows.length, w = rows[0].length;
    var CW = Math.floor((canvas.width - LM - RM) / w);
    var CH = Math.max(14, Math.min(30, Math.floor(160 / n)));

    // Phase labels (right side)
    ctx.font = '9px monospace';
    if (tr > 0) {
      ctx.fillStyle = '#ff9800';
      ctx.fillText('T=' + tr, canvas.width - RM + 4, offsetY + tr * CH / 2 + 4);
    }
    ctx.fillStyle = '#29b6f6';
    ctx.fillText('P=' + per, canvas.width - RM + 4, offsetY + tr * CH + per * CH / 2 + 4);

    for (var i = 0; i < n; i++) {
      var y = offsetY + i * CH;
      // Step label
      ctx.font = '9px monospace';
      ctx.fillStyle = i < tr ? '#ff9800' : '#29b6f6';
      ctx.fillText('t' + i, 2, y + CH * 0.72);

      for (var j = 0; j < w; j++) {
        ctx.fillStyle = q6Color(rows[i][j]);
        ctx.fillRect(LM + j * CW, y, CW - 1, CH - 1);
      }
    }

    // Transient boundary
    if (tr > 0 && tr < n) {
      ctx.strokeStyle = '#ffd54f';
      ctx.lineWidth = 1.5;
      ctx.setLineDash([5, 3]);
      var by = offsetY + tr * CH;
      ctx.beginPath();
      ctx.moveTo(LM, by); ctx.lineTo(LM + w * CW, by);
      ctx.stroke();
      ctx.setLineDash([]);
    }
    return CH * n;  // consumed height
  }

  function drawRuleLabel(ctx, rule, x, y) {
    var RNAMES = {xor:'XOR ⊕', xor3:'XOR3', and:'AND &', or:'OR |'};
    var RCOLS  = {xor:'#4fc3f7', xor3:'#80deea', and:'#ef5350', or:'#ffd54f'};
    ctx.font = 'bold 11px monospace';
    ctx.fillStyle = RCOLS[rule] || '#aaa';
    ctx.fillText(RNAMES[rule] || rule, x, y);
  }

  // ── Main draw ──────────────────────────────────────────────────────────────
  function drawTraj(word, rules) {
    var canvas = document.getElementById('traj-canvas');
    var ctx = canvas.getContext('2d');

    // Compute all trajectories first to know total height
    var trajs = [];
    for (var ri = 0; ri < rules.length; ri++) {
      var t = computeTraj(word, rules[ri]);
      if (t) trajs.push(t);
    }
    if (!trajs.length) { document.getElementById('traj-info').textContent='(нет данных)'; return; }

    // Calculate canvas height
    var totalH = TM;
    var heights = trajs.map(function(t) {
      var n = t.rows.length;
      var ch = Math.max(14, Math.min(30, Math.floor(160 / n)));
      return ch * n + (rules.length > 1 ? 22 : 0);
    });
    totalH += heights.reduce(function(s,h){return s+h;},0) + BM;
    canvas.height = Math.max(80, totalH);

    ctx.fillStyle = '#0d0d0d';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Column index labels
    var w = trajs[0].rows[0].length;
    var CW = Math.floor((canvas.width - LM - RM) / w);
    ctx.font = '9px monospace'; ctx.fillStyle = '#2a2a2a';
    for (var j = 0; j < w; j += 2) {
      ctx.fillText(j, LM + j * CW, TM - 4);
    }

    var y = TM;
    trajs.forEach(function(t, i) {
      if (rules.length > 1) {
        drawRuleLabel(ctx, t.rule, LM, y + 14);
        y += 18;
      }
      var used = drawOne(t, canvas, ctx, y);
      y += used + 6;
    });

    // Stats info line
    var stParts = trajs.map(function(t) {
      var st = trajStats(t);
      return t.rule + ': T=' + t.transient + ' P=' + t.period +
        ' H_attr=' + st.attr_entropy.toFixed(3) +
        ' ⟨Q6⟩=' + st.mean_q6.toFixed(1);
    });
    document.getElementById('traj-info').textContent = word + '  |  ' + stParts.join('  |  ');
  }

  // ── Populate word dropdown ─────────────────────────────────────────────────
  function populateDropdown() {
    var sel = document.getElementById('traj-word');
    var lex = window.LEXICON_ARR || [];
    lex.forEach(function(w) {
      var opt = document.createElement('option');
      opt.value = w; opt.textContent = w;
      sel.appendChild(opt);
    });
    sel.value = 'ГОРА';
  }

  // ── Run handler ────────────────────────────────────────────────────────────
  function run() {
    var custom = (document.getElementById('traj-custom').value||'').toUpperCase()
                   .replace(/[^А-ЯЁ]/g,'');
    var word = custom || document.getElementById('traj-word').value || 'ГОРА';
    var allRules = document.getElementById('traj-all-rules').checked;
    var singleRule = document.getElementById('traj-rule').value;
    var rules = allRules ? ['xor','xor3','and','or'] : [singleRule];
    drawTraj(word, rules);
  }
  window.trajRun = run;

  // ── Bind events ────────────────────────────────────────────────────────────
  document.getElementById('traj-btn').addEventListener('click', run);
  document.getElementById('traj-rule').addEventListener('change', run);
  document.getElementById('traj-word').addEventListener('change', function(){
    document.getElementById('traj-custom').value='';
    run();
  });
  document.getElementById('traj-all-rules').addEventListener('change', run);
  document.getElementById('traj-custom').addEventListener('keydown', function(e){
    if(e.key==='Enter') run();
  });

  setTimeout(function(){
    populateDropdown();
    if(window.encL) run();
  }, 800);
})();
</script>
</div>
<div class="section">
<h2>Диаграмма Деррида CA Q6</h2>
<p class="meta">Нормированное расстояние до шага (x) vs после одного шага (y) · все C(49,2)=1176 пар слов лексикона · ниже y=x = упорядоченный CA, выше = хаотичный · пунктир = аналитическое приближение (q=½)</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <label style="color:#aaa;font-size:13px">
    <input type="checkbox" id="der-xor"  checked/> <span style="color:#f55">XOR ⊕</span>
  </label>
  <label style="color:#aaa;font-size:13px">
    <input type="checkbox" id="der-xor3" checked/> <span style="color:#4dd">XOR3</span>
  </label>
  <label style="color:#aaa;font-size:13px">
    <input type="checkbox" id="der-and"  checked/> <span style="color:#7d7">AND &amp;</span>
  </label>
  <label style="color:#aaa;font-size:13px">
    <input type="checkbox" id="der-or"   checked/> <span style="color:#fa0">OR |</span>
  </label>
  <label style="color:#555;font-size:12px;margin-left:10px">
    <input type="checkbox" id="der-analytic" checked/> аналитика
  </label>
  <button id="der-btn"
    style="background:#1a1e2a;color:#b39ddb;border:1px solid #4a3a7a;
           padding:5px 14px;cursor:pointer;font-size:13px">Построить</button>
</div>
<canvas id="der-canvas" width="700" height="420"
  style="display:block;border:1px solid #1a1a1a;cursor:crosshair"></canvas>
<div id="der-info"
  style="font-family:monospace;font-size:11px;color:#555;min-height:16px;margin-top:5px"> </div>
<script>
(function(){
  var DER_RULES  = ['xor','xor3','and','or'];
  var DER_COLS   = {xor:'#f55', xor3:'#4dd', and:'#7d7', or:'#fa0'};
  var DER_NAMES  = {xor:'XOR ⊕', xor3:'XOR3', and:'AND &', or:'OR |'};

  // ── Q6 bit Hamming ─────────────────────────────────────────────────────────
  function q6h(a, b) { var x=a^b,c=0; while(x){c+=x&1;x>>=1;} return c; }
  function stateDistNorm(s1, s2) {
    var d = 0, n = s1.length;
    for (var i = 0; i < n; i++) d += q6h(s1[i], s2[i]);
    return d / (n * 6);
  }

  // ── CA step ────────────────────────────────────────────────────────────────
  function caS(cells, rule) {
    var n = cells.length, nxt = [];
    for (var i = 0; i < n; i++) {
      var l=cells[(i-1+n)%n], c=cells[i], r=cells[(i+1)%n];
      if      (rule==='xor')  nxt.push(l^r);
      else if (rule==='xor3') nxt.push(l^c^r);
      else if (rule==='and')  nxt.push(l&r);
      else                    nxt.push(l|r);
    }
    return nxt;
  }

  // ── Compute all lexicon pairs for one rule ─────────────────────────────────
  function computePairs(rule) {
    var encFn = window.encL, padFn = window.padL;
    if (!encFn || !padFn || !window.LEXICON_ARR) return [];
    var lw    = window.LEXW || 16;
    var cells = window.LEXICON_ARR.map(function(w){ return padFn(encFn(w), lw); });
    var pts   = [];
    for (var i = 0; i < cells.length; i++) {
      for (var j = i + 1; j < cells.length; j++) {
        var s1 = cells[i], s2 = cells[j];
        var x  = stateDistNorm(s1, s2);
        var y  = stateDistNorm(caS(s1, rule), caS(s2, rule));
        pts.push([x, y]);
      }
    }
    return pts;
  }

  // ── Analytic curve ─────────────────────────────────────────────────────────
  function analyticPts(rule) {
    var pts = [], N = 60;
    for (var i = 0; i <= N; i++) {
      var x = i / N, y;
      if      (rule==='xor')  y = 2*x*(1-x);
      else if (rule==='xor3') y = 3*x - 6*x*x + 4*x*x*x;
      else                    y = x*(1 - x/2)*0.5;
      pts.push([x, Math.min(1, Math.max(0, y))]);
    }
    return pts;
  }

  // ── Binned average curve ───────────────────────────────────────────────────
  function binnedCurve(pts, nBins) {
    var sums = new Array(nBins).fill(0);
    var cnts = new Array(nBins).fill(0);
    pts.forEach(function(p){
      var bi = Math.min(Math.floor(p[0] * nBins), nBins-1);
      sums[bi] += p[1]; cnts[bi]++;
    });
    var out = [];
    for (var i = 0; i < nBins; i++) {
      if (cnts[i] > 0) out.push([(i+0.5)/nBins, sums[i]/cnts[i]]);
    }
    return out;
  }

  // ── Draw ───────────────────────────────────────────────────────────────────
  function drawDerrida(canvas, allPairs, showAnalytic) {
    var W = canvas.width, H = canvas.height;
    var ctx = canvas.getContext('2d');
    ctx.fillStyle = '#0a0a0a'; ctx.fillRect(0, 0, W, H);
    var PAD = {t:25, b:50, l:55, r:110};
    var cW = W - PAD.l - PAD.r, cH = H - PAD.t - PAD.b;

    function px(x){ return PAD.l + x * cW; }
    function py(y){ return PAD.t + (1-y) * cH; }

    // Grid + axes
    [0, 0.25, 0.5, 0.75, 1.0].forEach(function(v){
      ctx.strokeStyle='#1a1a1a'; ctx.lineWidth=1;
      ctx.beginPath(); ctx.moveTo(px(0),py(v)); ctx.lineTo(px(1),py(v)); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(px(v),py(0)); ctx.lineTo(px(v),py(1)); ctx.stroke();
      ctx.fillStyle='#444'; ctx.font='9px monospace'; ctx.textAlign='right';
      ctx.fillText(v.toFixed(2), PAD.l-4, py(v)+3);
      ctx.textAlign='center';
      ctx.fillText(v.toFixed(2), px(v), PAD.t+cH+14);
    });

    // Axis labels
    ctx.fillStyle='#555'; ctx.font='11px monospace';
    ctx.textAlign='center';
    ctx.fillText('x = d(s₁,s₂) / (width·6)  [до шага]', PAD.l+cW/2, H-6);
    ctx.save(); ctx.translate(13, PAD.t+cH/2); ctx.rotate(-Math.PI/2);
    ctx.fillText('y = d(step(s₁), step(s₂)) / (width·6)', 0, 0); ctx.restore();

    // Diagonal y=x
    ctx.strokeStyle='rgba(255,255,255,0.3)'; ctx.lineWidth=1; ctx.setLineDash([4,4]);
    ctx.beginPath(); ctx.moveTo(px(0),py(0)); ctx.lineTo(px(1),py(1)); ctx.stroke();
    ctx.setLineDash([]);

    // Per rule
    DER_RULES.forEach(function(rule) {
      if (!allPairs[rule]) return;
      var col   = DER_COLS[rule];
      var pts   = allPairs[rule];
      var above = pts.filter(function(p){ return p[1] > p[0]+0.005; }).length;
      var pct   = Math.round(above/pts.length*100);

      // Scatter (low opacity)
      ctx.fillStyle = col.replace(')', ',0.25)').replace('rgb','rgba').replace('#','rgba_tmp');
      // Rebuild with alpha
      var rgb = col === '#f55' ? '255,85,85' : col === '#4dd' ? '68,221,221' :
                col === '#7d7' ? '119,221,119' : '255,170,0';
      pts.forEach(function(p){
        ctx.fillStyle = 'rgba('+rgb+',0.20)';
        ctx.beginPath(); ctx.arc(px(p[0]), py(p[1]), 2, 0, 2*Math.PI); ctx.fill();
      });

      // Binned mean curve
      var binned = binnedCurve(pts, 20);
      if (binned.length > 1) {
        ctx.strokeStyle = col; ctx.lineWidth = 2.5; ctx.setLineDash([]);
        ctx.beginPath();
        binned.forEach(function(p, i){
          if(i===0) ctx.moveTo(px(p[0]), py(p[1]));
          else      ctx.lineTo(px(p[0]), py(p[1]));
        });
        ctx.stroke();
      }

      // Analytic curve (dashed)
      if (showAnalytic) {
        var aPts = analyticPts(rule);
        ctx.strokeStyle = col; ctx.lineWidth = 1; ctx.setLineDash([3,4]);
        ctx.globalAlpha = 0.55;
        ctx.beginPath();
        aPts.forEach(function(p, i){
          if(i===0) ctx.moveTo(px(p[0]), py(p[1]));
          else      ctx.lineTo(px(p[0]), py(p[1]));
        });
        ctx.stroke();
        ctx.setLineDash([]); ctx.globalAlpha = 1.0;
      }

      // Legend (right side)
      var li = DER_RULES.indexOf(rule);
      var ly = PAD.t + 20 + li * 28;
      ctx.fillStyle = col; ctx.font = 'bold 11px monospace'; ctx.textAlign = 'left';
      ctx.fillText(DER_NAMES[rule], W - PAD.r + 6, ly);
      ctx.fillStyle = '#555'; ctx.font = '9px monospace';
      ctx.fillText(pct + '% ↑', W - PAD.r + 6, ly + 12);
    });

    // Title
    ctx.fillStyle='#777'; ctx.font='10px monospace'; ctx.textAlign='left';
    ctx.fillText('Деррида: d(t+1) vs d(t) · лексикон · сплошная=среднее, пунктир=аналитика, линия y=x',
                 PAD.l, 15);
  }

  // ── UI wiring ──────────────────────────────────────────────────────────────
  var _derCache = null;

  function derRun() {
    var canvas  = document.getElementById('der-canvas');
    var infoEl  = document.getElementById('der-info');
    if (!canvas || !window.encL) { if(infoEl) infoEl.textContent='Ожидание…'; return; }
    var showAna = document.getElementById('der-analytic');
    var doAna   = showAna ? showAna.checked : true;

    // Build pairs (cache them)
    if (!_derCache) {
      _derCache = {};
      DER_RULES.forEach(function(r){ _derCache[r] = computePairs(r); });
    }

    // Apply rule checkboxes
    var allPairs = {};
    DER_RULES.forEach(function(r){
      var cb = document.getElementById('der-'+r);
      if (!cb || cb.checked) allPairs[r] = _derCache[r];
    });

    drawDerrida(canvas, allPairs, doAna);

    // Info line
    var parts = [];
    DER_RULES.forEach(function(r){
      if (!allPairs[r]) return;
      var pts   = allPairs[r];
      var above = pts.filter(function(p){ return p[1]>p[0]+0.005; }).length;
      parts.push(DER_NAMES[r]+': '+Math.round(above/pts.length*100)+'%↑');
    });
    if(infoEl) infoEl.textContent = parts.join('  ');
  }
  window.derRun = derRun;

  document.addEventListener('DOMContentLoaded', function(){
    var btn = document.getElementById('der-btn');
    if(btn) btn.addEventListener('click', function(){ _derCache=null; derRun(); });
    ['xor','xor3','and','or','analytic'].forEach(function(r){
      var cb = document.getElementById('der-'+r);
      if(cb) cb.addEventListener('change', derRun);
    });
    setTimeout(function(){ if(window.encL) derRun(); }, 1000);
  });
})();
</script>
</div>
<div class="section">
<h2>Пространственная автокорреляция CA Q6</h2>
<p class="meta">r(d) = нормированная пространственная автокорреляция аттрактора при лаге d (0…8) · по теореме Винера–Хинчина: FT{r(d)} = спектр мощности · AND/OR: r(d)=(−1)^d (знакочередующийся) · XOR: r(d)=0 (нет структуры)</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="cor-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <span style="color:#333;font-size:13px">или</span>
  <input id="cor-custom" type="text" placeholder="своё слово…"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;
           font-size:13px;width:120px;text-transform:uppercase"/>
  <button id="cor-btn"
    style="background:#1a1a2a;color:#90caf9;border:1px solid #3a3a6a;
           padding:5px 14px;cursor:pointer;font-size:13px">Корреляция</button>
</div>
<canvas id="cor-canvas" width="700" height="300"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<canvas id="cor-hmap"   width="700" height="180"
  style="display:block;border:1px solid #1a1a1a;margin-top:3px;cursor:crosshair"></canvas>
<div id="cor-info"
  style="font-family:monospace;font-size:11px;color:#555;min-height:16px;margin-top:5px"> </div>
<script>
(function(){
  var COR_RULES = ['xor','xor3','and','or'];
  var COR_COLS  = {xor:'#f55', xor3:'#4dd', and:'#7d7', or:'#fa0'};
  var COR_NAMES = {xor:'XOR ⊕', xor3:'XOR3', and:'AND &', or:'OR |'};

  // ── Row autocorrelation ────────────────────────────────────────────────────
  function rowAutocorr(row, maxLag) {
    var N = row.length, mu = 0;
    for (var i = 0; i < N; i++) mu += row[i];
    mu /= N;
    var variance = 0;
    for (var i = 0; i < N; i++) variance += (row[i]-mu)*(row[i]-mu);
    variance /= N;
    if (variance < 1e-10) {
      var r = [];
      for (var d = 0; d <= maxLag; d++) r.push(d === 0 ? 1.0 : 0.0);
      return r;
    }
    var result = [];
    for (var d = 0; d <= maxLag; d++) {
      var cov = 0;
      for (var i = 0; i < N; i++) cov += (row[i]-mu)*(row[(i+d)%N]-mu);
      result.push((cov/N) / variance);
    }
    return result;
  }

  // ── CA step ────────────────────────────────────────────────────────────────
  function caS(cells, rule) {
    var n=cells.length, nxt=[];
    for (var i=0;i<n;i++) {
      var l=cells[(i-1+n)%n],c=cells[i],r=cells[(i+1)%n];
      if(rule==='xor') nxt.push(l^r);
      else if(rule==='xor3') nxt.push(l^c^r);
      else if(rule==='and') nxt.push(l&r);
      else nxt.push(l|r);
    }
    return nxt;
  }

  // ── Orbit ──────────────────────────────────────────────────────────────────
  function findOrbit(cells, rule) {
    var seen={}, cur=cells.slice(), t=0;
    while(true) {
      var k=cur.join(',');
      if(seen.hasOwnProperty(k)) return {tr:seen[k], per:t-seen[k]};
      seen[k]=t; cur=caS(cur,rule); t++;
    }
  }

  // ── Attractor autocorrelation ──────────────────────────────────────────────
  function attrAutocorr(cells, rule, maxLag) {
    var orb = findOrbit(cells, rule);
    var cur = cells.slice();
    for (var t=0; t<orb.tr; t++) cur = caS(cur, rule);
    // collect attractor rows
    var sums = new Array(maxLag+1).fill(0), cnt = 0;
    for (var t=0; t<orb.per; t++) {
      var ac = rowAutocorr(cur, maxLag);
      var mu = cur.reduce(function(a,v){return a+v;},0)/cur.length;
      var vv = cur.reduce(function(a,v){return a+(v-mu)*(v-mu);},0)/cur.length;
      if (vv > 1e-10) {
        for (var d=0; d<=maxLag; d++) sums[d] += ac[d];
        cnt++;
      }
      cur = caS(cur, rule);
    }
    if (cnt === 0) {
      var r=[1.0]; for(var d=1;d<=maxLag;d++) r.push(0.0);
      return r;
    }
    return sums.map(function(s){ return s/cnt; });
  }

  // ── Draw line chart ────────────────────────────────────────────────────────
  function drawCorrChart(canvas, cells, maxLag) {
    var W=canvas.width, H=canvas.height;
    var ctx=canvas.getContext('2d');
    ctx.fillStyle='#0a0a0a'; ctx.fillRect(0,0,W,H);
    var PAD={t:25,b:40,l:55,r:120};
    var cW=W-PAD.l-PAD.r, cH=H-PAD.t-PAD.b;

    function px(d){ return PAD.l + (d/maxLag)*cW; }
    function py(r){ return PAD.t + (1-r)*cH/2; }  // r in [-1,1]

    // Grid: y=0 (zero line), y=1 (top), y=-1 (bottom), y=1/e
    var eInv = Math.exp(-1);
    [[1,'#222'],[eInv,'#1a2a1a'],[-eInv,'#2a1a1a'],[0,'#2a2a2a'],[-1,'#1a1a1a']].forEach(function(v){
      ctx.strokeStyle=v[1]; ctx.lineWidth=1; ctx.setLineDash(v[0]===0?[]:v[0]===1||v[0]===-1?[]:[3,4]);
      ctx.beginPath(); ctx.moveTo(PAD.l,py(v[0])); ctx.lineTo(PAD.l+cW,py(v[0])); ctx.stroke();
      ctx.setLineDash([]);
      ctx.fillStyle='#444'; ctx.font='9px monospace'; ctx.textAlign='right';
      ctx.fillText(v[0].toFixed(2), PAD.l-4, py(v[0])+3);
    });
    // x-axis: lag labels
    for (var d=0; d<=maxLag; d++) {
      ctx.fillStyle='#444'; ctx.font='9px monospace'; ctx.textAlign='center';
      ctx.fillText(d, px(d), PAD.t+cH+14);
      if (d > 0) {
        ctx.strokeStyle='#141414'; ctx.lineWidth=1;
        ctx.beginPath(); ctx.moveTo(px(d),PAD.t); ctx.lineTo(px(d),PAD.t+cH); ctx.stroke();
      }
    }
    // Axis labels
    ctx.fillStyle='#555'; ctx.font='10px monospace'; ctx.textAlign='center';
    ctx.fillText('лаг d', PAD.l+cW/2, H-5);
    ctx.save(); ctx.translate(12,PAD.t+cH/2); ctx.rotate(-Math.PI/2);
    ctx.fillText('r(d)', 0, 0); ctx.restore();
    // 1/e label
    ctx.fillStyle='#3a5a3a'; ctx.font='8px monospace'; ctx.textAlign='left';
    ctx.fillText('1/e', PAD.l+cW+3, py(eInv)+3);
    ctx.fillText('-1/e', PAD.l+cW+3, py(-eInv)+3);

    // Per-rule correlation lines
    COR_RULES.forEach(function(rule) {
      var ac = attrAutocorr(cells, rule, maxLag);
      var col = COR_COLS[rule];
      ctx.strokeStyle = col; ctx.lineWidth = 2.5; ctx.setLineDash([]);
      ctx.beginPath();
      for (var d = 0; d <= maxLag; d++) {
        var x = px(d), y = py(ac[d]);
        if (d === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
      }
      ctx.stroke();
      // Dots
      for (var d = 0; d <= maxLag; d++) {
        ctx.fillStyle = col;
        ctx.beginPath(); ctx.arc(px(d), py(ac[d]), 3, 0, 2*Math.PI); ctx.fill();
      }
      // Legend
      var li = COR_RULES.indexOf(rule);
      var ly = PAD.t + 8 + li * 22;
      ctx.fillStyle = col; ctx.font = 'bold 10px monospace'; ctx.textAlign = 'left';
      ctx.fillText(COR_NAMES[rule], PAD.l+cW+6, ly);
    });
    ctx.fillStyle='#666'; ctx.font='10px monospace'; ctx.textAlign='left';
    ctx.fillText('Автокорреляция r(d) аттрактора · все 4 правила', PAD.l, 14);
  }

  // ── Draw lexicon heatmap ───────────────────────────────────────────────────
  function drawCorrHmap(canvas, maxLag) {
    var encFn=window.encL, padFn=window.padL;
    if (!encFn || !padFn || !window.LEXICON_ARR) return;
    var lw = window.LEXW || 16;
    var words = window.LEXICON_ARR;
    var W=canvas.width, H=canvas.height;
    var ctx=canvas.getContext('2d');
    ctx.fillStyle='#0a0a0a'; ctx.fillRect(0,0,W,H);
    var LABEL=55, RHEIGHT=Math.floor((H-20)/(words.length)), LAGW=Math.floor((W-LABEL)/(maxLag+1));
    if (RHEIGHT < 1) RHEIGHT=1;

    // Lag column headers
    ctx.fillStyle='#555'; ctx.font='9px monospace'; ctx.textAlign='center';
    for (var d=0; d<=maxLag; d++) {
      ctx.fillText('d='+d, LABEL+d*LAGW+LAGW/2, 10);
    }

    words.forEach(function(word, wi) {
      var cells = padFn(encFn(word), lw);
      // Use xor3 for heatmap (most interesting rule)
      var ac = attrAutocorr(cells, 'xor3', maxLag);
      var y  = 20 + wi * RHEIGHT;
      for (var d=0; d<=maxLag; d++) {
        var r = ac[d];
        var R,G,B;
        if (r > 0) {
          // positive: red
          R=Math.round(r*220); G=Math.round(r*50); B=Math.round(r*50);
        } else {
          // negative: blue
          var ar=Math.abs(r);
          R=Math.round(ar*30); G=Math.round(ar*80); B=Math.round(ar*220);
        }
        ctx.fillStyle='rgb('+R+','+G+','+B+')';
        ctx.fillRect(LABEL+d*LAGW, y, LAGW-1, RHEIGHT-1);
      }
      // Word label (for first few rows that fit)
      if (RHEIGHT >= 9) {
        ctx.fillStyle='#666'; ctx.font='8px monospace'; ctx.textAlign='right';
        ctx.fillText(word, LABEL-3, y+RHEIGHT-1);
      }
    });
    ctx.fillStyle='#555'; ctx.font='9px monospace'; ctx.textAlign='left';
    ctx.fillText('XOR3 r(d) по 49 словам (красный=+1, синий=−1)', LABEL, H-3);
  }

  // ── UI wiring ──────────────────────────────────────────────────────────────
  function populateCorDD() {
    var sel = document.getElementById('cor-word');
    if (!sel || !window.LEXICON_ARR) return;
    window.LEXICON_ARR.forEach(function(w){
      var o=document.createElement('option'); o.value=o.textContent=w; sel.appendChild(o);
    });
  }

  function corRun() {
    var wordEl = document.getElementById('cor-word');
    var custEl = document.getElementById('cor-custom');
    var canvas = document.getElementById('cor-canvas');
    var hmap   = document.getElementById('cor-hmap');
    var infoEl = document.getElementById('cor-info');
    if (!canvas || !window.encL) { if(infoEl) infoEl.textContent='Ожидание…'; return; }
    var word = (custEl && custEl.value.trim()) || (wordEl && wordEl.value) || 'ГОРА';
    var lw   = window.LEXW || 16;
    var cells = window.padL(window.encL(word.toUpperCase()), lw);
    var maxLag = lw / 2;
    drawCorrChart(canvas, cells, maxLag);
    if (hmap) drawCorrHmap(hmap, maxLag);
    // Info: correlation lengths per rule
    var eInv = Math.exp(-1);
    var parts = COR_RULES.map(function(rule) {
      var ac = attrAutocorr(cells, rule, maxLag);
      var cl = maxLag;
      for (var d=1; d<=maxLag; d++) { if(Math.abs(ac[d]) <= eInv){cl=d; break;} }
      return COR_NAMES[rule]+':ξ='+cl;
    });
    if(infoEl) infoEl.textContent = parts.join('  ');
  }
  window.corRun = corRun;

  document.addEventListener('DOMContentLoaded', function(){
    var btn    = document.getElementById('cor-btn');
    var custEl = document.getElementById('cor-custom');
    if(btn)    btn.addEventListener('click', corRun);
    if(custEl) custEl.addEventListener('keydown', function(e){ if(e.key==='Enter') corRun(); });
    setTimeout(function(){ populateCorDD(); if(window.encL) corRun(); }, 970);
  });
})();
</script>
</div>
<div class="section">
<h2>LZ76-сложность CA Q6</h2>
<p class="meta">Сложность Лемпеля–Зива траектории (транзиент + аттрактор → биты Q6) · C<sub>norm</sub> = c(n)·log₂(n)/n · 0 = периодическая, ~1 = случайная · вычисляется по нажатию кнопки</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="lz-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <span style="color:#333;font-size:13px">или</span>
  <input id="lz-custom" type="text" placeholder="своё слово…"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;
           font-size:13px;width:120px;text-transform:uppercase"/>
  <button id="lz-btn"
    style="background:#1e1a2a;color:#ce93d8;border:1px solid #5a3a7a;
           padding:5px 14px;cursor:pointer;font-size:13px">LZ76 (слово)</button>
  <button id="lz-all-btn"
    style="background:#1a1e1a;color:#a5d6a7;border:1px solid #3a5a3a;
           padding:5px 14px;cursor:pointer;font-size:13px">LZ76 (весь лексикон)</button>
</div>
<canvas id="lz-canvas" width="700" height="120"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<canvas id="lz-hmap"   width="700" height="280"
  style="display:block;border:1px solid #1a1a1a;margin-top:3px"></canvas>
<div id="lz-info"
  style="font-family:monospace;font-size:11px;color:#555;min-height:16px;margin-top:5px"> </div>
<script>
(function(){
  var LZ_RULES  = ['xor','xor3','and','or'];
  var LZ_COLS   = {xor:'#f55', xor3:'#4dd', and:'#7d7', or:'#fa0'};
  var LZ_NAMES  = {xor:'XOR ⊕', xor3:'XOR3', and:'AND &', or:'OR |'};
  var N_BITS    = 6;

  // ── CA step ────────────────────────────────────────────────────────────────
  function caS(cells, rule) {
    var n=cells.length, nxt=[];
    for(var i=0;i<n;i++){
      var l=cells[(i-1+n)%n],c=cells[i],r=cells[(i+1)%n];
      if(rule==='xor') nxt.push(l^r);
      else if(rule==='xor3') nxt.push(l^c^r);
      else if(rule==='and') nxt.push(l&r);
      else nxt.push(l|r);
    }
    return nxt;
  }

  // ── Orbit ──────────────────────────────────────────────────────────────────
  function findOrbit(cells, rule) {
    var seen={}, cur=cells.slice(), t=0;
    while(true) {
      var k=cur.join(',');
      if(seen.hasOwnProperty(k)) return {tr:seen[k], per:t-seen[k]};
      seen[k]=t; cur=caS(cur,rule); t++;
    }
  }

  // ── To bits (MSB first per value) ─────────────────────────────────────────
  function toBits(values) {
    var bits = [];
    for (var i = 0; i < values.length; i++) {
      var v = values[i];
      for (var b = N_BITS - 1; b >= 0; b--) bits.push((v >> b) & 1);
    }
    return bits;
  }

  // ── LZ76 phrase count (O(n²)) ─────────────────────────────────────────────
  function lz76(s) {
    var n = s.length;
    if (n === 0) return 0;
    var c = 1, i = 0, k = 1;
    while (i + k <= n) {
      // Is s[i..i+k-1] a substring of s[0..i+k-2]?
      var end = i + k - 1, found = false;
      outer:
      for (var start = 0; start <= end - k; start++) {
        for (var j = 0; j < k; j++) {
          if (s[start + j] !== s[i + j]) continue outer;
        }
        found = true; break;
      }
      if (found) { k++; }
      else        { c++; i += k; k = 1; }
    }
    return c;
  }

  // ── Normalised LZ76 ────────────────────────────────────────────────────────
  function lzNorm(s) {
    var n = s.length;
    if (n <= 1) return 0;
    return lz76(s) * Math.log2(n) / n;
  }

  // ── Compute complexity for one word + rule ─────────────────────────────────
  function lzCompute(word, rule) {
    var encFn=window.encL, padFn=window.padL;
    if (!encFn || !padFn) return null;
    var lw    = window.LEXW || 16;
    var cells = padFn(encFn(word.toUpperCase()), lw);
    var orb   = findOrbit(cells, rule);
    var cur   = cells.slice();
    var rows  = [];
    for (var t = 0; t < orb.tr + orb.per; t++) { rows.push(cur.slice()); cur = caS(cur, rule); }
    var flat = rows.reduce(function(a,r){ return a.concat(r); }, []);
    var bits = toBits(flat);
    var n    = lzNorm(bits);
    // attractor only
    var aFlat = rows.slice(orb.tr).reduce(function(a,r){ return a.concat(r); }, []);
    var aBits = toBits(aFlat);
    var an    = aBits.length > 1 ? lzNorm(aBits) : 0;
    return {traj: n, attr: an, tr: orb.tr, per: orb.per, nbits: bits.length};
  }

  // ── Draw word bar chart ────────────────────────────────────────────────────
  function drawLzBars(canvas, word) {
    var W=canvas.width, H=canvas.height;
    var ctx=canvas.getContext('2d');
    ctx.fillStyle='#0a0a0a'; ctx.fillRect(0,0,W,H);
    var LABEL=110, PAD_R=20, BAR_H=18, GAP=6;
    var barW = W - LABEL - PAD_R;
    LZ_RULES.forEach(function(rule, ri) {
      var res = lzCompute(word, rule);
      if (!res) return;
      var y   = 14 + ri * (BAR_H + GAP);
      var col = LZ_COLS[rule];
      // Label
      ctx.fillStyle=col; ctx.font='11px monospace'; ctx.textAlign='right';
      ctx.fillText(LZ_NAMES[rule], LABEL-6, y+BAR_H-4);
      // Background bar
      ctx.fillStyle='#1a1a1a';
      ctx.fillRect(LABEL, y, barW, BAR_H);
      // traj bar
      var tw = Math.round(res.traj * barW);
      var rgb = col==='#f55'?'255,85,85': col==='#4dd'?'68,221,221': col==='#7d7'?'119,221,119':'255,170,0';
      ctx.fillStyle='rgba('+rgb+',0.85)';
      ctx.fillRect(LABEL, y, tw, BAR_H);
      // attr bar (inner, lighter)
      var aw = Math.round(res.attr * barW);
      ctx.fillStyle='rgba(255,255,255,0.2)';
      ctx.fillRect(LABEL, y, aw, BAR_H);
      // Value text
      ctx.fillStyle='#ddd'; ctx.font='bold 10px monospace'; ctx.textAlign='left';
      ctx.fillText(res.traj.toFixed(3)+' [T='+res.tr+' P='+res.per+']', LABEL+tw+4, y+BAR_H-4);
    });
    ctx.fillStyle='#555'; ctx.font='10px monospace'; ctx.textAlign='left';
    ctx.fillText('LZ76 C_norm = c(n)·log₂(n)/n — полная траектория │ аттрактор', LABEL, H-3);
  }

  // ── Draw lexicon heatmap ───────────────────────────────────────────────────
  var _lzCache = null;

  function drawLzHmap(canvas) {
    if (!_lzCache || !window.LEXICON_ARR) return;
    var words = window.LEXICON_ARR;
    var W=canvas.width, H=canvas.height;
    var ctx=canvas.getContext('2d');
    ctx.fillStyle='#0a0a0a'; ctx.fillRect(0,0,W,H);
    var LABEL=55, THEADER=20;
    var cellW = Math.floor((W - LABEL) / 4);
    var cellH = Math.floor((H - THEADER) / words.length);
    if (cellH < 1) cellH = 1;
    // Rule headers
    LZ_RULES.forEach(function(rule, ri) {
      ctx.fillStyle=LZ_COLS[rule]; ctx.font='bold 10px monospace'; ctx.textAlign='center';
      ctx.fillText(LZ_NAMES[rule], LABEL + ri*cellW + cellW/2, 13);
    });
    // Sort by xor3 descending
    var sorted = words.slice().sort(function(a, b){
      var ca = (_lzCache[a] && _lzCache[a]['xor3']) ? _lzCache[a]['xor3'].traj : 0;
      var cb = (_lzCache[b] && _lzCache[b]['xor3']) ? _lzCache[b]['xor3'].traj : 0;
      return cb - ca;
    });
    sorted.forEach(function(word, wi) {
      var y = THEADER + wi * cellH;
      LZ_RULES.forEach(function(rule, ri) {
        var v  = (_lzCache[word] && _lzCache[word][rule]) ? _lzCache[word][rule].traj : 0;
        var bri = Math.min(1, v);
        var col = LZ_COLS[rule];
        var rgb = col==='#f55'?'255,85,85': col==='#4dd'?'68,221,221': col==='#7d7'?'119,221,119':'255,170,0';
        var alpha = bri * 0.9 + 0.05;
        ctx.fillStyle = 'rgba('+rgb+','+alpha+')';
        ctx.fillRect(LABEL + ri * cellW, y, cellW - 1, cellH - 1);
      });
      if (cellH >= 9) {
        ctx.fillStyle='#666'; ctx.font='8px monospace'; ctx.textAlign='right';
        ctx.fillText(word, LABEL - 3, y + cellH - 1);
      }
    });
    ctx.fillStyle='#444'; ctx.font='9px monospace'; ctx.textAlign='left';
    ctx.fillText('↕ сортировка по XOR3', LABEL, H-2);
  }

  // ── UI wiring ──────────────────────────────────────────────────────────────
  function populateLzDD() {
    var sel=document.getElementById('lz-word');
    if(!sel||!window.LEXICON_ARR) return;
    window.LEXICON_ARR.forEach(function(w){
      var o=document.createElement('option'); o.value=o.textContent=w; sel.appendChild(o);
    });
  }

  function lzRun() {
    var wordEl=document.getElementById('lz-word');
    var custEl=document.getElementById('lz-custom');
    var canvas=document.getElementById('lz-canvas');
    var infoEl=document.getElementById('lz-info');
    if(!canvas||!window.encL){if(infoEl) infoEl.textContent='Ожидание…'; return;}
    var word=(custEl&&custEl.value.trim())||(wordEl&&wordEl.value)||'ГОРА';
    drawLzBars(canvas, word);
    var parts=LZ_RULES.map(function(r){
      var res=lzCompute(word,r);
      return res?LZ_NAMES[r]+':'+res.traj.toFixed(3):'';
    });
    if(infoEl) infoEl.textContent=parts.join('  ');
  }

  function lzAllRun() {
    var hmap=document.getElementById('lz-hmap');
    var infoEl=document.getElementById('lz-info');
    if(!hmap||!window.encL||!window.LEXICON_ARR) return;
    if(infoEl) infoEl.textContent='Вычисляется…';
    setTimeout(function(){
      _lzCache = {};
      window.LEXICON_ARR.forEach(function(word){
        _lzCache[word]={};
        LZ_RULES.forEach(function(rule){
          _lzCache[word][rule]=lzCompute(word,rule);
        });
      });
      drawLzHmap(hmap);
      if(infoEl) infoEl.textContent='Готово. Лексикон: '+window.LEXICON_ARR.length+' слов × 4 правила';
    }, 10);
  }
  window.lzRun = lzRun;
  window.lzAllRun = lzAllRun;

  document.addEventListener('DOMContentLoaded', function(){
    var btn    =document.getElementById('lz-btn');
    var allBtn =document.getElementById('lz-all-btn');
    var custEl =document.getElementById('lz-custom');
    if(btn)    btn.addEventListener('click', lzRun);
    if(allBtn) allBtn.addEventListener('click', lzAllRun);
    if(custEl) custEl.addEventListener('keydown', function(e){if(e.key==='Enter') lzRun();});
    setTimeout(function(){ populateLzDD(); if(window.encL) lzRun(); }, 990);
  });
})();
</script>
</div>
<div class="section">
<h2>Рекуррентный анализ CA Q6 — диаграмма Рекуррантности</h2>
<p class="meta">R[t₁,t₂] = 1 когда H(state(t₁), state(t₂)) ≤ ε · n_cycles=4 циклов аттрактора · RQA: RR=рекуррентность, DET=детерминизм (диагональные линии ≥2), L=ср.длина, LAM=ламинарность (вертикальные линии), TT=среднее время захвата · XOR3: шахматная DET=1 · XOR/OR: сплошной блок аттрактора</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="rc-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <select id="rc-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor">XOR ⊕</option>
    <option value="xor3" selected>XOR3</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <label style="color:#aaa;font-size:12px">ε =
    <select id="rc-eps"
      style="background:#111;color:#ccc;border:1px solid #333;padding:4px 6px;font-size:12px">
      <option value="0" selected>0 (точное)</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="4">4</option>
    </select>
  </label>
  <button id="rc-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    RQA-граф</button>
  <button id="rc-hmap-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    Heatmap (лексикон)</button>
</div>
<canvas id="rc-canvas" style="display:block;margin-bottom:10px"></canvas>
<div id="rc-metrics" style="color:#ccc;font-family:monospace;font-size:12px;margin-bottom:10px"></div>
<canvas id="rc-hmap" style="display:none;margin-top:8px"></canvas>
<script>
(function(){
  var RC_COLS  = {xor:'#f55',xor3:'#4dd',and:'#7d7',or:'#fa0'};
  var RC_RGB   = {xor:[255,85,85],xor3:[68,221,221],and:[119,221,119],or:[255,170,0]};
  var ALL_RULES= ['xor','xor3','and','or'];
  var RNAMES   = {xor:'XOR \u2295',xor3:'XOR3',and:'AND \u0026',or:'OR |'};
  var N_CYCLES = 4;

  function rcStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }

  function rcOrbit(cells0,rule){
    var seen={},c=cells0.slice(),t=0;
    for(;;){
      var key=c.join(',');
      if(key in seen) return {transient:seen[key],period:t-seen[key]};
      seen[key]=t; c=rcStep(c,rule); t++;
    }
  }

  function rcRows(word,rule){
    var cells=window.padL(window.encL(word.toUpperCase()),16);
    var orb=rcOrbit(cells,rule);
    var T=orb.transient,P=Math.max(orb.period,1);
    var nSteps=T+N_CYCLES*P,rows=[],c=cells.slice();
    for(var t=0;t<nSteps;t++){rows.push(c.slice());c=rcStep(c,rule);}
    return {rows:rows,transient:T,period:P};
  }

  function stHam(r1,r2){
    var d=0;
    for(var k=0;k<r1.length;k++){var x=r1[k]^r2[k];while(x){d+=x&1;x>>=1;}}
    return d;
  }

  function rcMat(rows,eps){
    var N=rows.length,R=[];
    for(var i=0;i<N;i++){
      R.push([]);
      for(var j=0;j<N;j++) R[i].push(stHam(rows[i],rows[j])<=eps?1:0);
    }
    return R;
  }

  function rqaMet(R,minLine){
    minLine=minLine||2;
    var N=R.length;
    if(!N) return {N:0,RR:0,DET:0,L:0,LAM:0,TT:0};
    var total=0;
    for(var i=0;i<N;i++) for(var j=0;j<N;j++) if(i!==j) total+=R[i][j];
    var RR=N>1?total/(N*(N-1)):0;

    var dPts=0,dLens=[];
    for(var off=1;off<N;off++){
      for(var ud=0;ud<2;ud++){
        var run=0;
        for(var k=0;k<N-off;k++){
          var ii=ud?k+off:k, jj=ud?k:k+off;
          if(R[ii][jj]){run++;}
          else{if(run>=minLine){dPts+=run;dLens.push(run);}run=0;}
        }
        if(run>=minLine){dPts+=run;dLens.push(run);}
      }
    }
    var DET=total>0?dPts/total:0;
    var L=dLens.length?dLens.reduce(function(a,b){return a+b;},0)/dLens.length:0;

    var vPts=0,vLens=[];
    for(var j2=0;j2<N;j2++){
      var segs=[[0,j2],[j2+1,N]];
      for(var s=0;s<2;s++){
        var run2=0;
        for(var i2=segs[s][0];i2<segs[s][1];i2++){
          if(R[i2][j2]){run2++;}
          else{if(run2>=minLine){vPts+=run2;vLens.push(run2);}run2=0;}
        }
        if(run2>=minLine){vPts+=run2;vLens.push(run2);}
      }
    }
    var LAM=total>0?vPts/total:0;
    var TT=vLens.length?vLens.reduce(function(a,b){return a+b;},0)/vLens.length:0;

    function r4(x){return Math.round(x*1e4)/1e4;}
    function r2(x){return Math.round(x*1e2)/1e2;}
    return {N:N,RR:r4(RR),DET:r4(DET),L:r2(L),LAM:r4(LAM),TT:r2(TT)};
  }

  function drawRecPlot(canvas,R,transient,period,rule){
    var N=R.length;
    if(!N){canvas.width=2;canvas.height=2;return;}
    var cellSz=Math.max(Math.min(Math.floor(550/N),32),6);
    canvas.width=cellSz*N+2; canvas.height=cellSz*N+2;
    var ctx=canvas.getContext('2d');
    var ruleCol=RC_COLS[rule]||'#aaa';
    ctx.fillStyle='#111'; ctx.fillRect(0,0,canvas.width,canvas.height);
    for(var i=0;i<N;i++){
      for(var j=0;j<N;j++){
        var x=j*cellSz+1,y=i*cellSz+1;
        if(i===j)         ctx.fillStyle='#555';
        else if(R[i][j])  ctx.fillStyle=ruleCol;
        else              ctx.fillStyle='#1c1c1c';
        ctx.fillRect(x,y,cellSz-1,cellSz-1);
      }
    }
    if(transient>0 && transient<N){
      var sx=transient*cellSz+1;
      ctx.strokeStyle='#888'; ctx.lineWidth=1;
      ctx.setLineDash([3,2]);
      ctx.beginPath(); ctx.moveTo(sx,1); ctx.lineTo(sx,canvas.height-1); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(1,sx); ctx.lineTo(canvas.width-1,sx); ctx.stroke();
      ctx.setLineDash([]);
    }
  }

  function rcRun(){
    if(!window.encL||!window.padL) return;
    var word=(document.getElementById('rc-word').value||'ГОРА').toUpperCase();
    var selRule=document.getElementById('rc-rule').value||'xor3';
    var eps=parseInt(document.getElementById('rc-eps').value||'0',10);
    var canvas=document.getElementById('rc-canvas');
    var metrDiv=document.getElementById('rc-metrics');

    var rd=rcRows(word,selRule);
    var R=rcMat(rd.rows,eps);
    drawRecPlot(canvas,R,rd.transient,rd.period,selRule);

    var html='<table style="border-collapse:collapse;font-size:12px">'
      +'<tr style="color:#888"><th style="padding:3px 10px;text-align:left">Правило</th>'
      +'<th style="padding:3px 8px">T</th><th style="padding:3px 8px">P</th>'
      +'<th style="padding:3px 8px">N</th><th style="padding:3px 8px">RR</th>'
      +'<th style="padding:3px 8px">DET</th><th style="padding:3px 8px">L</th>'
      +'<th style="padding:3px 8px">LAM</th><th style="padding:3px 8px">TT</th></tr>';
    for(var ri=0;ri<ALL_RULES.length;ri++){
      var rule=ALL_RULES[ri];
      var rd2=rcRows(word,rule);
      var R2=rcMat(rd2.rows,eps);
      var m=rqaMet(R2);
      var col=RC_COLS[rule];
      html+='<tr><td style="padding:3px 10px;color:'+col+'">'+RNAMES[rule]+'</td>'
        +'<td style="padding:3px 8px;text-align:center">'+rd2.transient+'</td>'
        +'<td style="padding:3px 8px;text-align:center">'+rd2.period+'</td>'
        +'<td style="padding:3px 8px;text-align:center">'+m.N+'</td>'
        +'<td style="padding:3px 8px;text-align:right">'+m.RR.toFixed(3)+'</td>'
        +'<td style="padding:3px 8px;text-align:right">'+m.DET.toFixed(3)+'</td>'
        +'<td style="padding:3px 8px;text-align:right">'+m.L.toFixed(2)+'</td>'
        +'<td style="padding:3px 8px;text-align:right">'+m.LAM.toFixed(3)+'</td>'
        +'<td style="padding:3px 8px;text-align:right">'+m.TT.toFixed(2)+'</td>'
        +'</tr>';
    }
    html+='</table>';
    metrDiv.innerHTML=html;
  }

  function rcHmapRun(){
    if(!window.encL||!window.padL||!window.LEXICON_ARR) return;
    var eps=parseInt(document.getElementById('rc-eps').value||'0',10);
    var words=window.LEXICON_ARR.slice().sort();
    var cellW=13,cellH=18,leftPad=54,topPad=75;
    var hmCv=document.getElementById('rc-hmap');
    hmCv.width=leftPad+words.length*cellW+4;
    hmCv.height=topPad+ALL_RULES.length*cellH+4;
    var ctx=hmCv.getContext('2d');
    ctx.fillStyle='#111'; ctx.fillRect(0,0,hmCv.width,hmCv.height);

    ctx.save(); ctx.font='9px monospace'; ctx.fillStyle='#999';
    for(var wi=0;wi<words.length;wi++){
      ctx.save();
      ctx.translate(leftPad+wi*cellW+cellW/2,topPad-4);
      ctx.rotate(-Math.PI/2);
      ctx.textAlign='left'; ctx.fillText(words[wi],0,0);
      ctx.restore();
    }
    ctx.restore();

    ctx.textAlign='right'; ctx.font='11px monospace';
    for(var ri2=0;ri2<ALL_RULES.length;ri2++){
      ctx.fillStyle=RC_COLS[ALL_RULES[ri2]];
      ctx.fillText(RNAMES[ALL_RULES[ri2]],leftPad-4,topPad+ri2*cellH+cellH-3);
    }

    for(var ri3=0;ri3<ALL_RULES.length;ri3++){
      var rule3=ALL_RULES[ri3];
      var rgb=RC_RGB[rule3]||[128,128,128];
      for(var wi2=0;wi2<words.length;wi2++){
        var rd3=rcRows(words[wi2],rule3);
        var R3=rcMat(rd3.rows,eps);
        var m3=rqaMet(R3);
        var a=m3.RR;
        var cr=Math.round(rgb[0]*a+0x1c*(1-a));
        var cg=Math.round(rgb[1]*a+0x1c*(1-a));
        var cb=Math.round(rgb[2]*a+0x1c*(1-a));
        ctx.fillStyle='rgb('+cr+','+cg+','+cb+')';
        ctx.fillRect(leftPad+wi2*cellW,topPad+ri3*cellH,cellW-1,cellH-1);
      }
    }
    hmCv.style.display='block';
  }

  document.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('rc-word');
    if(window.LEXICON_ARR){
      window.LEXICON_ARR.slice().sort().forEach(function(w){
        var o=document.createElement('option');
        o.value=o.text=w; if(w==='\u0413\u041e\u0420\u0410') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('rc-btn');
    var hmBtn=document.getElementById('rc-hmap-btn');
    var ruleEl=document.getElementById('rc-rule');
    var wordEl=document.getElementById('rc-word');
    if(btn)    btn.addEventListener('click',rcRun);
    if(hmBtn)  hmBtn.addEventListener('click',rcHmapRun);
    if(ruleEl) ruleEl.addEventListener('change',rcRun);
    if(wordEl) wordEl.addEventListener('change',rcRun);
    setTimeout(function(){if(window.encL) rcRun();},1100);
  });
})();
</script>
</div>
<div class="section">
<h2>Взаимная информация CA Q6 — MI-матрица аттрактора</h2>
<p class="meta">I(X_i; X_j) = H(X_i) + H(X_j) − H(X_i,X_j) [бит, лог₂] · распределение вычислено по точным состояниям периодического аттрактора · диагональ M[i][i] = H(X_i) (собственная энтропия клетки) · XOR P=1 → H=0 · XOR3 P=8 → H до 3 бит · яркость пикселя пропорциональна MI</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="mi-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <select id="mi-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor">XOR ⊕</option>
    <option value="xor3" selected>XOR3</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <button id="mi-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    MI-матрица</button>
  <button id="mi-hmap-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    Heatmap (лексикон)</button>
</div>
<div style="display:flex;gap:16px;flex-wrap:wrap;align-items:flex-start">
  <canvas id="mi-mat" style="display:block"></canvas>
  <canvas id="mi-dist" style="display:block"></canvas>
</div>
<div id="mi-stats" style="color:#ccc;font-family:monospace;font-size:12px;margin-top:8px"></div>
<canvas id="mi-hmap" style="display:none;margin-top:8px"></canvas>
<script>
(function(){
  var MI_COLS = {xor:'#f55',xor3:'#4dd',and:'#7d7',or:'#fa0'};
  var MI_RGB  = {xor:[255,85,85],xor3:[68,221,221],and:[119,221,119],or:[255,170,0]};
  var ALL_RULES=['xor','xor3','and','or'];
  var RNAMES  = {xor:'XOR \u2295',xor3:'XOR3',and:'AND \u0026',or:'OR |'};

  function miStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }

  function miOrbit(cells0,rule){
    var seen={},c=cells0.slice(),t=0;
    for(;;){
      var key=c.join(',');
      if(key in seen) return {transient:seen[key],period:t-seen[key]};
      seen[key]=t; c=miStep(c,rule); t++;
    }
  }

  function miAttractorStates(word,rule){
    var cells=window.padL(window.encL(word.toUpperCase()),16);
    var orb=miOrbit(cells,rule);
    var T=orb.transient,P=Math.max(orb.period,1);
    var c=cells.slice();
    for(var t=0;t<T;t++) c=miStep(c,rule);
    var states=[];
    for(var t=0;t<P;t++){states.push(c.slice());c=miStep(c,rule);}
    return {states:states,period:P};
  }

  function miEntropy(vals){
    var n=vals.length;
    if(!n) return 0;
    var cnt={};
    vals.forEach(function(v){cnt[v]=(cnt[v]||0)+1;});
    var H=0;
    Object.keys(cnt).forEach(function(k){
      var p=cnt[k]/n;
      H-=p*Math.log2(p);
    });
    return H;
  }

  function miCellMI(states,i,j){
    var n=states.length;
    if(!n) return 0;
    var vi=states.map(function(s){return s[i];});
    var vj=states.map(function(s){return s[j];});
    var vpairs=vi.map(function(v,k){return v+'_'+vj[k];});
    var hi=miEntropy(vi),hj=miEntropy(vj),hij=miEntropy(vpairs);
    return Math.max(0,hi+hj-hij);
  }

  function buildMIMatrix(states,W){
    var M=[];
    for(var i=0;i<W;i++){
      M.push([]);
      for(var j=0;j<W;j++) M[i].push(miCellMI(states,i,j));
    }
    return M;
  }

  function miByDist(M,W){
    var dMax=Math.floor(W/2),totals=new Array(dMax+1).fill(0),counts=new Array(dMax+1).fill(0);
    for(var i=0;i<W;i++) for(var j=0;j<W;j++){
      var diff=Math.abs(i-j),d=Math.min(diff,W-diff);
      if(d<=dMax){totals[d]+=M[i][j];counts[d]++;}
    }
    return totals.map(function(t,d){return counts[d]?t/counts[d]:0;});
  }

  function interpColor(v,maxV,rgb){
    var a=maxV>0?v/maxV:0;
    var r=Math.round(rgb[0]*a+0x1c*(1-a));
    var g=Math.round(rgb[1]*a+0x1c*(1-a));
    var b2=Math.round(rgb[2]*a+0x1c*(1-a));
    return 'rgb('+r+','+g+','+b2+')';
  }

  function drawMIMatrix(canvas,M,W,rule){
    var cellSz=26,leftPad=28,topPad=28;
    canvas.width=leftPad+W*cellSz+50;
    canvas.height=topPad+W*cellSz+4;
    var ctx=canvas.getContext('2d');
    var rgb=MI_RGB[rule]||[128,128,128];
    ctx.fillStyle='#111'; ctx.fillRect(0,0,canvas.width,canvas.height);

    // find max off-diagonal
    var maxV=0;
    for(var i=0;i<W;i++) for(var j=0;j<W;j++) if(i!==j && M[i][j]>maxV) maxV=M[i][j];
    if(maxV<1e-9) maxV=1;

    // axis labels
    ctx.font='9px monospace'; ctx.textAlign='center';
    for(var k=0;k<W;k++){
      ctx.fillStyle='#666';
      ctx.fillText(k,leftPad+k*cellSz+cellSz/2,topPad-4);
      ctx.fillText(k,leftPad-14,topPad+k*cellSz+cellSz/2+3);
    }

    // cells
    for(var i=0;i<W;i++){
      for(var j=0;j<W;j++){
        var x=leftPad+j*cellSz, y=topPad+i*cellSz;
        if(i===j) ctx.fillStyle='#555';
        else      ctx.fillStyle=interpColor(M[i][j],maxV,rgb);
        ctx.fillRect(x,y,cellSz-1,cellSz-1);
      }
      // entropy bar to the right
      var entH=M[i][i];
      var barW=Math.round(entH/Math.max(maxV,1)*44);
      ctx.fillStyle=interpColor(entH,maxV,rgb);
      ctx.fillRect(leftPad+W*cellSz+2,topPad+i*cellSz+2,barW,cellSz-4);
    }
  }

  function drawMIDist(canvas,dist,rule){
    var W=dist.length,barW=28,barMaxH=80,padL=12,padB=18;
    canvas.width=padL+W*barW+4;
    canvas.height=barMaxH+padB+20;
    var ctx=canvas.getContext('2d');
    var rgb=MI_RGB[rule]||[128,128,128];
    ctx.fillStyle='#111'; ctx.fillRect(0,0,canvas.width,canvas.height);
    var maxV=Math.max.apply(null,dist)||1;
    ctx.font='9px monospace'; ctx.textAlign='center';
    ctx.fillStyle='#666';
    ctx.fillText('MI(d)',padL+(W*barW)/2,10);
    for(var d=0;d<W;d++){
      var h=Math.round(dist[d]/maxV*barMaxH);
      ctx.fillStyle=interpColor(dist[d],maxV,rgb);
      ctx.fillRect(padL+d*barW+2,barMaxH+padB-h,barW-4,h);
      ctx.fillStyle='#666';
      ctx.fillText(d,padL+d*barW+barW/2,barMaxH+padB+10);
    }
  }

  function miRun(){
    if(!window.encL||!window.padL) return;
    var word=(document.getElementById('mi-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('mi-rule').value||'xor3';
    var matCv=document.getElementById('mi-mat');
    var distCv=document.getElementById('mi-dist');
    var statsDiv=document.getElementById('mi-stats');
    var W=16;

    var res=miAttractorStates(word,rule);
    var M=buildMIMatrix(res.states,W);
    var dist=miByDist(M,W);

    drawMIMatrix(matCv,M,W,rule);
    drawMIDist(distCv,dist,rule);

    // stats
    var ent=M.map(function(row,i){return row[i];});
    var meanH=ent.reduce(function(a,b){return a+b;},0)/W;
    var maxMI=0,maxPair=[0,0];
    for(var i=0;i<W;i++) for(var j=0;j<W;j++){
      if(i!==j && M[i][j]>maxMI){maxMI=M[i][j];maxPair=[i,j];}
    }
    var distStr=dist.map(function(v,d){return 'd'+d+'='+v.toFixed(2);}).join('  ');
    statsDiv.innerHTML='<span style="color:'+MI_COLS[rule]+'">'+RNAMES[rule]+'</span>'
      +'  P='+res.period+'  H\u0304='+meanH.toFixed(3)+' бит'
      +'  max MI='+maxMI.toFixed(3)+' b ('+maxPair[0]+','+maxPair[1]+')<br>'
      +'<span style="color:#888">'+distStr+'</span>';
  }

  function miHmapRun(){
    if(!window.encL||!window.padL||!window.LEXICON_ARR) return;
    var words=window.LEXICON_ARR.slice().sort();
    var cellW=13,cellH=18,leftPad=54,topPad=75;
    var hmCv=document.getElementById('mi-hmap');
    hmCv.width=leftPad+words.length*cellW+4;
    hmCv.height=topPad+ALL_RULES.length*cellH+4;
    var ctx=hmCv.getContext('2d');
    ctx.fillStyle='#111'; ctx.fillRect(0,0,hmCv.width,hmCv.height);

    ctx.save(); ctx.font='9px monospace'; ctx.fillStyle='#999';
    for(var wi=0;wi<words.length;wi++){
      ctx.save();
      ctx.translate(leftPad+wi*cellW+cellW/2,topPad-4);
      ctx.rotate(-Math.PI/2);
      ctx.textAlign='left'; ctx.fillText(words[wi],0,0);
      ctx.restore();
    }
    ctx.restore();

    ctx.textAlign='right'; ctx.font='11px monospace';
    for(var ri2=0;ri2<ALL_RULES.length;ri2++){
      ctx.fillStyle=MI_COLS[ALL_RULES[ri2]];
      ctx.fillText(RNAMES[ALL_RULES[ri2]],leftPad-4,topPad+ri2*cellH+cellH-3);
    }

    for(var ri3=0;ri3<ALL_RULES.length;ri3++){
      var rule3=ALL_RULES[ri3];
      var rgb3=MI_RGB[rule3]||[128,128,128];
      for(var wi2=0;wi2<words.length;wi2++){
        var res2=miAttractorStates(words[wi2],rule3);
        var ent2=0;
        for(var ci=0;ci<16;ci++) ent2+=miCellMI(res2.states,ci,ci);
        ent2/=16;
        var a=Math.min(ent2/3,1);
        var cr2=Math.round(rgb3[0]*a+0x1c*(1-a));
        var cg2=Math.round(rgb3[1]*a+0x1c*(1-a));
        var cb2=Math.round(rgb3[2]*a+0x1c*(1-a));
        ctx.fillStyle='rgb('+cr2+','+cg2+','+cb2+')';
        ctx.fillRect(leftPad+wi2*cellW,topPad+ri3*cellH,cellW-1,cellH-1);
      }
    }
    hmCv.style.display='block';
  }

  document.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('mi-word');
    if(window.LEXICON_ARR){
      window.LEXICON_ARR.slice().sort().forEach(function(w){
        var o=document.createElement('option');
        o.value=o.text=w; if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('mi-btn');
    var hmBtn=document.getElementById('mi-hmap-btn');
    var ruleEl=document.getElementById('mi-rule');
    var wordEl=document.getElementById('mi-word');
    if(btn)    btn.addEventListener('click',miRun);
    if(hmBtn)  hmBtn.addEventListener('click',miHmapRun);
    if(ruleEl) ruleEl.addEventListener('change',miRun);
    if(wordEl) wordEl.addEventListener('change',miRun);
    setTimeout(function(){if(window.encL) miRun();},1150);
  });
})();
</script>
</div>
<div class="section">
<h2>Пространство-время Q6 — кимограф эволюции</h2>
<p class="meta">Полная эволюция от НУ → переходный процесс → аттрактор · цвет = значение Q6 (0–63) через HSV-оттенок · пунктирная линия = начало аттрактора · правый столбец = пространственная энтропия H(t) · H=0 → однородное состояние</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="st-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <select id="st-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor">XOR ⊕</option>
    <option value="xor3" selected>XOR3</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <label style="color:#aaa;font-size:12px">доп.периодов =
    <select id="st-extra"
      style="background:#111;color:#ccc;border:1px solid #333;padding:4px 6px;font-size:12px">
      <option value="0">0</option>
      <option value="1" selected>1</option>
      <option value="2">2</option>
      <option value="3">3</option>
    </select>
  </label>
  <label style="color:#aaa;font-size:12px">масштаб =
    <select id="st-scale"
      style="background:#111;color:#ccc;border:1px solid #333;padding:4px 6px;font-size:12px">
      <option value="10">10px</option>
      <option value="14" selected>14px</option>
      <option value="20">20px</option>
    </select>
  </label>
  <button id="st-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    Кимограф</button>
</div>
<canvas id="st-canvas" style="display:block;margin-bottom:6px"></canvas>
<div id="st-stats" style="color:#ccc;font-family:monospace;font-size:12px;margin-bottom:6px"></div>
<script>
(function(){
  var ST_COLS={xor:'#f55',xor3:'#4dd',and:'#7d7',or:'#fa0'};

  function stStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }

  function stOrbitInfo(cells0,rule){
    var seen={},c=cells0.slice(),t=0;
    for(;;){
      var key=c.join(',');
      if(key in seen) return {transient:seen[key],period:t-seen[key]};
      seen[key]=t; c=stStep(c,rule); t++;
    }
  }

  function hsvToRgb(h,s,v){
    var i=Math.floor(h*6),f=h*6-i;
    var p=v*(1-s),q=v*(1-(f*s)),tt=v*(1-((1-f)*s));
    var r,g,b;
    switch(i%6){
      case 0:r=v;g=tt;b=p;break; case 1:r=q;g=v;b=p;break;
      case 2:r=p;g=v;b=tt;break; case 3:r=p;g=q;b=v;break;
      case 4:r=tt;g=p;b=v;break; case 5:r=v;g=p;b=q;break;
      default:r=0;g=0;b=0;
    }
    return [Math.round(r*255),Math.round(g*255),Math.round(b*255)];
  }

  function stValueRgb(v){
    return hsvToRgb(v/63,0.85,0.78);
  }

  function stSpatialH(row){
    var counts={},n=row.length;
    for(var i=0;i<n;i++) counts[row[i]]=(counts[row[i]]||0)+1;
    var h=0;
    for(var k in counts){var p=counts[k]/n; if(p>0) h-=p*Math.log2(p);}
    return Math.max(0,h);
  }

  function drawSpacetime(canvas,grid,transient,period,scale,rule){
    var N=grid[0].length, T=grid.length;
    var entW=60, padL=30, padT=2;
    var W=padL+N*scale+entW+4, H=padT+T*scale+4;
    canvas.width=W; canvas.height=H;
    var ctx=canvas.getContext('2d');
    ctx.fillStyle='#111'; ctx.fillRect(0,0,W,H);

    var maxH=Math.log2(N);

    for(var t=0;t<T;t++){
      var y=padT+t*scale;
      // row label
      ctx.fillStyle='#444'; ctx.font='9px monospace'; ctx.textAlign='right';
      ctx.fillText(t,padL-3,y+scale-2);

      for(var i=0;i<N;i++){
        var rgb=stValueRgb(grid[t][i]);
        ctx.fillStyle='rgb('+rgb[0]+','+rgb[1]+','+rgb[2]+')';
        ctx.fillRect(padL+i*scale,y,scale-1,scale-1);
      }

      // entropy bar
      var h=stSpatialH(grid[t]);
      var bW=Math.round((h/Math.max(maxH,1))*entW);
      var c=ST_COLS[rule]||'#ccc';
      ctx.fillStyle=c;
      ctx.fillRect(padL+N*scale+2,y,bW,scale-2);
    }

    // attractor boundary
    if(transient>0){
      var yT=padT+transient*scale;
      ctx.strokeStyle='rgba(255,255,255,0.5)'; ctx.lineWidth=1;
      ctx.setLineDash([3,2]);
      ctx.beginPath(); ctx.moveTo(padL,yT); ctx.lineTo(padL+N*scale,yT); ctx.stroke();
      ctx.setLineDash([]);
      ctx.fillStyle='rgba(255,255,255,0.5)'; ctx.font='8px monospace'; ctx.textAlign='left';
      ctx.fillText('T='+transient,padL+N*scale+2,yT+6);
    }
  }

  function stRun(){
    if(!window.encL||!window.padL) return;
    var word=(document.getElementById('st-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('st-rule').value||'xor3';
    var extra=parseInt(document.getElementById('st-extra').value||'1',10);
    var scale=parseInt(document.getElementById('st-scale').value||'14',10);
    var canvas=document.getElementById('st-canvas');
    var statsDiv=document.getElementById('st-stats');

    var cells=window.padL(window.encL(word),16);
    var info=stOrbitInfo(cells.slice(),rule);
    var T=info.transient, P=Math.max(info.period,1);
    var nSteps=T+P*(1+extra);

    var grid=[], c=cells.slice();
    for(var t=0;t<nSteps;t++){grid.push(c.slice());c=stStep(c,rule);}

    drawSpacetime(canvas,grid,T,P,scale,rule);

    var icH=stSpatialH(grid[0]);
    var atH=0;
    for(var t2=T;t2<T+P;t2++) atH+=stSpatialH(grid[t2]);
    atH/=P;

    statsDiv.innerHTML='<span style="color:'+ST_COLS[rule]+'">'+rule.toUpperCase()+'</span>'
      +'  T='+T+'  P='+P
      +'  H(IC)='+icH.toFixed(3)
      +'  H(аттр)='+atH.toFixed(3);
  }

  document.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('st-word');
    if(window.LEXICON_ARR){
      window.LEXICON_ARR.slice().sort().forEach(function(w){
        var o=document.createElement('option');
        o.value=o.text=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn   =document.getElementById('st-btn');
    var ruleEl=document.getElementById('st-rule');
    var wordEl=document.getElementById('st-word');
    var extEl =document.getElementById('st-extra');
    var scEl  =document.getElementById('st-scale');
    if(btn)    btn.addEventListener('click',stRun);
    if(ruleEl) ruleEl.addEventListener('change',stRun);
    if(wordEl) wordEl.addEventListener('change',stRun);
    if(extEl)  extEl.addEventListener('change',stRun);
    if(scEl)   scEl.addEventListener('change',stRun);
    setTimeout(function(){if(window.encL) stRun();},1050);
  });
})();
</script>
</div>
<div class="section">
<h2>Разброс повреждений Q6 — конус влияния</h2>
<p class="meta">Оригинальный НУ и НУ с одним перевёрнутым битом запускаются параллельно · d(t,i) = |orig(t,i)−pert(t,i)| / 63 · цвет: чёрный=0 → красный → жёлтый=max · правый мини-график = суммарное D(t) · фаза: ordered=затухание / chaotic=рост / critical=persist</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="dm-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <select id="dm-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor">XOR ⊕</option>
    <option value="xor3" selected>XOR3</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <label style="color:#aaa;font-size:12px">ячейка =
    <select id="dm-cell"
      style="background:#111;color:#ccc;border:1px solid #333;padding:4px 6px;font-size:12px">
      <option value="0" selected>0</option><option value="1">1</option>
      <option value="2">2</option><option value="3">3</option>
      <option value="4">4</option><option value="5">5</option>
      <option value="6">6</option><option value="7">7</option>
      <option value="8">8</option>
    </select>
  </label>
  <label style="color:#aaa;font-size:12px">бит =
    <select id="dm-bit"
      style="background:#111;color:#ccc;border:1px solid #333;padding:4px 6px;font-size:12px">
      <option value="0" selected>0 (±1)</option>
      <option value="1">1 (±2)</option>
      <option value="2">2 (±4)</option>
      <option value="3">3 (±8)</option>
      <option value="4">4 (±16)</option>
      <option value="5">5 (±32)</option>
    </select>
  </label>
  <label style="color:#aaa;font-size:12px">шагов =
    <select id="dm-steps"
      style="background:#111;color:#ccc;border:1px solid #333;padding:4px 6px;font-size:12px">
      <option value="16">16</option>
      <option value="24" selected>24</option>
      <option value="32">32</option>
      <option value="48">48</option>
    </select>
  </label>
  <button id="dm-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    Повреждение</button>
</div>
<div style="display:flex;gap:16px;align-items:flex-start">
  <canvas id="dm-canvas" style="display:block"></canvas>
  <canvas id="dm-chart"  style="display:block;margin-top:2px"></canvas>
</div>
<div id="dm-stats" style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"></div>
<script>
(function(){
  var DM_COLS={xor:'#f55',xor3:'#4dd',and:'#7d7',or:'#fa0'};

  function dmStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }

  function dmHot(v){
    // v ∈ [0,1]: 0→black, 0.5→red, 1.0→yellow
    var r=Math.min(255,Math.round(v*2*255));
    var g=v>0.5?Math.round((v-0.5)*2*255):0;
    return [r,g,0];
  }

  function dmRun(){
    if(!window.encL||!window.padL) return;
    var word =(document.getElementById('dm-word').value||'ТУМАН').toUpperCase();
    var rule =document.getElementById('dm-rule').value||'xor3';
    var cell =parseInt(document.getElementById('dm-cell').value||'0',10);
    var bit  =parseInt(document.getElementById('dm-bit').value||'0',10);
    var steps=parseInt(document.getElementById('dm-steps').value||'24',10);
    var canvas=document.getElementById('dm-canvas');
    var chart =document.getElementById('dm-chart');
    var statsDiv=document.getElementById('dm-stats');
    var scale=14, N=16;

    var cells=window.padL(window.encL(word),N);
    // perturb
    var pert=cells.slice();
    pert[cell%N]=(pert[cell%N]^(1<<(bit%6)))&63;

    // run both
    var co=cells.slice(), cp=pert.slice();
    var dgrid=[], totals=[];
    for(var t=0;t<steps;t++){
      var row=[];
      var tot=0;
      for(var i=0;i<N;i++){var d=Math.abs(co[i]-cp[i])/63;row.push(d);tot+=d;}
      dgrid.push(row);
      totals.push(tot/N);
      co=dmStep(co,rule); cp=dmStep(cp,rule);
    }

    // normalise by max damage
    var maxD=0;
    for(var t2=0;t2<dgrid.length;t2++) for(var i2=0;i2<N;i2++) maxD=Math.max(maxD,dgrid[t2][i2]);
    maxD=Math.max(maxD,1e-9);

    // draw spacetime
    var padL=32, padT=2;
    canvas.width=padL+N*scale+4; canvas.height=padT+steps*scale+4;
    var ctx=canvas.getContext('2d');
    ctx.fillStyle='#0a0a0a'; ctx.fillRect(0,0,canvas.width,canvas.height);
    for(var t3=0;t3<steps;t3++){
      var y=padT+t3*scale;
      ctx.fillStyle='#333'; ctx.font='9px monospace'; ctx.textAlign='right';
      ctx.fillText(t3,padL-3,y+scale-2);
      for(var i3=0;i3<N;i3++){
        var v=dgrid[t3][i3]/maxD;
        var rgb=dmHot(v);
        ctx.fillStyle='rgb('+rgb[0]+','+rgb[1]+','+rgb[2]+')';
        ctx.fillRect(padL+i3*scale,y,scale-1,scale-1);
      }
      // mark perturbed cell at t=0
      if(t3===0){
        ctx.strokeStyle='rgba(255,255,255,0.6)';ctx.lineWidth=1;
        ctx.strokeRect(padL+cell*scale,y,scale-1,scale-1);
      }
    }

    // draw D(t) chart
    var cW=100, cH=padT+steps*scale+4;
    chart.width=cW; chart.height=cH;
    var cx=chart.getContext('2d');
    cx.fillStyle='#0a0a0a'; cx.fillRect(0,0,cW,cH);
    var maxT=Math.max.apply(null,totals)||1e-9;
    var col=DM_COLS[rule]||'#ccc';
    cx.strokeStyle=col; cx.lineWidth=1.5;
    cx.beginPath();
    for(var t4=0;t4<steps;t4++){
      var y4=padT+t4*scale+scale/2;
      var x4=Math.round(totals[t4]/maxT*(cW-4))+2;
      if(t4===0) cx.moveTo(x4,y4); else cx.lineTo(x4,y4);
    }
    cx.stroke();
    // axis
    cx.strokeStyle='#333'; cx.lineWidth=1;
    cx.beginPath(); cx.moveTo(2,padT); cx.lineTo(2,cH-2); cx.stroke();

    // stats
    var maxDam=Math.max.apply(null,totals);
    var ext=-1;
    for(var t5=0;t5<totals.length;t5++){if(totals[t5]<1e-9){ext=t5;break;}}
    var fin=totals[totals.length-1];
    var phase=ext>=0?'ordered':fin>0.05?'chaotic':'critical';

    statsDiv.innerHTML='<span style="color:'+col+'">'+rule.toUpperCase()+'</span>'
      +'  ячейка='+cell+'  бит='+bit+'(Δ'+(1<<bit)+')'
      +'  max D='+maxDam.toFixed(4)
      +'  ext='+ext
      +'  фаза=<b>'+phase+'</b>';
  }

  document.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('dm-word');
    if(window.LEXICON_ARR){
      window.LEXICON_ARR.slice().sort().forEach(function(w){
        var o=document.createElement('option');
        o.value=o.text=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn    =document.getElementById('dm-btn');
    var wordEl =document.getElementById('dm-word');
    var ruleEl =document.getElementById('dm-rule');
    var cellEl =document.getElementById('dm-cell');
    var bitEl  =document.getElementById('dm-bit');
    var stepsEl=document.getElementById('dm-steps');
    if(btn)     btn.addEventListener('click',dmRun);
    if(wordEl)  wordEl.addEventListener('change',dmRun);
    if(ruleEl)  ruleEl.addEventListener('change',dmRun);
    if(cellEl)  cellEl.addEventListener('change',dmRun);
    if(bitEl)   bitEl.addEventListener('change',dmRun);
    if(stepsEl) stepsEl.addEventListener('change',dmRun);
    setTimeout(function(){if(window.encL) dmRun();},1100);
  });
})();
</script>
</div>
<div class="section">
<h2>Символьная динамика Q6 — бинарная грамматика аттрактора</h2>
<p class="meta">Каждое Q6-значение → бинарный символ: 1 если v ≥ порог, иначе 0 · Анализ: блочная энтропия H_n n-грамм, переходная матрица, запрещённые слова · topol.h = max(H_n/n) · закрашенный=1, точка=0</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="sym-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <select id="sym-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor">XOR ⊕</option>
    <option value="xor3" selected>XOR3</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <label style="color:#aaa;font-size:12px">порог =
    <select id="sym-thr"
      style="background:#111;color:#ccc;border:1px solid #333;padding:4px 6px;font-size:12px">
      <option value="16">16 (¼)</option>
      <option value="32" selected>32 (½)</option>
      <option value="48">48 (¾)</option>
    </select>
  </label>
  <button id="sym-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    Символы</button>
</div>
<div style="display:flex;gap:20px;align-items:flex-start;flex-wrap:wrap">
  <canvas id="sym-grid"  style="display:block"></canvas>
  <canvas id="sym-bep"   style="display:block"></canvas>
  <canvas id="sym-tm"    style="display:block"></canvas>
</div>
<div id="sym-stats" style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"></div>
<script>
(function(){
  var SYM_COLS={xor:'#f55',xor3:'#4dd',and:'#7d7',or:'#fa0'};

  function symStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }

  function symOrbit(cells0,rule){
    var seen={},c=cells0.slice(),t=0;
    for(;;){var key=c.join(',');if(key in seen) return {T:seen[key],P:t-seen[key]};seen[key]=t;c=symStep(c,rule);t++;}
  }

  function symGetGrid(cells,rule,thr){
    var info=symOrbit(cells.slice(),rule);
    var T=info.T, P=Math.max(info.P,1);
    var c=cells.slice();
    for(var i=0;i<T;i++) c=symStep(c,rule);
    var grid=[];
    for(var i=0;i<P;i++){grid.push(c.map(function(v){return v>=thr?1:0;}));c=symStep(c,rule);}
    return {grid:grid,T:T,P:P};
  }

  function symNgrams(seq,n){
    var L=seq.length,res=[];
    for(var i=0;i<L;i++){var g='';for(var j=0;j<n;j++) g+=seq[(i+j)%L];res.push(g);}
    return res;
  }

  function symCounts(seqs,n){
    var C={};
    seqs.forEach(function(s){symNgrams(s,n).forEach(function(g){C[g]=(C[g]||0)+1;});});
    return C;
  }

  function symH(C){
    var total=0;
    Object.values(C).forEach(function(v){total+=v;});
    if(!total) return 0;
    var h=0;
    Object.values(C).forEach(function(v){var p=v/total;if(p>0) h-=p*Math.log2(p);});
    return Math.max(0,h);
  }

  function symBlockH(seqs,maxN){
    var bep=[];
    for(var n=1;n<=maxN;n++) bep.push(symH(symCounts(seqs,n)));
    return bep;
  }

  function symForbidden(seqs,n){
    var C=symCounts(seqs,n),cnt=0;
    for(var k=0;k<(1<<n);k++){
      var g='';for(var b=n-1;b>=0;b--) g+=((k>>b)&1);
      if(!C[g]) cnt++;
    }
    return cnt;
  }

  function symTM(seqs){
    var ct=[[0,0],[0,0]];
    seqs.forEach(function(seq){
      var L=seq.length;
      for(var i=0;i<L;i++) ct[seq[i]][seq[(i+1)%L]]++;
    });
    var mat=[[0,0],[0,0]];
    for(var a=0;a<2;a++){var s=ct[a][0]+ct[a][1];if(s){mat[a][0]=ct[a][0]/s;mat[a][1]=ct[a][1]/s;}}
    return mat;
  }

  function symRun(){
    if(!window.encL||!window.padL) return;
    var word=(document.getElementById('sym-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('sym-rule').value||'xor3';
    var thr =parseInt(document.getElementById('sym-thr').value||'32',10);
    var N=16, maxN=6;

    var cells=window.padL(window.encL(word),N);
    var res=symGetGrid(cells,rule,thr);
    var grid=res.grid, P=res.P;

    // temporal sequences: N cells × P steps
    var tempSeqs=[];
    for(var i=0;i<N;i++){var s=[];for(var t2=0;t2<P;t2++) s.push(grid[t2][i]);tempSeqs.push(s);}

    var col=SYM_COLS[rule]||'#ccc';
    var sc=14;  // cell size px

    // ── binary grid canvas ──────────────────────────────────────────────────
    var gc=document.getElementById('sym-grid');
    var padL=30, padT=2;
    gc.width=padL+N*sc+4; gc.height=padT+P*sc+4;
    var gx=gc.getContext('2d');
    gx.fillStyle='#0e0e0e'; gx.fillRect(0,0,gc.width,gc.height);
    for(var t3=0;t3<P;t3++){
      var y=padT+t3*sc;
      gx.fillStyle='#333'; gx.font='9px monospace'; gx.textAlign='right';
      gx.fillText(t3,padL-3,y+sc-2);
      for(var i2=0;i2<N;i2++){
        gx.fillStyle=grid[t3][i2]?col:'#111';
        gx.fillRect(padL+i2*sc,y,sc-1,sc-1);
      }
    }

    // ── block entropy bar chart ─────────────────────────────────────────────
    var bep=symBlockH(tempSeqs,maxN);
    var topo=0;
    for(var n2=2;n2<=maxN;n2++) topo=Math.max(topo,bep[n2-1]/n2);

    var bW=120,bH=padT+P*sc+4,barH=Math.floor((bH-20)/maxN);
    var bc=document.getElementById('sym-bep');
    bc.width=bW; bc.height=bH;
    var bctx=bc.getContext('2d');
    bctx.fillStyle='#0e0e0e'; bctx.fillRect(0,0,bW,bH);
    for(var ni=0;ni<maxN;ni++){
      var n3=ni+1;
      var maxH=n3, ratio=bep[ni]/maxH;
      var yw=padT+ni*barH;
      bctx.fillStyle='#1a1a1a'; bctx.fillRect(0,yw,bW-2,barH-2);
      bctx.fillStyle=col;
      bctx.fillRect(0,yw,Math.round(ratio*(bW-2)),barH-2);
      bctx.fillStyle='#ccc'; bctx.font='9px monospace'; bctx.textAlign='left';
      bctx.fillText('H'+n3+'='+bep[ni].toFixed(2),2,yw+barH-4);
    }

    // ── transition matrix ────────────────────────────────────────────────────
    var tm=symTM(tempSeqs);
    var tc=document.getElementById('sym-tm');
    var ts=50;
    tc.width=ts*2+40; tc.height=ts*2+40;
    var tx=tc.getContext('2d');
    tx.fillStyle='#0e0e0e'; tx.fillRect(0,0,tc.width,tc.height);
    var ox=30,oy=20;
    var lbl=['0','1'];
    tx.fillStyle='#666'; tx.font='9px monospace'; tx.textAlign='center';
    tx.fillText('→',ox+ts,'8'); tx.fillText('0',ox,oy-4); tx.fillText('1',ox+ts,oy-4);
    for(var a=0;a<2;a++){
      tx.fillStyle='#666'; tx.textAlign='right';
      tx.fillText(lbl[a],ox-4,oy+a*ts+ts/2+4);
      for(var b=0;b<2;b++){
        var v=tm[a][b];
        tx.fillStyle='rgba('+[SYM_COLS[rule].replace('#','').match(/../g).map(function(h){return parseInt(h,16);}),Math.round(v*200)].flat().join(',')+')';
        // simpler: brightness by value
        var br=Math.round(v*200);
        tx.fillStyle='rgba('+br+','+br+','+br+',0.9)';
        if(a===b) tx.fillStyle=col.replace(')',','+v.toFixed(2)+')').replace('rgb','rgba').replace('#','');
        // even simpler
        tx.fillStyle='#'+Math.round(v*255).toString(16).padStart(2,'0').repeat(3);
        if(a===0&&b===0) tx.fillStyle='rgba(80,80,255,'+v.toFixed(2)+')';
        if(a===0&&b===1) tx.fillStyle='rgba(255,100,80,'+v.toFixed(2)+')';
        if(a===1&&b===0) tx.fillStyle='rgba(255,100,80,'+v.toFixed(2)+')';
        if(a===1&&b===1) tx.fillStyle='rgba(80,255,80,'+v.toFixed(2)+')';
        tx.fillRect(ox+b*ts,oy+a*ts,ts-2,ts-2);
        tx.fillStyle='#fff'; tx.font='11px monospace'; tx.textAlign='center';
        tx.fillText(v.toFixed(2),ox+b*ts+ts/2,oy+a*ts+ts/2+4);
      }
    }

    // ── stats ────────────────────────────────────────────────────────────────
    var ones=0,total=P*N;
    for(var t4=0;t4<P;t4++) for(var i3=0;i3<N;i3++) ones+=grid[t4][i3];
    var bias=(ones/total).toFixed(3);
    var tempPats=tempSeqs.map(function(s){return s.join('');});
    var uT=new Set(tempPats).size;
    var spatPats=grid.map(function(row){return row.join('');});
    var uS=new Set(spatPats).size;
    var f2=symForbidden(tempSeqs,2), f3=symForbidden(tempSeqs,3);

    document.getElementById('sym-stats').innerHTML=
      '<span style="color:'+col+'">'+rule.toUpperCase()+'</span>'
      +' P='+P+' bias='+bias
      +' unique_temp='+uT+'/'+N+' unique_spat='+uS+'/'+P
      +' forb_2='+f2+' forb_3='+f3
      +' <b>topol.h='+topo.toFixed(4)+'</b>';
  }

  document.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('sym-word');
    if(window.LEXICON_ARR){
      window.LEXICON_ARR.slice().sort().forEach(function(w){
        var o=document.createElement('option');o.value=o.text=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn   =document.getElementById('sym-btn');
    var wordEl=document.getElementById('sym-word');
    var ruleEl=document.getElementById('sym-rule');
    var thrEl =document.getElementById('sym-thr');
    if(btn)    btn.addEventListener('click',symRun);
    if(wordEl) wordEl.addEventListener('change',symRun);
    if(ruleEl) ruleEl.addEventListener('change',symRun);
    if(thrEl)  thrEl.addEventListener('change',symRun);
    setTimeout(function(){if(window.encL) symRun();},1150);
  });
})();
</script>
</div>
<div class="section">
<h2>Transfer Entropy CA Q6 — направленный поток информации</h2>
<p class="meta">T(X→Y) = H(Y_t | Y_{t-1}) − H(Y_t | Y_{t-1}, X_{t-1}) · суммируется по 6 бит-плоскостям Q6 · ненулевые значения указывают на причинные связи между клетками · для XOR/AND/OR с периодом 1 (ноль/все-единицы) TE=0 повсюду · максимум при XOR3 ТУМАН (период 8)</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="te-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <select id="te-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor">XOR ⊕</option>
    <option value="xor3" selected>XOR3</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <button id="te-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    TE-матрица</button>
  <button id="te-asym-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    Асимметрия</button>
</div>
<canvas id="te-matrix-canvas" style="display:block;margin-bottom:6px"></canvas>
<div id="te-stats" style="color:#ccc;font-family:monospace;font-size:12px;margin-bottom:6px"></div>
<script>
(function(){
  var TE_COLS = {xor:'#f55',xor3:'#4dd',and:'#7d7',or:'#fa0'};
  var N_BITS  = 6;

  function teStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }

  function teOrbitStates(cells0,rule){
    var seen={},c=cells0.slice(),t=0;
    for(;;){
      var key=c.join(',');
      if(key in seen){
        var T=seen[key], P=t-T;
        P=Math.max(P,1);
        var c2=cells0.slice();
        for(var s=0;s<T;s++) c2=teStep(c2,rule);
        var states=[];
        for(var s=0;s<P;s++){states.push(c2.slice());c2=teStep(c2,rule);}
        return states;
      }
      seen[key]=t; c=teStep(c,rule); t++;
    }
  }

  function teH(counts){
    var total=0;
    for(var k in counts) total+=counts[k];
    if(total===0) return 0;
    var h=0;
    for(var k in counts){
      if(counts[k]>0){var p=counts[k]/total; h-=p*Math.log2(p);}
    }
    return h;
  }

  function bitTE(yBits, xBits){
    var P=yBits.length;
    if(P<2) return 0;
    var cy1={}, cy1yt={}, cy1x1={}, cy1x1yt={};
    for(var t=0;t<P;t++){
      var yt=yBits[t], yt1=yBits[(t-1+P)%P], xt1=xBits[(t-1+P)%P];
      var k1=yt1, k2=yt1+','+yt, k3=yt1+','+xt1, k4=yt1+','+xt1+','+yt;
      cy1[k1]=(cy1[k1]||0)+1;
      cy1yt[k2]=(cy1yt[k2]||0)+1;
      cy1x1[k3]=(cy1x1[k3]||0)+1;
      cy1x1yt[k4]=(cy1x1yt[k4]||0)+1;
    }
    var te=(teH(cy1yt)-teH(cy1))-(teH(cy1x1yt)-teH(cy1x1));
    return Math.max(0,te);
  }

  function cellTE(orbit, i, j){
    var total=0;
    for(var b=0;b<N_BITS;b++){
      var yb=orbit.map(function(s){return (s[j]>>b)&1;});
      var xb=orbit.map(function(s){return (s[i]>>b)&1;});
      total+=bitTE(yb,xb);
    }
    return total;
  }

  function teBuildMatrix(word,rule){
    var cells=window.padL(window.encL(word.toUpperCase()),16);
    var orbit=teOrbitStates(cells,rule);
    var N=cells.length, mat=[];
    for(var i=0;i<N;i++){
      mat.push([]);
      for(var j=0;j<N;j++) mat[i].push(cellTE(orbit,i,j));
    }
    return {mat:mat, period:orbit.length};
  }

  function teAsymMatrix(mat){
    var N=mat.length, out=[];
    for(var i=0;i<N;i++){
      out.push([]);
      for(var j=0;j<N;j++) out[i].push(mat[i][j]-mat[j][i]);
    }
    return out;
  }

  var _teShowAsym = false;

  function drawTEMatrix(canvas, mat, vmax, rule, asym){
    var N=mat.length;
    var cell=16, pad=3, left=22, top=22;
    var W=left+N*cell+pad, H=top+N*cell+pad;
    canvas.width=W; canvas.height=H;
    var ctx=canvas.getContext('2d');
    ctx.fillStyle='#111'; ctx.fillRect(0,0,W,H);

    var col=TE_COLS[rule]||'#ccc';
    for(var i=0;i<N;i++){
      for(var j=0;j<N;j++){
        var v=mat[i][j];
        var alpha, r,g,b_c;
        if(asym){
          // diverging: blue negative, col positive
          if(v>=0){
            var a=Math.min(1,v/Math.max(vmax,0.001));
            r=Math.round(68+(255-68)*a);g=Math.round(221-(221)*a);b_c=Math.round(221-(221)*a);
          }else{
            var a=Math.min(1,-v/Math.max(vmax,0.001));
            r=Math.round(68-(68)*a);g=Math.round(221-(221)*a);b_c=Math.round(221+(255-221)*a);
          }
        }else{
          var a=vmax>0?Math.min(1,v/vmax):0;
          r=Math.round(0x1c+(parseInt(col.slice(1,3),16)-0x1c)*a);
          g=Math.round(0x1c+(parseInt(col.slice(3,5),16)-0x1c)*a);
          b_c=Math.round(0x1c+(parseInt(col.slice(5,7),16)-0x1c)*a);
        }
        ctx.fillStyle='rgb('+r+','+g+','+b_c+')';
        ctx.fillRect(left+j*cell,top+i*cell,cell-1,cell-1);
      }
      // row label
      ctx.fillStyle='#555'; ctx.font='9px monospace'; ctx.textAlign='right';
      ctx.fillText(i,left-2,top+i*cell+11);
    }
    // col labels
    for(var j2=0;j2<N;j2+=3){
      ctx.fillStyle='#555'; ctx.font='9px monospace'; ctx.textAlign='center';
      ctx.fillText(j2,left+j2*cell+7,top-5);
    }
  }

  function teRun(asym){
    if(!window.encL||!window.padL) return;
    _teShowAsym=!!asym;
    var word=(document.getElementById('te-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('te-rule').value||'xor3';
    var canvas=document.getElementById('te-matrix-canvas');
    var statsDiv=document.getElementById('te-stats');

    var res=teBuildMatrix(word,rule);
    var mat=res.mat, period=res.period, N=mat.length;
    var dispMat=mat;
    if(asym) dispMat=teAsymMatrix(mat);

    var vmax=0;
    for(var i=0;i<N;i++) for(var j=0;j<N;j++){
      var v=Math.abs(dispMat[i][j]);
      if(v>vmax) vmax=v;
    }
    drawTEMatrix(canvas,dispMat,vmax,rule,!!asym);

    // Stats
    var rightTE=0,leftTE=0,selfTE=0,allOff=0,cnt=0;
    for(var i2=0;i2<N;i2++){
      rightTE+=mat[(i2+1)%N][i2];
      leftTE +=mat[(i2-1+N)%N][i2];
      selfTE +=mat[i2][i2];
      for(var j2=0;j2<N;j2++) if(i2!==j2){allOff+=mat[i2][j2];cnt++;}
    }
    statsDiv.innerHTML='<span style="color:'+TE_COLS[rule]+'">'+rule.toUpperCase()+'</span>'
      +'  P='+period
      +'  max='+vmax.toFixed(4)
      +'  ср.R='+( rightTE/N).toFixed(4)
      +'  ср.L='+(leftTE/N).toFixed(4)
      +'  ср.ТЕ='+(cnt>0?allOff/cnt:0).toFixed(4)
      +(asym?'  [асимметрия  i→j − j→i]':'');
  }

  document.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('te-word');
    if(window.LEXICON_ARR){
      window.LEXICON_ARR.slice().sort().forEach(function(w){
        var o=document.createElement('option');
        o.value=o.text=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn    =document.getElementById('te-btn');
    var asymBtn=document.getElementById('te-asym-btn');
    var ruleEl =document.getElementById('te-rule');
    var wordEl =document.getElementById('te-word');
    if(btn)     btn.addEventListener('click',function(){teRun(false);});
    if(asymBtn) asymBtn.addEventListener('click',function(){teRun(true);});
    if(ruleEl)  ruleEl.addEventListener('change',function(){teRun(_teShowAsym);});
    if(wordEl)  wordEl.addEventListener('change',function(){teRun(_teShowAsym);});
    setTimeout(function(){if(window.encL) teRun(false);},1100);
  });
})();
</script>
</div>
<div class="section">
<h2>Перестановочная энтропия CA Q6 — порядковая сложность</h2>
<p class="meta">nPE_m = H(ординальные паттерны) / log₂(m!) · окна длины m по циклической траектории аттрактора · ранговый порядок с устойчивой сортировкой · период=1 → nPE=0 · период=2 m=2 → nPE=1.0 (максимум) · XOR3 ТУМАН (P=8) → богатое распределение паттернов</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="pe-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <select id="pe-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor">XOR ⊕</option>
    <option value="xor3" selected>XOR3</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <label style="color:#aaa;font-size:12px">m =
    <select id="pe-m"
      style="background:#111;color:#ccc;border:1px solid #333;padding:4px 6px;font-size:12px">
      <option value="2">2</option>
      <option value="3" selected>3</option>
      <option value="4">4</option>
      <option value="5">5</option>
    </select>
  </label>
  <button id="pe-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    nPE-профиль</button>
  <button id="pe-multi-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    Heatmap m=2/3/4</button>
</div>
<canvas id="pe-canvas" style="display:block;margin-bottom:6px"></canvas>
<div id="pe-stats" style="color:#ccc;font-family:monospace;font-size:12px;margin-bottom:6px"></div>
<canvas id="pe-hmap" style="display:none;margin-top:8px"></canvas>
<script>
(function(){
  var PE_COLS={xor:'#f55',xor3:'#4dd',and:'#7d7',or:'#fa0'};
  var PE_RGB ={xor:[255,85,85],xor3:[68,221,221],and:[119,221,119],or:[255,170,0]};
  var ALL_RULES=['xor','xor3','and','or'];
  var RNAMES={xor:'XOR \u2295',xor3:'XOR3',and:'AND \u0026',or:'OR |'};

  function peStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }

  function peOrbit(cells0,rule){
    var seen={},c=cells0.slice(),t=0;
    for(;;){
      var key=c.join(',');
      if(key in seen){
        var T=seen[key],P=t-T; P=Math.max(P,1);
        var c2=cells0.slice();
        for(var s=0;s<T;s++) c2=peStep(c2,rule);
        var states=[];
        for(var s=0;s<P;s++){states.push(c2.slice());c2=peStep(c2,rule);}
        return states;
      }
      seen[key]=t; c=peStep(c,rule); t++;
    }
  }

  function ordinalPattern(window){
    var m=window.length;
    var idx=[];
    for(var i=0;i<m;i++) idx.push(i);
    idx.sort(function(a,b){return window[a]!==window[b]?window[a]-window[b]:a-b;});
    var ranks=new Array(m);
    for(var r=0;r<m;r++) ranks[idx[r]]=r;
    return ranks.join(',');
  }

  function permEntropy(series,m){
    var P=series.length;
    if(P<1||m<2) return 0;
    var counts={};
    for(var t=0;t<P;t++){
      var win=[];
      for(var k=0;k<m;k++) win.push(series[(t+k)%P]);
      var pat=ordinalPattern(win);
      counts[pat]=(counts[pat]||0)+1;
    }
    var total=P,pe=0;
    for(var k in counts){
      if(counts[k]>0){var p=counts[k]/total; pe-=p*Math.log2(p);}
    }
    var maxPe=Math.log2(factorial(m));
    return maxPe>0?Math.max(0,pe/maxPe):0;
  }

  function factorial(n){var f=1;for(var i=2;i<=n;i++)f*=i;return f;}

  function spatialPE(orbit,m){
    var N=orbit[0].length, result=[];
    for(var i=0;i<N;i++){
      var series=orbit.map(function(s){return s[i];});
      result.push(permEntropy(series,m));
    }
    return result;
  }

  function drawPEProfile(canvas,profile,rule,period,m){
    var N=profile.length;
    var padL=10,padR=10,padT=14,padB=22;
    var W=Math.max(320,N*20+padL+padR), H=160;
    canvas.width=W; canvas.height=H;
    var ctx=canvas.getContext('2d');
    var rgb=PE_RGB[rule]||[128,128,128];
    ctx.fillStyle='#111'; ctx.fillRect(0,0,W,H);
    var chartW=W-padL-padR, chartH=H-padT-padB;
    var barW=Math.floor(chartW/N)-1;

    // 50% line
    var y50=padT+chartH*0.5;
    ctx.strokeStyle='rgba(128,128,128,0.4)'; ctx.lineWidth=1;
    ctx.setLineDash([3,3]);
    ctx.beginPath(); ctx.moveTo(padL,y50); ctx.lineTo(W-padR,y50); ctx.stroke();
    ctx.setLineDash([]);

    for(var i=0;i<N;i++){
      var f=profile[i];
      var x=padL+i*(chartW/N);
      var bH=Math.round(f*chartH);
      var a=Math.max(0.1,f);
      var cr=Math.round(rgb[0]*a+0x1c*(1-a));
      var cg=Math.round(rgb[1]*a+0x1c*(1-a));
      var cb=Math.round(rgb[2]*a+0x1c*(1-a));
      ctx.fillStyle='rgb('+cr+','+cg+','+cb+')';
      ctx.fillRect(x,padT+chartH-bH,barW,bH);
      ctx.fillStyle='#555'; ctx.font='9px monospace'; ctx.textAlign='center';
      ctx.fillText(i,x+barW/2,H-padB+10);
    }
  }

  function peRun(){
    if(!window.encL||!window.padL) return;
    var word=(document.getElementById('pe-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('pe-rule').value||'xor3';
    var m=parseInt(document.getElementById('pe-m').value||'3',10);
    var canvas=document.getElementById('pe-canvas');
    var statsDiv=document.getElementById('pe-stats');

    var cells=window.padL(window.encL(word),16);
    var orbit=peOrbit(cells,rule);
    var profile=spatialPE(orbit,m);
    var meanPE=profile.reduce(function(a,b){return a+b;},0)/profile.length;
    var maxPE=Math.max.apply(null,profile);
    var maxPat=Math.min(orbit.length,factorial(m));

    drawPEProfile(canvas,profile,rule,orbit.length,m);
    document.getElementById('pe-hmap').style.display='none';
    statsDiv.innerHTML='<span style="color:'+PE_COLS[rule]+'">'+rule.toUpperCase()+'</span>'
      +'  P='+orbit.length+'  m='+m
      +'  ср.nPE='+meanPE.toFixed(4)
      +'  max.nPE='+maxPE.toFixed(4)
      +'  max_pat='+maxPat;
  }

  function peHmapRun(){
    if(!window.encL||!window.padL||!window.LEXICON_ARR) return;
    var words=window.LEXICON_ARR.slice().sort();
    var mVals=[2,3,4];
    var cellW=13,cellH=14,leftPad=54,topPad=65;
    var hmCv=document.getElementById('pe-hmap');
    var nRows=ALL_RULES.length*mVals.length;
    hmCv.width=leftPad+words.length*cellW+4;
    hmCv.height=topPad+nRows*cellH+4;
    var ctx=hmCv.getContext('2d');
    ctx.fillStyle='#111'; ctx.fillRect(0,0,hmCv.width,hmCv.height);
    ctx.save(); ctx.font='9px monospace'; ctx.fillStyle='#999';
    for(var wi=0;wi<words.length;wi++){
      ctx.save();
      ctx.translate(leftPad+wi*cellW+cellW/2,topPad-4);
      ctx.rotate(-Math.PI/2); ctx.textAlign='left';
      ctx.fillText(words[wi],0,0); ctx.restore();
    }
    ctx.restore();
    var row=0;
    for(var ri=0;ri<ALL_RULES.length;ri++){
      var rule2=ALL_RULES[ri];
      var rgb2=PE_RGB[rule2]||[128,128,128];
      for(var mi=0;mi<mVals.length;mi++){
        var m2=mVals[mi];
        ctx.textAlign='right'; ctx.font='10px monospace';
        ctx.fillStyle=PE_COLS[rule2];
        ctx.fillText(RNAMES[rule2]+' m='+m2,leftPad-4,topPad+row*cellH+cellH-3);
        for(var wi2=0;wi2<words.length;wi2++){
          var cells2=window.padL(window.encL(words[wi2]),16);
          var orbit2=peOrbit(cells2,rule2);
          var prof2=spatialPE(orbit2,m2);
          var mp=prof2.reduce(function(a,b){return a+b;},0)/prof2.length;
          var a=mp;
          var cr=Math.round(rgb2[0]*a+0x1c*(1-a));
          var cg=Math.round(rgb2[1]*a+0x1c*(1-a));
          var cb=Math.round(rgb2[2]*a+0x1c*(1-a));
          ctx.fillStyle='rgb('+cr+','+cg+','+cb+')';
          ctx.fillRect(leftPad+wi2*cellW,topPad+row*cellH,cellW-1,cellH-1);
        }
        row++;
      }
    }
    hmCv.style.display='block';
  }

  document.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('pe-word');
    if(window.LEXICON_ARR){
      window.LEXICON_ARR.slice().sort().forEach(function(w){
        var o=document.createElement('option');
        o.value=o.text=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn   =document.getElementById('pe-btn');
    var hmBtn =document.getElementById('pe-multi-btn');
    var ruleEl=document.getElementById('pe-rule');
    var wordEl=document.getElementById('pe-word');
    var mEl   =document.getElementById('pe-m');
    if(btn)    btn.addEventListener('click',peRun);
    if(hmBtn)  hmBtn.addEventListener('click',peHmapRun);
    if(ruleEl) ruleEl.addEventListener('change',peRun);
    if(wordEl) wordEl.addEventListener('change',peRun);
    if(mEl)    mEl.addEventListener('change',peRun);
    setTimeout(function(){if(window.encL) peRun();},1150);
  });
})();
</script>
</div>
<div class="section">
<h2>Бассейн аттрактора CA Q6 — профиль устойчивости</h2>
<p class="meta">Для каждого k = 0..max_k: случайно переворачивается ровно k бит из 96 (16 клеток × 6 бит) → доля выборок, попавших в тот же аттрактор · k=0 ≡ 1.0 (само слово) · XOR: глобальный бассейн «ноль» → доля ≈ 1.0 · XOR3: узкие частные бассейны → резкий обрыв · пунктир = порог 50%</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="ba-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <select id="ba-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor">XOR ⊕</option>
    <option value="xor3" selected>XOR3</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <label style="color:#aaa;font-size:12px">max k =
    <select id="ba-maxk"
      style="background:#111;color:#ccc;border:1px solid #333;padding:4px 6px;font-size:12px">
      <option value="12">12</option>
      <option value="18" selected>18</option>
      <option value="24">24</option>
      <option value="48">48</option>
    </select>
  </label>
  <label style="color:#aaa;font-size:12px">n/k =
    <select id="ba-n"
      style="background:#111;color:#ccc;border:1px solid #333;padding:4px 6px;font-size:12px">
      <option value="30">30</option>
      <option value="50" selected>50</option>
      <option value="100">100</option>
    </select>
  </label>
  <button id="ba-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    Бассейн</button>
  <button id="ba-hmap-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    Heatmap (лексикон)</button>
</div>
<canvas id="ba-canvas" style="display:block;margin-bottom:6px"></canvas>
<div id="ba-stats" style="color:#ccc;font-family:monospace;font-size:12px;margin-bottom:6px"></div>
<canvas id="ba-hmap" style="display:none;margin-top:8px"></canvas>
<script>
(function(){
  var BA_COLS = {xor:'#f55',xor3:'#4dd',and:'#7d7',or:'#fa0'};
  var BA_RGB  = {xor:[255,85,85],xor3:[68,221,221],and:[119,221,119],or:[255,170,0]};
  var ALL_RULES=['xor','xor3','and','or'];
  var RNAMES  = {xor:'XOR \u2295',xor3:'XOR3',and:'AND \u0026',or:'OR |'};
  var N_BITS  = 6;

  function baStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }

  function baOrbit(cells0,rule){
    var seen={},c=cells0.slice(),t=0;
    for(;;){
      var key=c.join(',');
      if(key in seen) return {transient:seen[key],period:t-seen[key]};
      seen[key]=t; c=baStep(c,rule); t++;
    }
  }

  function baAttractorSig(cells,rule){
    var orb=baOrbit(cells.slice(),rule);
    var T=orb.transient,P=Math.max(orb.period,1),c=cells.slice();
    for(var t=0;t<T;t++) c=baStep(c,rule);
    var states=[];
    for(var t=0;t<P;t++){states.push(c.join(','));c=baStep(c,rule);}
    return states.sort().join('|');
  }

  // Partial Fisher-Yates to sample k positions without replacement
  function baFlipK(cells,k){
    var total=cells.length*N_BITS;
    var pos=[];
    for(var i=0;i<total;i++) pos.push(i);
    for(var i=0;i<k && i<total;i++){
      var j=i+Math.floor(Math.random()*(total-i));
      var tmp=pos[i];pos[i]=pos[j];pos[j]=tmp;
    }
    var result=cells.slice();
    var mask=(1<<N_BITS)-1;
    for(var i=0;i<Math.min(k,total);i++){
      var ci=Math.floor(pos[i]/N_BITS),bi=pos[i]%N_BITS;
      result[ci]=(result[ci]^(1<<bi))&mask;
    }
    return result;
  }

  function baProfile(word,rule,maxK,nPerK){
    var cells=window.padL(window.encL(word.toUpperCase()),16);
    var tgtSig=baAttractorSig(cells,rule);
    var profile=[1.0];
    for(var k=1;k<=maxK;k++){
      var hits=0;
      for(var n=0;n<nPerK;n++){
        var ic=baFlipK(cells,k);
        if(baAttractorSig(ic,rule)===tgtSig) hits++;
      }
      profile.push(hits/nPerK);
    }
    return profile;
  }

  function baGlobalSample(word,rule,nSamples){
    var cells=window.padL(window.encL(word.toUpperCase()),16);
    var tgtSig=baAttractorSig(cells,rule);
    var hits=0;
    for(var n=0;n<nSamples;n++){
      var ic=cells.slice().map(function(){return Math.floor(Math.random()*64);});
      if(baAttractorSig(ic,rule)===tgtSig) hits++;
    }
    return hits/nSamples;
  }

  function drawBasinChart(canvas,profile,rule){
    var maxK=profile.length-1;
    var padL=10,padR=10,padT=14,padB=28;
    var W=Math.max(360,Math.min(600,(maxK+1)*22+padL+padR));
    var H=160;
    canvas.width=W; canvas.height=H;
    var ctx=canvas.getContext('2d');
    var rgb=BA_RGB[rule]||[128,128,128];
    ctx.fillStyle='#111'; ctx.fillRect(0,0,W,H);

    var chartW=W-padL-padR, chartH=H-padT-padB;
    var barW=Math.max(3,Math.floor(chartW/(maxK+1))-1);
    var col50='rgba(128,128,128,0.4)';

    // 50% line
    var y50=padT+chartH*(1-0.5);
    ctx.strokeStyle=col50; ctx.lineWidth=1;
    ctx.setLineDash([4,3]);
    ctx.beginPath(); ctx.moveTo(padL,y50); ctx.lineTo(W-padR,y50); ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle='#555'; ctx.font='9px monospace'; ctx.textAlign='left';
    ctx.fillText('0.5',W-padR-18,y50-2);

    // bars
    var k50=-1;
    for(var k=0;k<=maxK;k++){
      var f=profile[k];
      if(k>0 && k50<0 && f<0.5) k50=k;
      var x=padL+k*(chartW/(maxK+1));
      var bH=Math.round(f*chartH);
      var a=Math.max(0.15,f);
      ctx.fillStyle='rgba('+Math.round(rgb[0]*a+0x1c*(1-a))+','
                           +Math.round(rgb[1]*a+0x1c*(1-a))+','
                           +Math.round(rgb[2]*a+0x1c*(1-a))+',1)';
      ctx.fillRect(x,padT+chartH-bH,barW,bH);
      // x label
      if(k%3===0){
        ctx.fillStyle='#666'; ctx.font='9px monospace'; ctx.textAlign='center';
        ctx.fillText(k,x+barW/2,H-padB+10);
      }
    }
    // k50 marker
    if(k50>0){
      var xk=padL+k50*(chartW/(maxK+1));
      ctx.strokeStyle=BA_COLS[rule]; ctx.lineWidth=1;
      ctx.beginPath(); ctx.moveTo(xk,padT); ctx.lineTo(xk,H-padB); ctx.stroke();
      ctx.fillStyle=BA_COLS[rule]; ctx.font='9px monospace'; ctx.textAlign='left';
      ctx.fillText('k\u2085\u2080='+k50,xk+2,padT+10);
    }
  }

  function baRun(){
    if(!window.encL||!window.padL) return;
    var word=(document.getElementById('ba-word').value||'ГОРА').toUpperCase();
    var rule=document.getElementById('ba-rule').value||'xor3';
    var maxK=parseInt(document.getElementById('ba-maxk').value||'18',10);
    var nPerK=parseInt(document.getElementById('ba-n').value||'50',10);
    var canvas=document.getElementById('ba-canvas');
    var statsDiv=document.getElementById('ba-stats');

    var profile=baProfile(word,rule,maxK,nPerK);
    drawBasinChart(canvas,profile,rule);

    var meanP=profile.slice(1).reduce(function(a,b){return a+b;},0)/maxK;
    var k50=-1;
    for(var k=1;k<=maxK;k++) if(profile[k]<0.5){k50=k;break;}
    var gbFrac=baGlobalSample(word,rule,nPerK);
    statsDiv.innerHTML='<span style="color:'+BA_COLS[rule]+'">'+RNAMES[rule]+'</span>'
      +'  k\u2085\u2080='+(k50<0?'&gt;'+maxK:k50)
      +'  ср.профиль='+meanP.toFixed(3)
      +'  глобальный бассейн='+gbFrac.toFixed(3)
      +' ('+nPerK+' случ. ИУ)';
  }

  function baHmapRun(){
    if(!window.encL||!window.padL||!window.LEXICON_ARR) return;
    var words=window.LEXICON_ARR.slice().sort();
    var nPerK=parseInt(document.getElementById('ba-n').value||'50',10);
    var cellW=13,cellH=18,leftPad=54,topPad=75;
    var hmCv=document.getElementById('ba-hmap');
    hmCv.width=leftPad+words.length*cellW+4;
    hmCv.height=topPad+ALL_RULES.length*cellH+4;
    var ctx=hmCv.getContext('2d');
    ctx.fillStyle='#111'; ctx.fillRect(0,0,hmCv.width,hmCv.height);

    ctx.save(); ctx.font='9px monospace'; ctx.fillStyle='#999';
    for(var wi=0;wi<words.length;wi++){
      ctx.save();
      ctx.translate(leftPad+wi*cellW+cellW/2,topPad-4);
      ctx.rotate(-Math.PI/2); ctx.textAlign='left';
      ctx.fillText(words[wi],0,0); ctx.restore();
    }
    ctx.restore();
    ctx.textAlign='right'; ctx.font='11px monospace';
    for(var ri=0;ri<ALL_RULES.length;ri++){
      ctx.fillStyle=BA_COLS[ALL_RULES[ri]];
      ctx.fillText(RNAMES[ALL_RULES[ri]],leftPad-4,topPad+ri*cellH+cellH-3);
    }
    for(var ri2=0;ri2<ALL_RULES.length;ri2++){
      var rule2=ALL_RULES[ri2];
      var rgb2=BA_RGB[rule2]||[128,128,128];
      for(var wi2=0;wi2<words.length;wi2++){
        // use global basin fraction as color intensity
        var gbFrac2=baGlobalSample(words[wi2],rule2,nPerK);
        var a=gbFrac2;
        var cr=Math.round(rgb2[0]*a+0x1c*(1-a));
        var cg=Math.round(rgb2[1]*a+0x1c*(1-a));
        var cb=Math.round(rgb2[2]*a+0x1c*(1-a));
        ctx.fillStyle='rgb('+cr+','+cg+','+cb+')';
        ctx.fillRect(leftPad+wi2*cellW,topPad+ri2*cellH,cellW-1,cellH-1);
      }
    }
    hmCv.style.display='block';
  }

  document.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('ba-word');
    if(window.LEXICON_ARR){
      window.LEXICON_ARR.slice().sort().forEach(function(w){
        var o=document.createElement('option');
        o.value=o.text=w; if(w==='\u0413\u041e\u0420\u0410') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('ba-btn');
    var hmBtn=document.getElementById('ba-hmap-btn');
    var ruleEl=document.getElementById('ba-rule');
    var wordEl=document.getElementById('ba-word');
    if(btn)    btn.addEventListener('click',baRun);
    if(hmBtn)  hmBtn.addEventListener('click',baHmapRun);
    if(ruleEl) ruleEl.addEventListener('change',baRun);
    if(wordEl) wordEl.addEventListener('change',baRun);
    setTimeout(function(){if(window.encL) baRun();},1200);
  });
})();
</script>
</div>
<div class="section">
<h2>Сеть информационного потока Q6 — PageRank и СКС аттрактора</h2>
<p class="meta">Граф TE[i→j] на периодическом аттракторе · узлы = клетки CA (16) на окружности · толщина дуги ∝ TE[i→j] · размер узла ∝ PageRank · тёплый=источник (net_flow&gt;0) / холодный=сток · СКС = сильно связные компоненты (алгоритм Тарьяна) · XOR/AND/OR с P=1: TE=0 → тривиальная сеть</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="net-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <select id="net-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor">XOR ⊕</option>
    <option value="xor3" selected>XOR3</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <button id="net-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    Сеть</button>
</div>
<div style="display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap">
  <canvas id="net-graph" style="display:block"></canvas>
  <canvas id="net-bars"  style="display:block"></canvas>
</div>
<div id="net-stats" style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"></div>
<script>
(function(){
  var NET_COLS={xor:'#f55',xor3:'#4dd',and:'#7d7',or:'#fa0'};

  function netStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }

  function netOrbit(cells0,rule){
    var seen={},c=cells0.slice(),t=0;
    for(;;){var key=c.join(',');if(key in seen) return {T:seen[key],P:t-seen[key]};seen[key]=t;c=netStep(c,rule);t++;}
  }

  function netGrid(cells,rule){
    var info=netOrbit(cells.slice(),rule);
    var T=info.T,P=Math.max(info.P,1);
    var c=cells.slice();
    for(var i=0;i<T;i++) c=netStep(c,rule);
    var grid=[];
    for(var i=0;i<P;i++){grid.push(c.slice());c=netStep(c,rule);}
    return {grid:grid,T:T,P:P};
  }

  function netH(counts){
    var total=0;
    Object.values(counts).forEach(function(v){total+=v;});
    if(!total) return 0;
    return -Object.values(counts).reduce(function(h,v){var p=v/total;return h+(p>0?p*Math.log2(p):0);},0);
  }

  function netCellTE(orbit,i,j){
    var P=orbit.length;
    var yy={},y={},xyy={},xy={};
    for(var t=0;t<P;t++){
      var xt=orbit[t][i],yt=orbit[t][j],yt1=orbit[(t+1)%P][j];
      var k1=yt+','+yt1; yy[k1]=(yy[k1]||0)+1; y[yt]=(y[yt]||0)+1;
      var k2=xt+','+yt+','+yt1; xyy[k2]=(xyy[k2]||0)+1;
      var k3=xt+','+yt;         xy[k3]=(xy[k3]||0)+1;
    }
    var Hyy=netH(yy),Hy=netH(y),Hxyy=netH(xyy),Hxy=netH(xy);
    return Math.max(0,(Hyy-Hy)-(Hxyy-Hxy));
  }

  function netTEMatrix(orbit,N){
    var mat=Array.from({length:N},function(){return new Array(N).fill(0);});
    for(var j=0;j<N;j++) for(var i=0;i<N;i++) mat[i][j]=netCellTE(orbit,i,j);
    return mat;
  }

  function netPageRank(mat,N){
    var damp=0.85,iters=80;
    var trans=mat.map(function(row){
      var s=row.reduce(function(a,b){return a+b;},0);
      return s>0?row.map(function(v){return v/s;}):new Array(N).fill(1/N);
    });
    var pr=new Array(N).fill(1/N),base=(1-damp)/N;
    for(var k=0;k<iters;k++){
      var np=new Array(N).fill(base);
      for(var i=0;i<N;i++) for(var j=0;j<N;j++) np[j]+=damp*pr[i]*trans[i][j];
      pr=np;
    }
    return pr;
  }

  function netSCC(mat,N){
    var idx=new Array(N).fill(-1),low=new Array(N).fill(0),onSt=new Array(N).fill(false);
    var st=[],cnt=[0],sccs=[];
    function connect(v){
      idx[v]=low[v]=cnt[0]++;st.push(v);onSt[v]=true;
      for(var w=0;w<N;w++){
        if(mat[v][w]>0){
          if(idx[w]<0){connect(w);low[v]=Math.min(low[v],low[w]);}
          else if(onSt[w]) low[v]=Math.min(low[v],idx[w]);
        }
      }
      if(low[v]===idx[v]){
        var scc=[];
        do{var w2=st.pop();onSt[w2]=false;scc.push(w2);}while(w2!==v);
        sccs.push(scc);
      }
    }
    for(var v=0;v<N;v++) if(idx[v]<0) connect(v);
    return sccs.sort(function(a,b){return b.length-a.length;});
  }

  function netRun(){
    if(!window.encL||!window.padL) return;
    var word=(document.getElementById('net-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('net-rule').value||'xor3';
    var N=16;
    var cells=window.padL(window.encL(word),N);
    var res=netGrid(cells,rule);
    var orbit=res.grid,P=res.P;
    var col=NET_COLS[rule]||'#ccc';

    var te=netTEMatrix(orbit,N);
    var totalTE=te.reduce(function(s,row){return s+row.reduce(function(a,b){return a+b;},0);},0);
    var maxTE=0;
    for(var i=0;i<N;i++) for(var j=0;j<N;j++) if(te[i][j]>maxTE) maxTE=te[i][j];

    var inW=new Array(N).fill(0),outW=new Array(N).fill(0);
    for(var i=0;i<N;i++) for(var j=0;j<N;j++){inW[j]+=te[i][j];outW[i]+=te[i][j];}
    var nfW=inW.map(function(iw,i){return outW[i]-iw;});
    var maxAbsNF=nfW.reduce(function(m,v){return Math.max(m,Math.abs(v));},1e-9);

    var pr=netPageRank(te,N);
    var maxPR=pr.reduce(function(m,v){return Math.max(m,v);},1e-9);
    var sccs=netSCC(te,N);
    var nSCCs=sccs.length,bigSCC=sccs[0]?sccs[0].length:0;

    // circular graph
    var GS=320,gc=document.getElementById('net-graph');
    gc.width=GS;gc.height=GS;
    var gx=gc.getContext('2d');
    gx.fillStyle='#0e0e0e';gx.fillRect(0,0,GS,GS);
    var cx=GS/2,cy=GS/2,Rc=GS*0.36;
    var pos=[];
    for(var i=0;i<N;i++){var a=(2*Math.PI*i/N)-Math.PI/2;pos.push([cx+Rc*Math.cos(a),cy+Rc*Math.sin(a)]);}
    if(maxTE>1e-6){
      for(var i=0;i<N;i++){
        for(var j=0;j<N;j++){
          if(i===j||te[i][j]<1e-4) continue;
          var str=te[i][j]/maxTE;
          gx.globalAlpha=str*0.65;gx.strokeStyle=col;gx.lineWidth=Math.max(0.5,str*2.5);
          var xi=pos[i][0],yi=pos[i][1],xj=pos[j][0],yj=pos[j][1];
          var mx=(xi+xj)/2*0.82+cx*0.18,my=(yi+yj)/2*0.82+cy*0.18;
          gx.beginPath();gx.moveTo(xi,yi);gx.quadraticCurveTo(mx,my,xj,yj);gx.stroke();
          var dx=xj-mx,dy=yj-my,len=Math.sqrt(dx*dx+dy*dy)||1,aS=3*str+1;
          var ux=dx/len,uy=dy/len;
          gx.beginPath();
          gx.moveTo(xj-ux*aS+uy*aS*0.5,yj-uy*aS-ux*aS*0.5);
          gx.lineTo(xj,yj);
          gx.lineTo(xj-ux*aS-uy*aS*0.5,yj-uy*aS+ux*aS*0.5);
          gx.stroke();
        }
      }
    }
    gx.globalAlpha=1;
    for(var i=0;i<N;i++){
      var nfr=nfW[i]/maxAbsNF;
      var nr=5+(pr[i]/maxPR)*9;
      var nc=nfr>0.05?'rgba(255,120,50,0.92)':nfr<-0.05?'rgba(60,140,255,0.92)':'rgba(130,130,130,0.85)';
      gx.beginPath();gx.arc(pos[i][0],pos[i][1],nr,0,2*Math.PI);
      gx.fillStyle=nc;gx.fill();
      gx.strokeStyle='rgba(255,255,255,0.35)';gx.lineWidth=0.5;gx.stroke();
      gx.fillStyle='#fff';gx.font='8px monospace';gx.textAlign='center';
      gx.fillText(i,pos[i][0],pos[i][1]+3);
    }

    // bar chart out/in
    var BW=200,BH=GS,bh=Math.floor((BH-10)/N);
    var bc=document.getElementById('net-bars');
    bc.width=BW;bc.height=BH;
    var bx=bc.getContext('2d');
    bx.fillStyle='#0e0e0e';bx.fillRect(0,0,BW,BH);
    var maxB=Math.max(outW.reduce(function(m,v){return Math.max(m,v);},0),inW.reduce(function(m,v){return Math.max(m,v);},0),1e-9);
    for(var i=0;i<N;i++){
      var y0=5+i*bh;
      bx.fillStyle='rgba(255,120,50,0.75)';
      bx.fillRect(0,y0,Math.round(outW[i]/maxB*(BW/2-4)),bh-2);
      bx.fillStyle='rgba(60,140,255,0.75)';
      bx.fillRect(BW/2,y0,Math.round(inW[i]/maxB*(BW/2-4)),bh-2);
      bx.fillStyle='#888';bx.font='8px monospace';bx.textAlign='left';
      bx.fillText(i,2,y0+bh-2);
    }
    bx.fillStyle='#555';bx.font='8px monospace';bx.textAlign='center';
    bx.fillText('out',BW/4,BH-1);bx.fillText('in',BW*3/4,BH-1);

    var topSrc=nfW.map(function(v,i){return[i,v];}).sort(function(a,b){return b[1]-a[1];}).slice(0,3).map(function(x){return x[0];});
    var topSnk=nfW.map(function(v,i){return[i,v];}).sort(function(a,b){return a[1]-b[1];}).slice(0,3).map(function(x){return x[0];});
    document.getElementById('net-stats').innerHTML=
      '<span style="color:'+col+'">'+rule.toUpperCase()+'</span>'
      +' P='+P+' total_TE='+totalTE.toFixed(2)
      +' SCCs='+nSCCs+' largest='+bigSCC
      +' <span style="color:#f84">sources=['+topSrc+']</span>'
      +' <span style="color:#48f">sinks=['+topSnk+']</span>';
  }

  document.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('net-word');
    if(window.LEXICON_ARR){
      window.LEXICON_ARR.slice().sort().forEach(function(w){
        var o=document.createElement('option');o.value=o.text=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('net-btn');
    var wordEl=document.getElementById('net-word');
    var ruleEl=document.getElementById('net-rule');
    if(btn)    btn.addEventListener('click',netRun);
    if(wordEl) wordEl.addEventListener('change',netRun);
    if(ruleEl) ruleEl.addEventListener('change',netRun);
    setTimeout(function(){if(window.encL) netRun();},1250);
  });
})();
</script>
</div>
<div class="section">
<h2>Ляпунов CA Q6 — расходимость траекторий</h2>
<p class="meta">Однобитовые возмущения начального состояния (96 вариантов) → среднее Хэмминг-расстояние d(t) между оригинальной и возмущённой траекториями · пик = «максимальная чувствительность» · ↓ = сходится к 0</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="lya-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <span style="color:#333;font-size:13px">или</span>
  <input id="lya-custom" type="text" placeholder="своё слово…"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;
           font-size:13px;width:120px;text-transform:uppercase"/>
  <button id="lya-btn"
    style="background:#1a1e2a;color:#ce93d8;border:1px solid #4a3a6a;
           padding:5px 14px;cursor:pointer;font-size:13px">Ляпунов</button>
</div>
<canvas id="lya-canvas" width="700" height="360"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<canvas id="lya-hmap" width="700" height="70"
  style="display:block;border:1px solid #1a1a1a;margin-top:3px"></canvas>
<div id="lya-info"
  style="font-family:monospace;font-size:11px;color:#555;min-height:16px;margin-top:5px"> </div>
<script>
(function(){
  var LYA_MAX_STEPS = 32;
  var LYA_RULES     = ['xor','xor3','and','or'];
  var LYA_COLORS    = {'xor':'#f55','xor3':'#4dd','and':'#7d7','or':'#fa0'};
  var LYA_NAMES     = {'xor':'XOR ⊕','xor3':'XOR3','and':'AND &','or':'OR |'};
  var LYA_SEGS      = ['T','B','L','R','D1','D2'];
  var LYA_SEG_COL   = ['#f44','#f90','#dd0','#3c3','#0cf','#a4f'];

  // ── Q6 bit Hamming distance ────────────────────────────────────────────────
  function q6Ham(a, b) {
    var x = a ^ b, c = 0;
    while (x) { c += x & 1; x >>= 1; }
    return c;
  }
  function stateDist(s1, s2) {
    var d = 0;
    for (var i = 0; i < s1.length; i++) d += q6Ham(s1[i], s2[i]);
    return d;
  }

  // ── CA step ────────────────────────────────────────────────────────────────
  function caStep(cells, rule) {
    var n = cells.length, nxt = [];
    for (var i = 0; i < n; i++) {
      var l = cells[(i-1+n)%n], c = cells[i], r = cells[(i+1)%n];
      if      (rule==='xor')  nxt.push(l^r);
      else if (rule==='xor3') nxt.push(l^c^r);
      else if (rule==='and')  nxt.push(l&r);
      else                    nxt.push(l|r);
    }
    return nxt;
  }

  // ── One perturbation trajectory ────────────────────────────────────────────
  function perturbTraj(orig, ci, bit, rule) {
    var pert = orig.slice();
    pert[ci] = pert[ci] ^ (1 << bit);
    var co = orig.slice(), cp = pert.slice();
    var dists = [];
    for (var t = 0; t <= LYA_MAX_STEPS; t++) {
      dists.push(stateDist(co, cp));
      co = caStep(co, rule); cp = caStep(cp, rule);
    }
    return dists;
  }

  // ── Lyapunov profile for one word + rule ──────────────────────────────────
  function lyaProfile(cells, rule) {
    var lw = cells.length, nP = lw * 6;
    var sum  = new Array(LYA_MAX_STEPS + 1).fill(0);
    var maxD = new Array(LYA_MAX_STEPS + 1).fill(0);
    var perP = [];  // [{ci, bit, traj}]
    for (var ci = 0; ci < lw; ci++) {
      for (var b = 0; b < 6; b++) {
        var tr = perturbTraj(cells, ci, b, rule);
        for (var t = 0; t <= LYA_MAX_STEPS; t++) {
          sum[t]  += tr[t];
          if (tr[t] > maxD[t]) maxD[t] = tr[t];
        }
        perP.push({ci: ci, bit: b, traj: tr});
      }
    }
    var mean = sum.map(function(v){ return v / nP; });
    var peakStep = mean.reduce(function(pi, v, i, a){ return v > a[pi] ? i : pi; }, 0);
    var peakMean = mean[peakStep];
    var finalMean = mean[LYA_MAX_STEPS];
    return {mean: mean, maxD: maxD, peakStep: peakStep, peakMean: peakMean,
            finalMean: finalMean, converges: finalMean < 0.01, perP: perP};
  }

  // ── Draw line chart (all 4 rules) ─────────────────────────────────────────
  function drawLya(canvas, profiles) {
    var W = canvas.width, H = canvas.height;
    var ctx = canvas.getContext('2d');
    ctx.fillStyle = '#0a0a0a';
    ctx.fillRect(0, 0, W, H);
    var PAD = {t:30, b:40, l:50, r:20};
    var cW = W - PAD.l - PAD.r;
    var cH = H - PAD.t - PAD.b;
    var maxY = 0;
    LYA_RULES.forEach(function(r){ maxY = Math.max(maxY, Math.max.apply(null, profiles[r].maxD)); });
    if (!maxY) maxY = 1;

    // Grid
    ctx.strokeStyle = '#1a1a1a'; ctx.lineWidth = 1;
    for (var g = 0; g <= 4; g++) {
      var gy = PAD.t + cH - (g/4) * cH;
      ctx.beginPath(); ctx.moveTo(PAD.l, gy); ctx.lineTo(PAD.l + cW, gy); ctx.stroke();
      ctx.fillStyle = '#444'; ctx.font = '9px monospace'; ctx.textAlign = 'right';
      ctx.fillText(Math.round(maxY * g / 4), PAD.l - 4, gy + 3);
    }
    // Axes labels
    ctx.fillStyle = '#555'; ctx.font = '10px monospace'; ctx.textAlign = 'center';
    ctx.fillText('шаг t', PAD.l + cW/2, H - 6);
    ctx.save(); ctx.translate(12, PAD.t + cH/2); ctx.rotate(-Math.PI/2);
    ctx.fillText('d̄(t)', 0, 0); ctx.restore();

    // Step labels
    for (var s = 0; s <= LYA_MAX_STEPS; s += 4) {
      var sx = PAD.l + (s / LYA_MAX_STEPS) * cW;
      ctx.fillStyle = '#444'; ctx.font = '8px monospace'; ctx.textAlign = 'center';
      ctx.fillText(s, sx, H - PAD.b + 12);
      ctx.strokeStyle = '#141414'; ctx.lineWidth = 1;
      ctx.beginPath(); ctx.moveTo(sx, PAD.t); ctx.lineTo(sx, PAD.t + cH); ctx.stroke();
    }

    // Lines per rule
    LYA_RULES.forEach(function(rule) {
      var prof = profiles[rule];
      var col  = LYA_COLORS[rule];
      // Mean line
      ctx.strokeStyle = col; ctx.lineWidth = 2;
      ctx.beginPath();
      for (var t = 0; t <= LYA_MAX_STEPS; t++) {
        var px = PAD.l + (t / LYA_MAX_STEPS) * cW;
        var py = PAD.t + cH - (prof.mean[t] / maxY) * cH;
        if (t === 0) ctx.moveTo(px, py); else ctx.lineTo(px, py);
      }
      ctx.stroke();
      // Peak marker
      var ps = prof.peakStep;
      var ppx = PAD.l + (ps / LYA_MAX_STEPS) * cW;
      var ppy = PAD.t + cH - (prof.peakMean / maxY) * cH;
      ctx.fillStyle = col;
      ctx.beginPath(); ctx.arc(ppx, ppy, 4, 0, 2*Math.PI); ctx.fill();
      // Rule label (right edge)
      var ry = PAD.t + cH - (prof.mean[LYA_MAX_STEPS] / maxY) * cH;
      ctx.fillStyle = col; ctx.font = 'bold 10px monospace'; ctx.textAlign = 'left';
      ctx.fillText(LYA_NAMES[rule], PAD.l + cW + 3, ry + 3);
    });

    // Title
    ctx.fillStyle = '#888'; ctx.font = '11px monospace'; ctx.textAlign = 'left';
    ctx.fillText('Ляпунов: среднее расстояние d̄(t) после однобитового возмущения', PAD.l, 16);
  }

  // ── Draw peak sensitivity heatmap ─────────────────────────────────────────
  function drawHmap(canvas, cells, profiles) {
    var W = canvas.width, H = canvas.height;
    var ctx = canvas.getContext('2d');
    ctx.fillStyle = '#0a0a0a';
    ctx.fillRect(0, 0, W, H);
    var lw = cells.length;
    var LABEL = 50, GAP = 6, SEGH = Math.floor((H - 18) / 6);
    var colW = Math.floor((W - LABEL - GAP) / lw);

    LYA_RULES.forEach(function(rule, ri) {
      var prof = profiles[rule];
      var ps   = prof.peakStep;
      var maxV = 0;
      prof.perP.forEach(function(p){ if(p.traj[ps] > maxV) maxV = p.traj[ps]; });
    });

    // Show xor3 peak sensitivity as primary heatmap
    var prof3 = profiles['xor3'];
    var ps3   = prof3.peakStep;
    var maxV3 = 1;
    prof3.perP.forEach(function(p){ if(p.traj[ps3] > maxV3) maxV3 = p.traj[ps3]; });

    // Segment labels
    for (var b = 0; b < 6; b++) {
      var by = 18 + b * SEGH;
      ctx.fillStyle = LYA_SEG_COL[b]; ctx.font = '9px monospace'; ctx.textAlign = 'right';
      ctx.fillText(LYA_SEGS[b], LABEL - 4, by + SEGH - 2);
    }
    // Rule label top
    ctx.fillStyle = LYA_COLORS['xor3']; ctx.font = 'bold 9px monospace'; ctx.textAlign = 'left';
    ctx.fillText('Чувствительность XOR3 (пик шаг=' + ps3 + ')', LABEL, 10);

    // Heatmap cells
    prof3.perP.forEach(function(p) {
      var v   = p.traj[ps3];
      var bri = maxV3 > 0 ? v / maxV3 : 0;
      var by  = 18 + p.bit * SEGH;
      var bx  = LABEL + p.ci * colW;
      var r = Math.round(bri * 255);
      var g = Math.round(bri * 80);
      var bv = Math.round(bri * 255);
      ctx.fillStyle = 'rgb(' + r + ',' + g + ',' + bv + ')';
      ctx.fillRect(bx, by, colW - 1, SEGH - 1);
    });
  }

  // ── UI wiring ──────────────────────────────────────────────────────────────
  function populateLyaDD() {
    var sel = document.getElementById('lya-word');
    if (!sel || !window.LEXICON_ARR) return;
    window.LEXICON_ARR.forEach(function(w){
      var o = document.createElement('option');
      o.value = o.textContent = w; sel.appendChild(o);
    });
  }

  function lyaRun() {
    var wordEl = document.getElementById('lya-word');
    var custEl = document.getElementById('lya-custom');
    var canvas = document.getElementById('lya-canvas');
    var hmap   = document.getElementById('lya-hmap');
    var infoEl = document.getElementById('lya-info');
    if (!canvas) return;
    var word = (custEl && custEl.value.trim()) || (wordEl && wordEl.value) || 'ГОРА';
    var encFn = window.encL, padFn = window.padL;
    if (!encFn || !padFn) { if(infoEl) infoEl.textContent = 'Ожидание…'; return; }
    var lw    = window.LEXW || 16;
    var cells = padFn(encFn(word.toUpperCase()), lw);
    var profiles = {};
    LYA_RULES.forEach(function(r){ profiles[r] = lyaProfile(cells, r); });
    drawLya(canvas, profiles);
    if (hmap) drawHmap(hmap, cells, profiles);
    var parts = [];
    LYA_RULES.forEach(function(r){
      var p = profiles[r];
      parts.push(LYA_NAMES[r] + ': d̄=' + p.peakMean.toFixed(1) +
                 (p.converges ? '↓' : '~'));
    });
    if(infoEl) infoEl.textContent = parts.join('  ');
  }
  window.lyaRun = lyaRun;

  document.addEventListener('DOMContentLoaded', function(){
    var btn    = document.getElementById('lya-btn');
    var custEl = document.getElementById('lya-custom');
    if(btn)    btn.addEventListener('click', lyaRun);
    if(custEl) custEl.addEventListener('keydown', function(e){ if(e.key==='Enter') lyaRun(); });
    setTimeout(function(){ populateLyaDD(); if(window.encL) lyaRun(); }, 950);
  });
})();
</script>
</div>
<div class="section">
<h2>Битовые плоскости CA Q6</h2>
<p class="meta">Q6 = 6 независимых битов (T / B / L / R / D1 / D2) · каждый бит эволюционирует как отдельный 1-битный CA · цвет = сегмент, яркость = 1 (активный) / тёмный = 0</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="bit-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <span style="color:#333;font-size:13px">или</span>
  <input id="bit-custom" type="text" placeholder="своё слово…"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;
           font-size:13px;width:120px;text-transform:uppercase"/>
  <select id="bit-rule"
    style="background:#111;color:#4fc3f7;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor3">XOR3</option>
    <option value="xor">XOR ⊕</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <button id="bit-btn"
    style="background:#1a2a1e;color:#a5d6a7;border:1px solid #2a5a3a;
           padding:5px 14px;cursor:pointer;font-size:13px">Слои</button>
</div>
<canvas id="bit-canvas" width="700" height="200"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="bit-info"
  style="font-family:monospace;font-size:11px;color:#555;min-height:16px;margin-top:5px"> </div>
<script>
(function(){
  var SEGS = ['T','B','L','R','D1','D2'];
  var SEG_COLORS = ['#f44','#f90','#dd0','#3c3','#0cf','#a4f'];

  // ── One bit-plane step ─────────────────────────────────────────────────────
  function bitStep(bits, rule) {
    var n = bits.length, nxt = [];
    for (var i = 0; i < n; i++) {
      var l = bits[(i-1+n)%n], c = bits[i], r = bits[(i+1)%n];
      if      (rule === 'xor')  nxt.push(l^r);
      else if (rule === 'xor3') nxt.push(l^c^r);
      else if (rule === 'and')  nxt.push(l&r);
      else                      nxt.push(l|r);
    }
    return nxt;
  }

  // ── Orbit for 1-bit plane ──────────────────────────────────────────────────
  function bitOrbit(bits, rule) {
    var seen = {}, cur = bits.slice(), t = 0;
    while (true) {
      var k = cur.join(',');
      if (seen.hasOwnProperty(k)) return {tr: seen[k], per: t - seen[k]};
      seen[k] = t; cur = bitStep(cur, rule); t++;
    }
  }

  // ── Compute all 6 bit-plane trajectories ───────────────────────────────────
  function computeBitPlanes(word, rule) {
    var encFn = window.encL, padFn = window.padL;
    if (!encFn || !padFn) return null;
    var lw = window.LEXW || 16;
    var cells = padFn(encFn(word.toUpperCase()), lw);
    var planes = [];
    for (var b = 0; b < 6; b++) {
      var init = cells.map(function(c){ return (c>>b)&1; });
      var orb  = bitOrbit(init, rule);
      var rows = [], cur = init.slice();
      var n = orb.tr + orb.per;
      for (var i = 0; i < n; i++) { rows.push(cur.slice()); cur = bitStep(cur, rule); }
      var attrVals = rows.slice(orb.tr).reduce(function(a,r){ return a.concat(r); }, []);
      var active = attrVals.some(function(v){ return v; });
      planes.push({seg: SEGS[b], tr: orb.tr, per: orb.per, rows: rows, active: active});
    }
    return planes;
  }

  // ── Draw ───────────────────────────────────────────────────────────────────
  function drawBitPlanes(planes, canvas) {
    var maxRows = 0;
    planes.forEach(function(p){ maxRows = Math.max(maxRows, p.tr + p.per); });
    var HDR = 28, CS = 9, LABEL = 36, GAP = 6;
    var lw  = window.LEXW || 16;
    var bpW = lw * CS;
    var totalW = LABEL + 6 * (bpW + GAP) + 6;
    var totalH = HDR + maxRows * CS + 12;
    canvas.width  = Math.max(700, totalW);
    canvas.height = totalH;
    var ctx = canvas.getContext('2d');
    ctx.fillStyle = '#0a0a0a';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Segment name headers
    for (var b = 0; b < 6; b++) {
      var p  = planes[b];
      var bx = LABEL + b * (bpW + GAP);
      ctx.fillStyle = p.active ? SEG_COLORS[b] : '#444';
      ctx.font = 'bold 12px monospace';
      ctx.textAlign = 'center';
      ctx.fillText(p.seg, bx + bpW/2, HDR - 6);
    }

    var maxTr = Math.max.apply(null, planes.map(function(p){ return p.tr; }));
    for (var i = 0; i < maxRows; i++) {
      // Row label
      ctx.fillStyle = i < maxTr ? '#806030' : '#307080';
      ctx.font = '8px monospace'; ctx.textAlign = 'right';
      ctx.fillText(i, LABEL - 4, HDR + i * CS + CS - 2);
      // Boundary separator
      if (i === maxTr && maxTr > 0) {
        ctx.strokeStyle = '#504020'; ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(LABEL, HDR + i * CS - 0.5);
        ctx.lineTo(canvas.width - 3, HDR + i * CS - 0.5);
        ctx.stroke();
      }
      // Cells per bit
      for (var b = 0; b < 6; b++) {
        var p  = planes[b];
        var bx = LABEL + b * (bpW + GAP);
        if (i < p.rows.length) {
          var row = p.rows[i], inAttr = i >= p.tr;
          for (var j = 0; j < row.length; j++) {
            ctx.fillStyle = row[j]
              ? (inAttr ? SEG_COLORS[b] : 'rgba(160,160,160,0.7)')
              : '#111';
            ctx.fillRect(bx + j*CS, HDR + i*CS, CS-1, CS-1);
          }
        }
      }
    }
  }

  // ── UI wiring ──────────────────────────────────────────────────────────────
  function populateBitDD() {
    var sel = document.getElementById('bit-word');
    if (!sel || !window.LEXICON_ARR) return;
    window.LEXICON_ARR.forEach(function(w){
      var o = document.createElement('option');
      o.value = o.textContent = w; sel.appendChild(o);
    });
  }

  function bitRun() {
    var wordEl = document.getElementById('bit-word');
    var custEl = document.getElementById('bit-custom');
    var ruleEl = document.getElementById('bit-rule');
    var canvas = document.getElementById('bit-canvas');
    var infoEl = document.getElementById('bit-info');
    if (!canvas) return;
    var word = (custEl && custEl.value.trim()) || (wordEl && wordEl.value) || 'ГОРА';
    var rule = ruleEl ? ruleEl.value : 'xor3';
    var planes = computeBitPlanes(word, rule);
    if (!planes) { if(infoEl) infoEl.textContent = 'Ожидание…'; return; }
    drawBitPlanes(planes, canvas);
    var actCnt = planes.filter(function(p){ return p.active; }).length;
    var parts  = ['Активных слоёв: ' + actCnt + '/6'];
    planes.forEach(function(p){ parts.push(p.seg+'[T='+p.tr+' P='+p.per+']'); });
    if(infoEl) infoEl.textContent = parts.join('  ');
  }
  window.bitRun = bitRun;

  document.addEventListener('DOMContentLoaded', function(){
    var btn    = document.getElementById('bit-btn');
    var custEl = document.getElementById('bit-custom');
    if(btn)    btn.addEventListener('click', bitRun);
    if(custEl) custEl.addEventListener('keydown', function(e){ if(e.key==='Enter') bitRun(); });
    setTimeout(function(){ populateBitDD(); if(window.encL) bitRun(); }, 900);
  });
})();
</script>
</div>
<div class="section">
<h2>Спектральный анализ Q6 — ДПФ аттрактора</h2>
<p class="meta">Пространственные частоты CA-аттрактора (k=1..8, λ=16..2 клетки)
  · Слева: AC-спектр выбранного слова · Справа: карта всего лексикона (49 слов × 8 частот)</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="spec-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <select id="spec-rule"
    style="background:#111;color:#4fc3f7;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor3">XOR3</option>
    <option value="xor">XOR ⊕</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <button id="spec-btn"
    style="background:#1a1a2e;color:#80deea;border:1px solid #2a2a5a;
           padding:5px 14px;cursor:pointer;font-size:13px">Спектр</button>
</div>
<canvas id="spec-canvas" width="700" height="460"
  style="display:block;border:1px solid #1a1a1a;cursor:crosshair"></canvas>
<div id="spec-info"
  style="font-family:monospace;font-size:11px;color:#555;min-height:16px;margin-top:5px"> </div>
<script>
(function(){
  var HALF = 8;  // N//2 for N=16
  var N_CELLS = 16;

  // ── DFT of one row ────────────────────────────────────────────────────────
  function rowSpectrum(cells) {
    var N = cells.length;
    var result = [];
    var tpi_N = 2 * Math.PI / N;
    for (var k = 0; k <= N/2; k++) {
      var re = 0, im = 0;
      for (var n = 0; n < N; n++) {
        var ang = tpi_N * k * n;
        re += cells[n] * Math.cos(ang);
        im += cells[n] * Math.sin(ang);
      }
      result.push((re*re + im*im) / (N*N));
    }
    return result;
  }

  // ── AC-normalise spectrum ─────────────────────────────────────────────────
  function acNorm(spectrum) {
    var acTotal = spectrum.slice(1).reduce(function(s,x){return s+x;},0);
    if (acTotal < 1e-12) return spectrum.map(function(){return 0;});
    return [0].concat(spectrum.slice(1).map(function(v){return v/acTotal;}));
  }

  // ── Compute attractor spectrum for one word/rule ──────────────────────────
  function computeSpectrum(word, rule) {
    var encFn = window.encL, padFn = window.padL;
    var nexFn = window.caNextRow, orbitFn = window.findOrbitJS;
    var lw = window.LEXW || 16, ls = window.LEXSTEPS || 800;
    if (!encFn) return null;
    var cells = padFn(encFn(word.toUpperCase()), lw);
    var orb   = orbitFn(cells, rule, ls);
    if (orb.transient === null) return null;
    var tr = orb.transient, per = orb.period;
    var c = cells.slice();
    // advance to attractor
    for (var i = 0; i < tr; i++) c = nexFn(c, rule);
    // average spectrum over one period
    var avg = new Array(HALF + 1).fill(0);
    var cur = c.slice();
    for (var p = 0; p < per; p++) {
      var sp = rowSpectrum(cur);
      for (var k = 0; k <= HALF; k++) avg[k] += sp[k];
      cur = nexFn(cur, rule);
    }
    for (var k = 0; k <= HALF; k++) avg[k] /= per;
    var ac = acNorm(avg);
    var domK = 1;
    for (var k = 2; k <= HALF; k++) { if (ac[k] > ac[domK]) domK = k; }
    return {
      power: avg, ac: ac, domK: domK, domWl: N_CELLS/domK,
      transient: tr, period: per,
      dc: avg[0], total: avg.reduce(function(s,x){return s+x;},0)
    };
  }

  // ── Colour palettes ───────────────────────────────────────────────────────
  var FREQ_HUE = [0, 30, 60, 120, 180, 210, 270, 310]; // hue for k=1..8
  function freqColor(k, amp) {
    var hue = FREQ_HUE[(k-1) % FREQ_HUE.length];
    var lig = Math.round(15 + amp * 55);
    return 'hsl(' + hue + ',75%,' + lig + '%)';
  }

  // ── Draw bar chart (left panel) ───────────────────────────────────────────
  var LP=10, TP=30, LW=380, LH_INNER=380;

  function drawBarChart(sp, word, rule, ctx) {
    if (!sp) return;
    var ac = sp.ac;
    var barAreaW = LW - 60, barAreaH = LH_INNER - 20;
    var barW = Math.floor(barAreaW / HALF) - 4;
    var bx0  = LP + 50;

    // Axes
    ctx.strokeStyle = '#1e1e1e'; ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(LP+48, TP+5); ctx.lineTo(LP+48, TP+barAreaH+5);
    ctx.moveTo(LP+48, TP+barAreaH+5); ctx.lineTo(LP+LW, TP+barAreaH+5);
    ctx.stroke();

    // Rule label
    var RNAMES = {xor:'XOR ⊕',xor3:'XOR3',and:'AND &',or:'OR |'};
    var RCOLS  = {xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
    ctx.font = 'bold 11px monospace';
    ctx.fillStyle = RCOLS[rule] || '#aaa';
    ctx.fillText(word + ' / ' + (RNAMES[rule]||rule), LP+52, TP-6);

    // Y-axis label
    ctx.save(); ctx.translate(LP+12, TP+barAreaH/2+30);
    ctx.rotate(-Math.PI/2); ctx.fillStyle='#222'; ctx.font='9px monospace';
    ctx.fillText('AC амплитуда', 0, 0); ctx.restore();

    for (var k = 1; k <= HALF; k++) {
      var amp = ac[k];
      var bh  = Math.round(amp * barAreaH);
      var bx  = bx0 + (k-1) * (barW + 4);
      var by  = TP + 5 + barAreaH - bh;

      // Bar
      ctx.fillStyle = freqColor(k, amp);
      if (bh > 0) ctx.fillRect(bx, by, barW, bh);

      // Dominant marker
      if (k === sp.domK) {
        ctx.strokeStyle = '#ffd54f'; ctx.lineWidth = 1.5;
        ctx.setLineDash([3,2]);
        ctx.strokeRect(bx-1, TP+4, barW+2, barAreaH+1);
        ctx.setLineDash([]);
      }

      // X labels
      ctx.font = '9px monospace'; ctx.fillStyle = '#2a2a2a';
      ctx.fillText('k='+k, bx, TP+barAreaH+16);
      ctx.fillText('λ='+(N_CELLS/k).toFixed(0), bx, TP+barAreaH+26);

      // Amplitude label (if significant)
      if (amp > 0.05) {
        ctx.fillStyle = '#444'; ctx.font = '8px monospace';
        ctx.fillText(amp.toFixed(2), bx, by-2);
      }
    }

    // Stats line
    var dcF = sp.total > 1e-12 ? sp.dc / sp.total : 1;
    ctx.font = '9px monospace'; ctx.fillStyle = '#222';
    ctx.fillText('DC=' + (dcF*100).toFixed(0) + '%  T=' + sp.transient + '  P='+sp.period,
      LP+52, TP+barAreaH+38);
  }

  // ── Draw lexicon heatmap (right panel) ────────────────────────────────────
  var RP0 = 400, RW = 290, RP_TM = 30;

  function drawLexiconMap(allSp, words, rule, selWord, ctx, canvasH) {
    if (!allSp || !words.length) return;
    var n = words.length;
    var cellH = Math.max(7, Math.floor((canvasH - RP_TM - 20) / n));
    var cellW = Math.floor((RW - 40) / HALF);

    // Header
    ctx.font = 'bold 10px monospace';
    ctx.fillStyle = '#222'; ctx.fillText('Лексикон × k (XOR3)', RP0+2, RP_TM-6);
    for (var k = 1; k <= HALF; k++) {
      ctx.fillStyle = '#1a1a1a'; ctx.font = '8px monospace';
      ctx.fillText('k'+k, RP0+36 + (k-1)*cellW, RP_TM-2);
    }

    // Sort words by dominant k then by amplitude
    var sorted = words.slice().sort(function(a, b) {
      var sa = allSp[a], sb = allSp[b];
      if (!sa || !sb) return 0;
      if (sa.domK !== sb.domK) return sa.domK - sb.domK;
      return sb.ac[sa.domK] - sa.ac[sa.domK];
    });

    sorted.forEach(function(word, ri) {
      var sp = allSp[word];
      var y  = RP_TM + ri * cellH;
      var isSelected = (word === selWord);

      // Word label
      ctx.font = isSelected ? 'bold 8px monospace' : '7px monospace';
      ctx.fillStyle = isSelected ? '#80deea' : '#1e1e1e';
      ctx.fillText(word.slice(0,6), RP0, y + cellH*0.8);

      if (!sp) return;

      for (var k = 1; k <= HALF; k++) {
        var amp = sp.ac[k];
        var cx  = RP0 + 36 + (k-1)*cellW;
        ctx.fillStyle = freqColor(k, amp);
        if (amp > 1e-4) ctx.fillRect(cx, y, cellW-1, cellH-1);
        else {
          ctx.fillStyle = '#0a0a0a';
          ctx.fillRect(cx, y, cellW-1, cellH-1);
        }
        // Dominant marker
        if (k === sp.domK) {
          ctx.strokeStyle = isSelected ? '#ffd54f' : '#1e1e1e';
          ctx.lineWidth = isSelected ? 1.5 : 0.5;
          ctx.strokeRect(cx, y, cellW-1, cellH-1);
        }
      }
    });
  }

  // ── Main draw ─────────────────────────────────────────────────────────────
  var _allSpectra = null;

  function draw(selWord, rule, canvas, ctx) {
    var W = canvas.width, H = canvas.height;
    ctx.fillStyle = '#0d0d0d';
    ctx.fillRect(0, 0, W, H);

    var sp = computeSpectrum(selWord, rule);
    drawBarChart(sp, selWord, rule, ctx);

    // Divider
    ctx.strokeStyle = '#1a1a1a'; ctx.lineWidth = 1;
    ctx.beginPath(); ctx.moveTo(395, 10); ctx.lineTo(395, H-10); ctx.stroke();

    if (!_allSpectra) {
      var lex = window.LEXICON_ARR || [];
      _allSpectra = {};
      lex.forEach(function(w){ _allSpectra[w] = computeSpectrum(w, rule); });
    }
    drawLexiconMap(_allSpectra, Object.keys(_allSpectra), rule, selWord, ctx, H);

    // Info line
    if (sp) {
      document.getElementById('spec-info').textContent =
        selWord + '/' + rule + '  T=' + sp.transient + '  P=' + sp.period
        + '  dom_k=' + sp.domK + '  λ=' + sp.domWl.toFixed(1)
        + '  dom_amp=' + sp.ac[sp.domK].toFixed(3);
    }
  }

  function run() {
    var word  = document.getElementById('spec-word').value || 'ГОРА';
    var rule  = document.getElementById('spec-rule').value;
    _allSpectra = null;  // recompute on rule change
    var canvas = document.getElementById('spec-canvas');
    draw(word, rule, canvas, canvas.getContext('2d'));
  }
  window.specRun = run;

  // ── Hover ─────────────────────────────────────────────────────────────────
  var _lastRule = 'xor3', _lastWord = 'ГОРА';
  document.getElementById('spec-canvas').addEventListener('mousemove', function(e){
    var rect = this.getBoundingClientRect();
    var mx = e.clientX - rect.left;
    var info = '';
    if (mx > 400 && _allSpectra) {
      var k = Math.floor((mx - 400 - 36) / Math.floor(250/HALF)) + 1;
      if (k >= 1 && k <= HALF) {
        var top = Object.keys(_allSpectra).map(function(w){
          return {word: w, amp: _allSpectra[w] ? _allSpectra[w].ac[k] : 0};
        }).sort(function(a,b){return b.amp - a.amp;}).slice(0,5);
        info = 'k=' + k + '  λ=' + (N_CELLS/k).toFixed(1) + '  топ: '
          + top.map(function(x){return x.word + '(' + x.amp.toFixed(2) + ')';}).join('  ');
      }
    }
    document.getElementById('spec-info').textContent = info || document.getElementById('spec-info').textContent;
  });

  // ── Init ──────────────────────────────────────────────────────────────────
  function populateDropdown() {
    var sel = document.getElementById('spec-word');
    (window.LEXICON_ARR || []).forEach(function(w) {
      var opt = document.createElement('option');
      opt.value = w; opt.textContent = w;
      sel.appendChild(opt);
    });
    sel.value = 'ГОРА';
  }

  document.getElementById('spec-btn').addEventListener('click', run);
  document.getElementById('spec-word').addEventListener('change', run);
  document.getElementById('spec-rule').addEventListener('change', function(){
    _allSpectra = null; run();
  });

  setTimeout(function(){
    populateDropdown();
    if (window.encL) run();
  }, 1000);
})();
</script>
</div>
<div class="section">
<h2>Фонемный анализ Q6 — карта замен</h2>
<p class="meta">Для каждой позиции слова: какие фонемные замены меняют орбитальный класс?
  · цвет ячейки = новый класс · серый = класс сохранён · × = исходная буква</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="phon-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <span style="color:#333;font-size:13px">или</span>
  <input id="phon-custom" type="text" placeholder="своё слово…"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;
           font-size:13px;width:120px;text-transform:uppercase"/>
  <button id="phon-btn"
    style="background:#1a2e1a;color:#a5d6a7;border:1px solid #2a5a2a;
           padding:5px 14px;cursor:pointer;font-size:13px">Анализ</button>
</div>
<canvas id="phon-canvas" width="700" height="200"
  style="display:block;border:1px solid #1a1a1a;cursor:crosshair"></canvas>
<div id="phon-info"
  style="font-family:monospace;font-size:11px;color:#555;min-height:16px;margin-top:5px"> </div>
<script>
(function(){
  // ── Phoneme alphabet (sorted by Q6 value) ─────────────────────────────────
  var SOLAN_ALPHA = ['Н','Л','Б','Р','З','В','М','Ж','Ч','И','О','Т','Г','Д','У','А'];
  var PHONEME_Q6  = {Н:3,Л:9,Б:14,Р:15,З:19,В:20,М:24,Ж:28,Ч:35,И:44,О:47,Т:48,Г:49,Д:50,У:51,А:63};
  // Transliteration for encoding in viewer (same as encL uses)
  var PHON_H = {Н:3,Л:9,Б:14,Р:15,З:19,В:20,М:24,Ж:28,Ч:35,И:44,О:47,Т:48,Г:49,Д:50,У:51,А:63};
  var N_ALPHA = SOLAN_ALPHA.length; // 16

  function encWord(word) {
    // Encode a Cyrillic word using PHON_H lookup
    var result = [];
    for (var i = 0; i < word.length; i++) {
      var h = PHON_H[word[i]];
      if (h !== undefined) result.push(h);
    }
    return result;
  }
  function padW(cells, w) {
    if (!cells.length) return new Array(w).fill(0);
    var out = [];
    for (var i = 0; i < w; i++) out.push(cells[i % cells.length]);
    return out;
  }

  // ── Full-key & class lookup ────────────────────────────────────────────────
  function fullKeyFor(word) {
    var cells = padW(encWord(word), window.LEXW || 16);
    var sig = {};
    var orbitFn = window.findOrbitJS, nexFn = window.caNextRow;
    var ls = window.LEXSTEPS || 800;
    if (!orbitFn) return null;
    ['xor','xor3','and','or'].forEach(function(r){
      sig[r] = orbitFn(cells, r, ls);
    });
    return window.predFullKey ? window.predFullKey(sig) : null;
  }
  function classIdFor(fk) {
    var cls = window.PRED_CLASSES;
    if (!cls || !fk) return -1;
    for (var ci = 0; ci < cls.length; ci++) {
      if (fk.every(function(v,i){ return v === cls[ci].key[i]; })) return ci;
    }
    return -1;
  }
  function keysEq(a, b) {
    if (!a || !b) return false;
    return a.length === b.length && a.every(function(v,i){ return v === b[i]; });
  }

  // ── Compute substitution matrix ────────────────────────────────────────────
  function computeSubMatrix(word) {
    var letters = encWord(word).map(function(h) {
      for (var k in PHON_H) { if (PHON_H[k] === h) return k; }
      return null;
    }).filter(Boolean);
    if (!letters.length) return null;

    var origFk = fullKeyFor(word);
    var origCl = classIdFor(origFk);

    var result = { letters: letters, orig_key: origFk, orig_class: origCl, positions: [] };

    letters.forEach(function(origLetter, pos) {
      var subs = {};
      SOLAN_ALPHA.forEach(function(subLetter) {
        if (subLetter === origLetter) { subs[subLetter] = null; return; }
        var newLetters = letters.slice();
        newLetters[pos] = subLetter;
        var newFk = fullKeyFor(newLetters.join(''));
        var newCl = classIdFor(newFk);
        subs[subLetter] = { fk: newFk, cl: newCl, changed: !keysEq(newFk, origFk) };
      });
      var n_ch = Object.values(subs).filter(function(v){ return v && v.changed; }).length;
      result.positions.push({
        pos: pos, letter: origLetter, subs: subs,
        n_changed: n_ch, sensitivity: n_ch / 15
      });
    });
    return result;
  }

  // ── Draw ──────────────────────────────────────────────────────────────────
  var LM=78, TM=44, RM=12, BM=22;
  var _hovCell = null;

  function drawMatrix(matrix, canvas, ctx) {
    if (!matrix) return;
    var W = canvas.width, n_pos = matrix.positions.length;
    var CW = Math.floor((W - LM - RM) / N_ALPHA);
    var CH = Math.max(22, Math.min(40, Math.floor(240 / n_pos)));
    canvas.height = TM + n_pos * CH + BM;

    ctx.fillStyle = '#0d0d0d';
    ctx.fillRect(0, 0, W, canvas.height);

    var PAL = window.CLASS_PALETTE || ['#4fc3f7'];

    // Column headers (phoneme letters)
    ctx.font = 'bold 10px monospace';
    SOLAN_ALPHA.forEach(function(letter, ci) {
      ctx.fillStyle = '#333';
      ctx.fillText(letter, LM + ci * CW + CW * 0.3, TM - 6);
    });
    // Q6 value below header
    ctx.font = '8px monospace';
    SOLAN_ALPHA.forEach(function(letter, ci) {
      ctx.fillStyle = '#1e1e1e';
      ctx.fillText(PHONEME_Q6[letter], LM + ci * CW + 1, TM - 16);
    });

    matrix.positions.forEach(function(pd, ri) {
      var y = TM + ri * CH;

      // Sensitivity bar (left)
      var barW = Math.round(pd.sensitivity * 42);
      ctx.fillStyle = pd.sensitivity > 0.67 ? '#6a1a1a' :
                      pd.sensitivity > 0.33 ? '#4a3010' : '#1a3010';
      ctx.fillRect(2, y + 2, barW, CH - 4);

      // Letter label
      ctx.font = 'bold 12px monospace';
      ctx.fillStyle = '#aaa';
      ctx.fillText(pd.letter, LM - 55, y + CH * 0.65);
      ctx.font = '9px monospace';
      ctx.fillStyle = '#333';
      ctx.fillText(pd.n_changed + '/15', LM - 30, y + CH * 0.65);

      // Cells
      SOLAN_ALPHA.forEach(function(subLetter, ci) {
        var x = LM + ci * CW;
        var info = pd.subs[subLetter];
        var isHov = _hovCell && _hovCell[0]===ri && _hovCell[1]===ci;

        if (info === null) {
          // Original letter: hatched
          ctx.fillStyle = '#1a1a1a';
          ctx.fillRect(x, y, CW-1, CH-1);
          ctx.fillStyle = '#333';
          ctx.font = 'bold 10px monospace';
          ctx.fillText('×', x + CW*0.28, y + CH*0.67);
        } else if (info.changed) {
          var col = PAL[info.cl % PAL.length] || '#888';
          // Parse hex to rgba
          ctx.fillStyle = isHov ? col : col + '99';
          ctx.fillRect(x, y, CW-1, CH-1);
          ctx.fillStyle = isHov ? '#fff' : '#000a';
          ctx.font = '9px monospace';
          ctx.fillText(subLetter, x + CW*0.2, y + CH*0.67);
        } else {
          ctx.fillStyle = isHov ? '#222' : '#141414';
          ctx.fillRect(x, y, CW-1, CH-1);
          ctx.fillStyle = '#2a2a2a';
          ctx.font = '8px monospace';
          ctx.fillText(subLetter, x + CW*0.2, y + CH*0.67);
        }
      });

      // Row separator
      ctx.strokeStyle = '#111';
      ctx.lineWidth = 0.5;
      ctx.beginPath();
      ctx.moveTo(LM, y); ctx.lineTo(W - RM, y);
      ctx.stroke();
    });

    // Class legend below
    var PAL2 = window.CLASS_PALETTE || [];
    var CLS  = window.PRED_CLASSES  || [];
    var lx = LM, ly = canvas.height - BM + 6;
    ctx.font = '8px monospace';
    CLS.forEach(function(cls, ci) {
      var col = PAL2[ci % PAL2.length] || '#888';
      ctx.fillStyle = col;
      ctx.fillRect(lx, ly, 8, 8);
      ctx.fillStyle = '#333';
      ctx.fillText(ci+1, lx+10, ly+8);
      lx += 22;
    });
    ctx.fillStyle = '#222';
    ctx.fillText('= класс', lx+2, ly+8);
  }

  // ── Hover ─────────────────────────────────────────────────────────────────
  var _lastMatrix = null;

  function initHover(canvas) {
    canvas.addEventListener('mousemove', function(e) {
      var rect = canvas.getBoundingClientRect();
      var mx = e.clientX - rect.left, my = e.clientY - rect.top;
      var CW2 = Math.floor((canvas.width - LM - RM) / N_ALPHA);
      var CH2 = _lastMatrix ? Math.max(22, Math.min(40, Math.floor(240/_lastMatrix.positions.length))) : 30;
      var ci = Math.floor((mx - LM) / CW2);
      var ri = Math.floor((my - TM) / CH2);
      var valid = _lastMatrix && ci >= 0 && ci < N_ALPHA && ri >= 0 && ri < _lastMatrix.positions.length;
      _hovCell = valid ? [ri, ci] : null;
      if (_lastMatrix) {
        var ctx2 = canvas.getContext('2d');
        drawMatrix(_lastMatrix, canvas, ctx2);
      }
      var info = '';
      if (valid) {
        var pd = _lastMatrix.positions[ri];
        var subLetter = SOLAN_ALPHA[ci];
        var entry = pd.subs[subLetter];
        if (entry === null) {
          info = pd.letter + '[' + ri + '] — исходная буква';
        } else if (entry.changed) {
          var CLS = window.PRED_CLASSES || [];
          var clsInfo = CLS[entry.cl] || {};
          info = pd.letter + '[' + ri + '] → ' + subLetter
               + '  новый класс ' + (entry.cl+1) + '/13'
               + '  ключ=(' + (entry.fk||[]).join(',') + ')'
               + '  (' + (clsInfo.words||[]).slice(0,4).join(' ') + '…)';
        } else {
          info = pd.letter + '[' + ri + '] → ' + subLetter + '  класс сохранён';
        }
      }
      document.getElementById('phon-info').textContent = info;
    });
    canvas.addEventListener('mouseleave', function() {
      _hovCell = null;
      if (_lastMatrix) drawMatrix(_lastMatrix, canvas, canvas.getContext('2d'));
      document.getElementById('phon-info').textContent = '';
    });
  }

  // ── Run ───────────────────────────────────────────────────────────────────
  function run() {
    var custom = (document.getElementById('phon-custom').value||'').toUpperCase()
                   .replace(/[^А-ЯЁ]/g,'');
    var word = custom || document.getElementById('phon-word').value || 'ГОРА';
    var canvas = document.getElementById('phon-canvas');
    var ctx = canvas.getContext('2d');
    var matrix = computeSubMatrix(word);
    _lastMatrix = matrix;
    if (!matrix) {
      document.getElementById('phon-info').textContent = '(нет распознанных фонем)';
      return;
    }
    drawMatrix(matrix, canvas, ctx);
    var total_ch = matrix.positions.reduce(function(s,p){return s+p.n_changed;},0);
    var total_sub = matrix.positions.length * 15;
    document.getElementById('phon-info').textContent =
      word + '  класс=' + (matrix.orig_class+1) + '/13'
      + '  ключ=(' + (matrix.orig_key||[]).join(',') + ')'
      + '  чувствительность=' + total_ch + '/' + total_sub
      + ' (' + (total_ch/total_sub*100).toFixed(1) + '%)';
  }
  window.phonRun = run;

  // ── Init ──────────────────────────────────────────────────────────────────
  function populateDropdown() {
    var sel = document.getElementById('phon-word');
    var lex = window.LEXICON_ARR || [];
    lex.forEach(function(w) {
      var opt = document.createElement('option');
      opt.value = w; opt.textContent = w;
      sel.appendChild(opt);
    });
    sel.value = 'ГОРА';
  }

  document.getElementById('phon-btn').addEventListener('click', run);
  document.getElementById('phon-word').addEventListener('change', function(){
    document.getElementById('phon-custom').value='';
    run();
  });
  document.getElementById('phon-custom').addEventListener('keydown', function(e){
    if(e.key==='Enter') run();
  });

  initHover(document.getElementById('phon-canvas'));

  setTimeout(function(){
    populateDropdown();
    if(window.encL && window.predFullKey) run();
  }, 1400);
})();
</script>
</div>
<div class="section">
<h2>Портрет Q6 — радарный отпечаток динамики</h2>
<p class="meta">8-мерный нормированный «отпечаток» слова: IC-H · Period · Trans. · LZ76 · Topo-h · TE · Lyap. · Autocorr · все оси [0,1] · радарная паутина · опциональное сравнение двух слов</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="prt-word1"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <span style="color:#666;font-size:12px">vs</span>
  <select id="prt-word2"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="">(без сравнения)</option>
  </select>
  <select id="prt-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor">XOR ⊕</option>
    <option value="xor3" selected>XOR3</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <button id="prt-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    Портрет</button>
</div>
<div style="display:flex;gap:20px;align-items:flex-start;flex-wrap:wrap">
  <canvas id="prt-canvas" style="display:block"></canvas>
  <div id="prt-bars" style="color:#ccc;font-family:monospace;font-size:11px;min-width:260px"></div>
</div>
<div id="prt-stats" style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"></div>
<script>
(function(){
  var PRT_COLS={xor:'#f55',xor3:'#4dd',and:'#7d7',or:'#fa0'};
  var PRT_CMP='#f48';
  var PRT_AX=['IC-H','Period','Trans.','LZ76','Topo-h','TE','Lyap.','Autocorr'];

  function prtStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }

  function prtOrbit(c0,rule){
    var seen={},c=c0.slice(),t=0;
    for(;;){var k=c.join(',');if(k in seen) return {T:seen[k],P:t-seen[k]};seen[k]=t;c=prtStep(c,rule);t++;}
  }

  function prtH(C){
    var total=0;Object.values(C).forEach(function(v){total+=v;});
    if(!total) return 0;
    return -Object.values(C).reduce(function(h,v){var p=v/total;return h+(p>0?p*Math.log2(p):0);},0);
  }

  function prtIcH(cells,N){
    var C={};cells.forEach(function(v){C[v]=(C[v]||0)+1;});
    return Math.min(prtH(C)/Math.log2(N),1.0);
  }

  function prtLZ76(bits){
    var n=bits.length;if(!n) return 0;
    var sts=new Set(['']);var w='';var c=1;var i=0;
    while(i<n){
      var s=bits[i]?'1':'0';
      if(sts.has(w+s)){w+=s;i++;}
      else{c++;sts.add(w+s);w='';i++;}
    }
    if(w.length>0) c++;
    var nMax=n/(Math.log2(n)||1);
    return Math.min(c/nMax,1.0);
  }

  function prtTopoH(tempSeqs,maxN){
    maxN=maxN||4;
    function cnt(seqs,n){
      var C={};
      seqs.forEach(function(s){
        var L=s.length;
        for(var i=0;i<L;i++){var g='';for(var j=0;j<n;j++) g+=s[(i+j)%L];C[g]=(C[g]||0)+1;}
      });
      return C;
    }
    var topo=0;
    for(var n=2;n<=maxN;n++) topo=Math.max(topo,prtH(cnt(tempSeqs,n))/n);
    return Math.min(topo,1.0);
  }

  function prtTETotal(orbit,N){
    var total=0;
    var P=orbit.length;
    for(var j=0;j<N;j++){
      var yy={},y={};
      for(var t=0;t<P;t++){var yt=orbit[t][j],yt1=orbit[(t+1)%P][j];var k1=yt+','+yt1;yy[k1]=(yy[k1]||0)+1;y[yt]=(y[yt]||0)+1;}
      var Hcond=prtH(yy)-prtH(y);
      for(var i=0;i<N;i++){
        var xyy={},xy={};
        for(var t=0;t<P;t++){var xt=orbit[t][i],yt2=orbit[t][j],yt12=orbit[(t+1)%P][j];var k2=xt+','+yt2+','+yt12;xyy[k2]=(xyy[k2]||0)+1;var k3=xt+','+yt2;xy[k3]=(xy[k3]||0)+1;}
        total+=Math.max(0,Hcond-(prtH(xyy)-prtH(xy)));
      }
    }
    return Math.min(total/300,1.0);
  }

  function prtLyap(cells0,rule,N){
    var nPerturb=16,nSteps=20,totalPeak=0;
    for(var pi=0;pi<nPerturb;pi++){
      var ci=Math.floor(pi/6)%N,bi=pi%6;
      var orig=cells0.slice(),pert=cells0.slice();
      pert[ci]=(pert[ci]^(1<<bi))&63;
      var peakD=0;
      for(var t=0;t<nSteps;t++){
        orig=prtStep(orig,rule);pert=prtStep(pert,rule);
        var d=0;
        for(var j=0;j<N;j++){var diff=orig[j]^pert[j];while(diff){d+=diff&1;diff>>=1;}}
        peakD=Math.max(peakD,d);
      }
      totalPeak+=peakD;
    }
    return Math.min((totalPeak/nPerturb)/96,1.0);
  }

  function prtAutocorr1(grid){
    var N=grid[0].length,P=grid.length,sumR=0,cnt=0;
    for(var t=0;t<P;t++){
      var row=grid[t];
      var mu=row.reduce(function(s,v){return s+v;},0)/N;
      var va=row.reduce(function(s,v){return s+(v-mu)*(v-mu);},0)/N;
      if(va<1e-9) continue;
      var r1=0;for(var i=0;i<N;i++) r1+=(row[i]-mu)*(row[(i+1)%N]-mu);
      sumR+=r1/(N*va);cnt++;
    }
    var acf1=cnt>0?sumR/cnt:0;
    return (acf1+1)/2;
  }

  function prtMetrics(cells,rule){
    var N=cells.length;
    var info=prtOrbit(cells.slice(),rule);
    var T=info.T,P=Math.max(info.P,1);
    var c=cells.slice();
    for(var i=0;i<T;i++) c=prtStep(c,rule);
    var grid=[];
    for(var i=0;i<P;i++){grid.push(c.slice());c=prtStep(c,rule);}

    var icH=prtIcH(cells,N);
    var pN=Math.min(P/8,1.0);
    var tN=Math.min(T/8,1.0);

    var bits=[];
    for(var t=0;t<P;t++) for(var i=0;i<N;i++) for(var b=0;b<6;b++) bits.push((grid[t][i]>>b)&1);
    var lz=prtLZ76(bits);

    var tempSeqs=[];
    for(var i=0;i<N;i++){var sq=[];for(var t=0;t<P;t++) sq.push(grid[t][i]>=32?1:0);tempSeqs.push(sq);}
    var topo=prtTopoH(tempSeqs,4);

    var te=prtTETotal(grid,N);
    var lyap=prtLyap(cells,rule,N);
    var ac1=prtAutocorr1(grid);

    return {vals:[icH,pN,tN,lz,topo,te,lyap,ac1],P:P,T:T};
  }

  function drawRadar(ctx,cx,cy,R,vals,col,fillAlpha){
    var N=vals.length;
    fillAlpha=fillAlpha||0.22;
    function pt(i,r){var a=(2*Math.PI*i/N)-Math.PI/2;return[cx+r*Math.cos(a),cy+r*Math.sin(a)];}
    // rings
    for(var k=1;k<=5;k++){
      ctx.beginPath();
      for(var i=0;i<=N;i++){var p=pt(i%N,R*k/5);if(i===0)ctx.moveTo(p[0],p[1]);else ctx.lineTo(p[0],p[1]);}
      ctx.closePath();ctx.strokeStyle='rgba(200,200,200,0.12)';ctx.lineWidth=0.5;ctx.stroke();
    }
    // axes
    for(var i=0;i<N;i++){var p=pt(i,R);ctx.beginPath();ctx.moveTo(cx,cy);ctx.lineTo(p[0],p[1]);ctx.strokeStyle='rgba(200,200,200,0.2)';ctx.lineWidth=0.5;ctx.stroke();}
    // polygon
    ctx.beginPath();
    for(var i=0;i<=N;i++){var p=pt(i%N,R*vals[i%N]);if(i===0)ctx.moveTo(p[0],p[1]);else ctx.lineTo(p[0],p[1]);}
    ctx.closePath();
    ctx.globalAlpha=fillAlpha;ctx.fillStyle=col;ctx.fill();
    ctx.globalAlpha=1;ctx.strokeStyle=col;ctx.lineWidth=2;ctx.stroke();
    // dots
    for(var i=0;i<N;i++){var p=pt(i,R*vals[i]);ctx.beginPath();ctx.arc(p[0],p[1],3,0,2*Math.PI);ctx.fillStyle=col;ctx.fill();}
  }

  function drawLabels(ctx,cx,cy,R,labels){
    var N=labels.length;
    for(var i=0;i<N;i++){
      var a=(2*Math.PI*i/N)-Math.PI/2;
      var lx=cx+(R+22)*Math.cos(a),ly=cy+(R+22)*Math.sin(a);
      ctx.fillStyle='#999';ctx.font='9px monospace';ctx.textAlign='center';
      ctx.fillText(labels[i],lx,ly+4);
    }
  }

  function prtRun(){
    if(!window.encL||!window.padL) return;
    var w1=(document.getElementById('prt-word1').value||'ТУМАН').toUpperCase();
    var w2el=document.getElementById('prt-word2');
    var w2=w2el?w2el.value:'';
    var rule=document.getElementById('prt-rule').value||'xor3';
    var N=16;
    var col1=PRT_COLS[rule]||'#ccc';
    var col2=PRT_CMP;

    var cells1=window.padL(window.encL(w1),N);
    var m1=prtMetrics(cells1,rule);

    var GS=350,cx=GS/2,cy=GS/2,Rc=GS*0.36;
    var canvas=document.getElementById('prt-canvas');
    canvas.width=GS;canvas.height=GS;
    var ctx=canvas.getContext('2d');
    ctx.fillStyle='#0e0e0e';ctx.fillRect(0,0,GS,GS);

    drawRadar(ctx,cx,cy,Rc,m1.vals,col1,0.22);
    drawLabels(ctx,cx,cy,Rc,PRT_AX);

    var barsHTML='<table style="border-collapse:collapse">';
    barsHTML+='<tr><th style="padding:2px 6px;color:#666">ось</th>'
      +'<th style="padding:2px 6px;color:'+col1+'">'+w1+'</th>';

    var m2=null;
    if(w2){
      var cells2=window.padL(window.encL(w2.toUpperCase()),N);
      m2=prtMetrics(cells2,rule);
      drawRadar(ctx,cx,cy,Rc,m2.vals,col2,0.18);
      barsHTML+='<th style="padding:2px 6px;color:'+col2+'">'+w2+'</th>';
    }
    barsHTML+='</tr>';

    for(var i=0;i<PRT_AX.length;i++){
      var v1=m1.vals[i];
      var bar1='▓'.repeat(Math.round(v1*16))+'░'.repeat(16-Math.round(v1*16));
      var row='<tr>'
        +'<td style="padding:1px 6px;color:#888">'+PRT_AX[i]+'</td>'
        +'<td style="padding:1px 6px;color:'+col1+';font-size:10px">'+bar1+' '+v1.toFixed(3)+'</td>';
      if(m2){
        var v2=m2.vals[i];
        var bar2='▓'.repeat(Math.round(v2*16))+'░'.repeat(16-Math.round(v2*16));
        row+='<td style="padding:1px 6px;color:'+col2+';font-size:10px">'+bar2+' '+v2.toFixed(3)+'</td>';
      }
      barsHTML+=row+'</tr>';
    }
    barsHTML+='</table>';
    document.getElementById('prt-bars').innerHTML=barsHTML;

    var statsHTML='<span style="color:'+col1+'">'+w1+'</span>'
      +' P='+m1.P+' T='+m1.T;
    if(m2){
      // L2 distance
      var d=0;
      for(var i=0;i<8;i++) d+=(m1.vals[i]-m2.vals[i])*(m1.vals[i]-m2.vals[i]);
      d=Math.sqrt(d/8);
      var dot=0,n1s=0,n2s=0;
      for(var i=0;i<8;i++){dot+=m1.vals[i]*m2.vals[i];n1s+=m1.vals[i]*m1.vals[i];n2s+=m2.vals[i]*m2.vals[i];}
      var cos=dot/((Math.sqrt(n1s)||1)*(Math.sqrt(n2s)||1));
      statsHTML+='  <span style="color:'+col2+'">'+w2+'</span>'
        +' P='+m2.P+' T='+m2.T
        +'  |  L2='+d.toFixed(3)+'  cosine='+cos.toFixed(3);
    }
    document.getElementById('prt-stats').innerHTML=statsHTML;
  }

  document.addEventListener('DOMContentLoaded',function(){
    var sel1=document.getElementById('prt-word1');
    var sel2=document.getElementById('prt-word2');
    if(window.LEXICON_ARR){
      window.LEXICON_ARR.slice().sort().forEach(function(w){
        var o1=document.createElement('option');o1.value=o1.text=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o1.selected=true;
        sel1.appendChild(o1);
        var o2=document.createElement('option');o2.value=o2.text=w;
        sel2.appendChild(o2);
      });
    }
    var btn=document.getElementById('prt-btn');
    var ruleEl=document.getElementById('prt-rule');
    if(btn)    btn.addEventListener('click',prtRun);
    if(sel1)   sel1.addEventListener('change',prtRun);
    if(sel2)   sel2.addEventListener('change',prtRun);
    if(ruleEl) ruleEl.addEventListener('change',prtRun);
    setTimeout(function(){if(window.encL) prtRun();},1350);
  });
})();
</script>
</div>
<div class="section">
<h2>Огрубление Q6 — коммутатор и ренормгруппа</h2>
<p class="meta">Для каждого уровня огрубления k ∈ {2,3,4,8,16,64}: δ(t) = |coarsen(CA^t(IC)) − CA_k^t(coarsen(IC))| · k=2 всегда точно (MSB) · k=64 тождественно · k=3 может нарушать симметрию · тепловая карта δ(t) по шагам</p>
<div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;flex-wrap:wrap">
  <select id="cg-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px"></select>
  <select id="cg-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:5px 8px;font-size:13px">
    <option value="xor">XOR ⊕</option>
    <option value="xor3" selected>XOR3</option>
    <option value="and">AND &amp;</option>
    <option value="or">OR |</option>
  </select>
  <button id="cg-btn"
    style="background:#222;color:#ccc;border:1px solid #444;padding:5px 14px;cursor:pointer;font-size:13px">
    Огрубить</button>
</div>
<div style="display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap">
  <canvas id="cg-hmap"  style="display:block"></canvas>
  <canvas id="cg-bars"  style="display:block"></canvas>
</div>
<div id="cg-stats" style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"></div>
<script>
(function(){
  var CG_COLS={xor:'#f55',xor3:'#4dd',and:'#7d7',or:'#fa0'};
  var CG_RGB={xor:[255,85,85],xor3:[68,221,221],and:[119,221,119],or:[255,170,0]};
  var CG_LEVELS=[2,3,4,8,16,64];
  var CG_STEPS=20;

  function cgStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }

  function cgCoarsen(v,k){return Math.min(Math.floor(v*k/64),k-1);}

  function cgDequant(i,k){return k<=1?0:Math.round(i*63/(k-1));}

  function cgCoarseStep(cells,rule,k){
    var dq=cells.map(function(v){return cgDequant(v,k);});
    var st=cgStep(dq,rule);
    return st.map(function(v){return cgCoarsen(v,k);});
  }

  function cgCommTraj(ic,rule,k){
    var N=ic.length,denom=Math.max(k-1,1)*N;
    var pathA=ic.slice();
    var pathB=ic.map(function(v){return cgCoarsen(v,k);});
    var deltas=[0];
    for(var t=0;t<CG_STEPS;t++){
      pathA=cgStep(pathA,rule);
      pathB=cgCoarseStep(pathB,rule,k);
      var caC=pathA.map(function(v){return cgCoarsen(v,k);});
      var err=0;for(var i=0;i<N;i++) err+=Math.abs(caC[i]-pathB[i]);
      deltas.push(err/denom);
    }
    return deltas;
  }

  function cgRun(){
    if(!window.encL||!window.padL) return;
    var word=(document.getElementById('cg-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('cg-rule').value||'xor3';
    var N=16;
    var col=CG_COLS[rule]||'#ccc';
    var rgb=CG_RGB[rule]||[200,200,200];

    var ic=window.padL(window.encL(word),N);
    var trajs=CG_LEVELS.map(function(k){return cgCommTraj(ic,rule,k);});

    // ── heatmap ───────────────────────────────────────────────────────────────
    var ROWS=CG_LEVELS.length,COLS=CG_STEPS+1;
    var CW=18,CH=22,PAD_L=30,PAD_T=6;
    var hc=document.getElementById('cg-hmap');
    hc.width=PAD_L+COLS*CW+4;hc.height=PAD_T+ROWS*CH+16;
    var hx=hc.getContext('2d');
    hx.fillStyle='#0e0e0e';hx.fillRect(0,0,hc.width,hc.height);

    for(var ri=0;ri<ROWS;ri++){
      var k=CG_LEVELS[ri];
      var y0=PAD_T+ri*CH;
      // row label
      hx.fillStyle='#666';hx.font='9px monospace';hx.textAlign='right';
      hx.fillText('k='+k,PAD_L-3,y0+CH-5);
      // cells
      for(var ci=0;ci<COLS;ci++){
        var v=trajs[ri][ci];
        var alpha=Math.min(1,v*2.5);
        hx.fillStyle='rgb('+Math.round(rgb[0]*alpha+14*(1-alpha))+','+
          Math.round(rgb[1]*alpha+14*(1-alpha))+','+
          Math.round(rgb[2]*alpha+14*(1-alpha))+')';
        hx.fillRect(PAD_L+ci*CW,y0,CW-1,CH-2);
        // mark exact (v=0) with dot
        if(v===0){hx.fillStyle='rgba(255,255,255,0.2)';hx.beginPath();hx.arc(PAD_L+ci*CW+CW/2,y0+CH/2,2,0,2*Math.PI);hx.fill();}
      }
    }
    // t-axis
    hx.fillStyle='#555';hx.font='8px monospace';hx.textAlign='center';
    for(var ci=0;ci<=CG_STEPS;ci+=5) hx.fillText(ci,PAD_L+ci*CW+CW/2,hc.height-2);

    // ── max-δ bar chart ───────────────────────────────────────────────────────
    var BW=140,BH=PAD_T+ROWS*CH+16;
    var bc=document.getElementById('cg-bars');
    bc.width=BW;bc.height=BH;
    var bx=bc.getContext('2d');
    bx.fillStyle='#0e0e0e';bx.fillRect(0,0,BW,BH);
    for(var ri=0;ri<ROWS;ri++){
      var maxD=Math.max.apply(null,trajs[ri]);
      var y0=PAD_T+ri*CH;
      bx.fillStyle='#1a1a1a';bx.fillRect(0,y0,BW-4,CH-2);
      bx.fillStyle=col;bx.fillRect(0,y0,Math.round(maxD*(BW-4)),CH-2);
      bx.fillStyle='#ccc';bx.font='9px monospace';bx.textAlign='left';
      bx.fillText(maxD.toFixed(3),Math.round(maxD*(BW-4))+2,y0+CH-5);
    }
    bx.fillStyle='#555';bx.font='8px monospace';bx.textAlign='center';
    bx.fillText('max δ',BW/2,BH-2);

    // stats
    var exactK=CG_LEVELS.filter(function(_,ri){return Math.max.apply(null,trajs[ri])===0;});
    document.getElementById('cg-stats').innerHTML=
      '<span style="color:'+col+'">'+rule.toUpperCase()+'</span> '
      +' точные уровни: k∈{'+exactK.join(',')+'}'
      +'  k=3: max-δ='+trajs[1].reduce(function(m,v){return Math.max(m,v);},0).toFixed(4);
  }

  document.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('cg-word');
    if(window.LEXICON_ARR){
      window.LEXICON_ARR.slice().sort().forEach(function(w){
        var o=document.createElement('option');o.value=o.text=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('cg-btn');
    var wordEl=document.getElementById('cg-word');
    var ruleEl=document.getElementById('cg-rule');
    if(btn)    btn.addEventListener('click',cgRun);
    if(wordEl) wordEl.addEventListener('change',cgRun);
    if(ruleEl) ruleEl.addEventListener('change',cgRun);
    setTimeout(function(){if(window.encL) cgRun();},1400);
  });
})();
</script>
</div>
<div class="section">
<h2>Active Information Storage Q6 — локальная память клетки</h2>
<p class="meta">AIS(k) = MI(X_{t+1} ; X_t,…,X_{t-k+1}) = H₁ − (H_{k+1} − H_k) · мера того, сколько собственного прошлого клетки определяет её будущее · AIS=0 означает отсутствие памяти, AIS=H₁ — идеальная предсказуемость</p>
<div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
  <select id="ais-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
  </select>
  <select id="ais-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
    <option value="xor3" selected>XOR3</option>
    <option value="xor">XOR</option>
    <option value="and">AND</option>
    <option value="or">OR</option>
  </select>
  <button id="ais-btn"
    style="background:#1e3a4a;color:#4fc3f7;border:1px solid #2a5a7a;
           padding:4px 14px;cursor:pointer;font-size:13px">Запустить</button>
</div>
<canvas id="ais-profile" width="530" height="220"
  style="display:block;border:1px solid #1a1a1a;margin-bottom:6px"></canvas>
<canvas id="ais-cell"    width="530" height="100"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="ais-stats"
  style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"> </div>
<script>
(function(){
  /* ── Q6 CA helpers ─────────────────────────────────────────────────── */
  function aisStep(cells,rule){
    var n=cells.length,out=[];
    for(var i=0;i<n;i++){
      var l=cells[(i-1+n)%n],c=cells[i],r=cells[(i+1)%n];
      if(rule==='xor') out.push((l^r)&63);
      else if(rule==='xor3') out.push((l^c^r)&63);
      else if(rule==='and') out.push((l&r)&63);
      else out.push((l|r)&63);
    }
    return out;
  }
  function aisOrbit(ic,rule){
    var seen={},t=0,cur=ic.slice();
    while(t<2000){
      var key=cur.join(',');
      if(key in seen){
        var trans=seen[key],period=t-trans;
        cur=ic.slice();
        for(var i=0;i<trans;i++) cur=aisStep(cur,rule);
        var grid=[];
        for(var i=0;i<period;i++){
          grid.push(cur.map(function(v){return v>=32?1:0;}));
          cur=aisStep(cur,rule);
        }
        return grid;
      }
      seen[key]=t++;
      cur=aisStep(cur,rule);
    }
    return [ic.map(function(v){return v>=32?1:0;})];
  }
  /* ── AIS computation ────────────────────────────────────────────────── */
  function aisHNgrams(seqs,n){
    var counts={},total=0;
    for(var si=0;si<seqs.length;si++){
      var s=seqs[si],m=s.length;
      for(var t=0;t<m;t++){
        var gram=[];
        for(var j=0;j<n;j++) gram.push(s[(t+j)%m]);
        var k=gram.join('');
        counts[k]=(counts[k]||0)+1;
        total++;
      }
    }
    if(!total) return 0;
    var h=0;
    for(var k in counts){var p=counts[k]/total; h-=p*Math.log2(p);}
    return Math.max(0,h);
  }
  function aisK(seqs,k){
    var h1=aisHNgrams(seqs,1),hk=aisHNgrams(seqs,k),hk1=aisHNgrams(seqs,k+1);
    return Math.max(0,Math.min(h1-(hk1-hk),h1));
  }
  /* ── Main render ────────────────────────────────────────────────────── */
  function aisRun(){
    var word=(document.getElementById('ais-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('ais-rule').value||'xor3';
    var MAX_K=6;
    if(!window.encL) return;
    var ic=window.encL(word);
    var grid=aisOrbit(ic,rule);
    var P=grid.length;
    if(!P) return;
    var N=grid[0].length;
    /* Build pooled temporal seqs */
    var seqs=[];
    for(var i=0;i<N;i++){
      var s=[];
      for(var t=0;t<P;t++) s.push(grid[t][i]);
      seqs.push(s);
    }
    var h1=aisHNgrams(seqs,1);
    var profile=[];
    for(var k=1;k<=MAX_K;k++) profile.push(aisK(seqs,k));
    /* Per-cell AIS(k=2) */
    var cellA=[];
    for(var i=0;i<N;i++){
      var s=[];
      for(var t=0;t<P;t++) s.push(grid[t][i]);
      cellA.push(aisK([s],2));
    }
    var ais2=profile[1]||0;
    var frac=h1>0?ais2/h1:0;
    var meanA=cellA.reduce(function(a,b){return a+b;},0)/N;
    /* ── Profile bar chart ─────────────────────────────────────────── */
    var pc=document.getElementById('ais-profile');
    var cx=pc.getContext('2d');
    var W=pc.width,H=pc.height;
    cx.fillStyle='#0d0d0d'; cx.fillRect(0,0,W,H);
    var RCOL={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
    var col=RCOL[rule]||'#4fc3f7';
    var BAR_W=58,BAR_GAP=10,X0=60,MAX_HB=H-60;
    /* H1 dashed line */
    cx.strokeStyle='#555'; cx.setLineDash([4,4]);
    var h1y=H-40-h1*MAX_HB;
    cx.beginPath(); cx.moveTo(X0-5,h1y); cx.lineTo(W-10,h1y); cx.stroke();
    cx.setLineDash([]);
    cx.fillStyle='#666'; cx.font='10px monospace';
    cx.fillText('H₁='+h1.toFixed(3),2,h1y+3);
    /* bars */
    for(var k=0;k<MAX_K;k++){
      var bx=X0+k*(BAR_W+BAR_GAP);
      var bh=profile[k]*MAX_HB;
      cx.globalAlpha=0.25+0.75*(h1>0?profile[k]/h1:0);
      cx.fillStyle=col; cx.fillRect(bx,H-40-bh,BAR_W,bh);
      cx.globalAlpha=1; cx.strokeStyle=col;
      cx.strokeRect(bx,H-40-bh,BAR_W,bh);
      cx.fillStyle='#aaa'; cx.font='11px monospace'; cx.textAlign='center';
      cx.fillText('k='+(k+1),bx+BAR_W/2,H-25);
      if(profile[k]>0.005)
        cx.fillText(profile[k].toFixed(3),bx+BAR_W/2,H-40-bh-5);
    }
    cx.textAlign='left';
    /* ── Per-cell heatmap ──────────────────────────────────────────── */
    var hc=document.getElementById('ais-cell');
    var hx=hc.getContext('2d');
    var CW=hc.width,CH=hc.height;
    hx.fillStyle='#0d0d0d'; hx.fillRect(0,0,CW,CH);
    var CellW=Math.floor((CW-44)/N);
    for(var i=0;i<N;i++){
      var v=cellA[i];
      var intensity=h1>0?v/h1:(v>0?1:0);
      var g=Math.round(intensity*160+50),b=Math.round(200-intensity*80);
      hx.fillStyle='rgba(80,'+g+','+b+',0.85)';
      hx.fillRect(42+i*CellW,10,CellW-2,CH-34);
      hx.fillStyle='#ccc'; hx.font='8px monospace'; hx.textAlign='center';
      hx.fillText(i,42+i*CellW+CellW/2,CH-4);
      hx.fillStyle='#fff'; hx.font='8px monospace';
      hx.fillText(v.toFixed(2),42+i*CellW+CellW/2,CH-18);
    }
    hx.fillStyle='#777'; hx.textAlign='left'; hx.font='9px monospace';
    hx.fillText('AIS\nk=2',2,CH/2);
    /* Stats */
    document.getElementById('ais-stats').innerHTML=
      'H₁='+h1.toFixed(4)+
      '  AIS(1)='+(profile[0]||0).toFixed(4)+
      '  AIS(2)='+ais2.toFixed(4)+
      '  frac='+frac.toFixed(3)+
      '  mean_cell='+meanA.toFixed(4)+
      '  P='+P;
  }
  window.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('ais-word');
    if(sel&&window.LEXICON_ARR){
      window.LEXICON_ARR.forEach(function(w){
        var o=document.createElement('option');
        o.value=o.textContent=w;
        if(w==='ТУМАН') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('ais-btn');
    var wordEl=document.getElementById('ais-word');
    var ruleEl=document.getElementById('ais-rule');
    if(btn)    btn.addEventListener('click',aisRun);
    if(wordEl) wordEl.addEventListener('change',aisRun);
    if(ruleEl) ruleEl.addEventListener('change',aisRun);
    setTimeout(function(){if(window.encL) aisRun();},1500);
  });
})();
</script>
</div>
<div class="section">
<h2>Временной спектр Q6 — ДПФ по клеткам (аттрактор)</h2>
<p class="meta">Для каждой клетки i вычисляется ДПФ временного ряда x_i(0)…x_i(P−1) на аттракторе · S[k] = |ДПФ[k]|²/P² · k=0: постоянная составляющая (DC) · k=1…P/2: осцилляции с периодом P/k шагов · H_s = −Σ p_k log₂ p_k — спектральная энтропия клетки</p>
<div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
  <select id="tmp-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
  </select>
  <select id="tmp-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
    <option value="xor3" selected>XOR3</option>
    <option value="xor">XOR</option>
    <option value="and">AND</option>
    <option value="or">OR</option>
  </select>
  <button id="tmp-btn"
    style="background:#1e3a4a;color:#4fc3f7;border:1px solid #2a5a7a;
           padding:4px 14px;cursor:pointer;font-size:13px">Запустить</button>
</div>
<canvas id="tmp-hmap" width="530" height="230"
  style="display:block;border:1px solid #1a1a1a;margin-bottom:6px"></canvas>
<canvas id="tmp-bars" width="530" height="90"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="tmp-stats"
  style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"> </div>
<script>
(function(){
  /* ── Q6 CA step (Q6 values, not binary) ───────────────────────────── */
  function tmpStep(cells,rule){
    var n=cells.length,out=[];
    for(var i=0;i<n;i++){
      var l=cells[(i-1+n)%n],c=cells[i],r=cells[(i+1)%n];
      if(rule==='xor') out.push((l^r)&63);
      else if(rule==='xor3') out.push((l^c^r)&63);
      else if(rule==='and') out.push((l&r)&63);
      else out.push((l|r)&63);
    }
    return out;
  }
  function tmpOrbit(ic,rule){
    /* Returns P×N Q6 attractor grid */
    var seen={},t=0,cur=ic.slice();
    while(t<2000){
      var key=cur.join(',');
      if(key in seen){
        var trans=seen[key],period=t-trans;
        cur=ic.slice();
        for(var i=0;i<trans;i++) cur=tmpStep(cur,rule);
        var grid=[];
        for(var i=0;i<period;i++){grid.push(cur.slice()); cur=tmpStep(cur,rule);}
        return {grid:grid,period:period};
      }
      seen[key]=t++; cur=tmpStep(cur,rule);
    }
    return {grid:[ic.slice()],period:1};
  }
  /* ── DFT ─────────────────────────────────────────────────────────── */
  function tmpDFT(seq){
    var n=seq.length;
    if(!n) return [];
    var power=[], tpn=2*Math.PI/n;
    for(var k=0;k<=(n>>1);k++){
      var re=0,im=0;
      for(var j=0;j<n;j++){var a=-tpn*k*j; re+=seq[j]*Math.cos(a); im+=seq[j]*Math.sin(a);}
      power.push((re*re+im*im)/(n*n));
    }
    return power;
  }
  function tmpSpecH(power){
    var tot=0;
    for(var k=0;k<power.length;k++) tot+=power[k];
    if(!tot) return 0;
    var h=0;
    for(var k=0;k<power.length;k++){
      if(power[k]>0){var p=power[k]/tot; h-=p*Math.log2(p);}
    }
    return Math.max(0,h);
  }
  /* ── Main render ────────────────────────────────────────────────────── */
  function tmpRun(){
    var word=(document.getElementById('tmp-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('tmp-rule').value||'xor3';
    if(!window.encL) return;
    var ic=window.encL(word);
    var orb=tmpOrbit(ic,rule);
    var grid=orb.grid, P=orb.period, N=ic.length;
    /* Per-cell power spectra */
    var spectra=[],nFreqs=(P>>1)+1;
    for(var i=0;i<N;i++){
      var seq=[]; for(var t=0;t<P;t++) seq.push(grid[t][i]);
      spectra.push(tmpDFT(seq));
    }
    var specH=[]; for(var i=0;i<N;i++) specH.push(tmpSpecH(spectra[i]));
    /* Global max for colour scaling */
    var maxS=0;
    for(var i=0;i<N;i++) for(var k=0;k<nFreqs;k++) if(spectra[i][k]>maxS) maxS=spectra[i][k];
    /* ── Heatmap: N rows (cells) × nFreqs cols (freq bins) ─────────── */
    var hc=document.getElementById('tmp-hmap');
    var hx=hc.getContext('2d'); var W=hc.width,H=hc.height;
    hx.fillStyle='#0d0d0d'; hx.fillRect(0,0,W,H);
    var RCOL={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
    var col=RCOL[rule]||'#4fc3f7';
    var LABEL_W=38, TOP=24, CELL_H=Math.floor((H-TOP-16)/N);
    var BIN_W=Math.min(60,Math.floor((W-LABEL_W-10)/nFreqs));
    /* Axis labels */
    hx.fillStyle='#666'; hx.font='10px monospace'; hx.textAlign='center';
    for(var k=0;k<nFreqs;k++){
      hx.fillText('k='+k, LABEL_W+k*BIN_W+BIN_W/2, TOP-6);
    }
    hx.textAlign='right'; hx.font='9px monospace';
    /* Cells */
    for(var i=0;i<N;i++){
      var cy=TOP+i*CELL_H;
      hx.fillStyle='#555';
      hx.fillText(i, LABEL_W-3, cy+CELL_H/2+3);
      for(var k=0;k<nFreqs;k++){
        var v=maxS>0?spectra[i][k]/maxS:0;
        var r=Math.round(20+v*100), g=Math.round(60+v*160), b=Math.round(180+v*60);
        hx.fillStyle='rgb('+r+','+g+','+b+')';
        hx.fillRect(LABEL_W+k*BIN_W, cy, BIN_W-2, CELL_H-1);
      }
      /* H_s annotation */
      hx.fillStyle='rgba(255,255,255,0.6)'; hx.font='8px monospace'; hx.textAlign='left';
      hx.fillText('H='+specH[i].toFixed(2), LABEL_W+nFreqs*BIN_W+4, cy+CELL_H/2+3);
    }
    hx.textAlign='left';
    /* ── Spectral entropy bars ────────────────────────────────────────── */
    var bc=document.getElementById('tmp-bars');
    var bx=bc.getContext('2d'); var BW=bc.width,BH=bc.height;
    bx.fillStyle='#0d0d0d'; bx.fillRect(0,0,BW,BH);
    var maxH=Math.max.apply(null,specH)||1;
    var CW2=Math.floor((BW-LABEL_W-10)/N);
    for(var i=0;i<N;i++){
      var bh=specH[i]/maxH*(BH-30);
      bx.fillStyle=col; bx.globalAlpha=0.4+0.6*specH[i]/maxH;
      bx.fillRect(LABEL_W+i*CW2,BH-20-bh,CW2-2,bh);
      bx.globalAlpha=1;
      bx.fillStyle='#888'; bx.font='8px monospace'; bx.textAlign='center';
      bx.fillText(i,LABEL_W+i*CW2+CW2/2,BH-5);
    }
    bx.fillStyle='#666'; bx.textAlign='left'; bx.font='9px monospace';
    bx.fillText('H_s',2,BH/2);
    /* Stats */
    var meanH=specH.reduce(function(a,b){return a+b;},0)/N;
    var meanDC=spectra.reduce(function(a,s){
      var tot=s.reduce(function(x,y){return x+y;},0);
      return a+(tot>0?s[0]/tot:0);
    },0)/N;
    var domF=spectra.map(function(s){
      if(s.length<=1) return 0;
      var best=1;
      for(var k=2;k<s.length;k++) if(s[k]>s[best]) best=k;
      return best;
    });
    var modeCnt={};
    domF.forEach(function(k){modeCnt[k]=(modeCnt[k]||0)+1;});
    var globalK=Object.keys(modeCnt).reduce(function(a,b){return modeCnt[a]>modeCnt[b]?a:b;},0);
    document.getElementById('tmp-stats').innerHTML=
      'P='+P+'  freqs='+(nFreqs)+
      '  Hs̄='+meanH.toFixed(4)+
      '  DC̄='+meanDC.toFixed(3)+
      '  k*='+globalK+' (period '+(P/Number(globalK)).toFixed(1)+' шагов)';
  }
  window.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('tmp-word');
    if(sel&&window.LEXICON_ARR){
      window.LEXICON_ARR.forEach(function(w){
        var o=document.createElement('option');
        o.value=o.textContent=w;
        if(w==='ТУМАН') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('tmp-btn');
    var wordEl=document.getElementById('tmp-word');
    var ruleEl=document.getElementById('tmp-rule');
    if(btn)    btn.addEventListener('click',tmpRun);
    if(wordEl) wordEl.addEventListener('change',tmpRun);
    if(ruleEl) ruleEl.addEventListener('change',tmpRun);
    setTimeout(function(){if(window.encL) tmpRun();},1600);
  });
})();
</script>
</div>
<div class="section">
<h2>Персистентность Q6 — длины серий на аттракторе</h2>
<p class="meta">Для бинаризованного аттрактора (порог=32): persistence(i) = 1 − transitions/P · mean_run(i) = P / n_runs · CV = std/mean по длинам серий · высокая персистентность → медленные осцилляции, низкая → быстрые переключения</p>
<div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
  <select id="prs-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
  </select>
  <select id="prs-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
    <option value="xor3" selected>XOR3</option>
    <option value="xor">XOR</option>
    <option value="and">AND</option>
    <option value="or">OR</option>
  </select>
  <button id="prs-btn"
    style="background:#1e3a4a;color:#4fc3f7;border:1px solid #2a5a7a;
           padding:4px 14px;cursor:pointer;font-size:13px">Запустить</button>
</div>
<canvas id="prs-cell" width="530" height="130"
  style="display:block;border:1px solid #1a1a1a;margin-bottom:6px"></canvas>
<canvas id="prs-run"  width="530" height="110"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="prs-stats"
  style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"> </div>
<script>
(function(){
  /* ── Q6 CA helpers ─────────────────────────────────────────────────── */
  function prsStep(cells,rule){
    var n=cells.length,out=[];
    for(var i=0;i<n;i++){
      var l=cells[(i-1+n)%n],c=cells[i],r=cells[(i+1)%n];
      if(rule==='xor')       out.push((l^r)&63);
      else if(rule==='xor3') out.push((l^c^r)&63);
      else if(rule==='and')  out.push((l&r)&63);
      else                   out.push((l|r)&63);
    }
    return out;
  }
  function prsOrbit(ic,rule){
    var seen={},t=0,cur=ic.slice();
    while(t<2000){
      var key=cur.join(',');
      if(key in seen){
        var trans=seen[key],period=t-trans;
        cur=ic.slice();
        for(var i=0;i<trans;i++) cur=prsStep(cur,rule);
        var grid=[];
        for(var i=0;i<period;i++){
          grid.push(cur.map(function(v){return v>=32?1:0;}));
          cur=prsStep(cur,rule);
        }
        return grid;
      }
      seen[key]=t++;
      cur=prsStep(cur,rule);
    }
    return [ic.map(function(v){return v>=32?1:0;})];
  }
  /* ── Run-length / persistence computation ────────────────────────── */
  function prsRL(seq){
    var n=seq.length;
    if(n===0) return [];
    if(n===1) return [1];
    var trans=[];
    for(var t=0;t<n;t++) if(seq[t]!==seq[(t+1)%n]) trans.push(t);
    if(!trans.length) return [n];
    var nt=trans.length,runs=[];
    for(var i=0;i<nt;i++){
      var s=trans[i],e=trans[(i+1)%nt];
      runs.push(e>s?e-s:n-s+e);
    }
    return runs;
  }
  function prsPersist(seq){
    var n=seq.length;
    if(n<=1) return 1.0;
    var tr=0;
    for(var t=0;t<n;t++) if(seq[t]!==seq[(t+1)%n]) tr++;
    return 1.0-tr/n;
  }
  /* ── Main render ────────────────────────────────────────────────── */
  window.prsRun=function(){
    var word=(document.getElementById('prs-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('prs-rule').value||'xor3';
    if(!window.encL) return;
    var ic=window.encL(word);
    var grid=prsOrbit(ic,rule);
    var P=grid.length;
    if(!P) return;
    var N=grid[0].length;
    /* Per-cell stats */
    var persts=[],mruns=[],maxruns=[],cvs=[];
    var hist={};
    for(var i=0;i<N;i++){
      var seq=[];
      for(var t=0;t<P;t++) seq.push(grid[t][i]);
      var runs=prsRL(seq);
      var nr=runs.length;
      var mr=runs.reduce(function(a,b){return a+b;},0)/nr;
      var maxr=Math.max.apply(null,runs);
      var variance=nr>1?runs.reduce(function(a,b){return a+(b-mr)*(b-mr);},0)/nr:0;
      var std=Math.sqrt(variance);
      persts.push(prsPersist(seq));
      mruns.push(mr);
      maxruns.push(maxr);
      cvs.push(mr>0?std/mr:0);
      runs.forEach(function(r){ hist[r]=(hist[r]||0)+1; });
    }
    var RCOL={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
    var col=RCOL[rule]||'#4fc3f7';
    var meanP=persts.reduce(function(a,b){return a+b;},0)/N;
    var meanR=mruns.reduce(function(a,b){return a+b;},0)/N;
    var meanCV=cvs.reduce(function(a,b){return a+b;},0)/N;
    var maxRG=Math.max.apply(null,maxruns);
    var allPersist=persts.every(function(p){return p===1;});
    var allAlt=persts.every(function(p){return p===0;});
    /* ── Per-cell persistence bars ────────────────────────────────── */
    var cc=document.getElementById('prs-cell');
    var cx=cc.getContext('2d');
    var W=cc.width,H=cc.height;
    cx.fillStyle='#0d0d0d'; cx.fillRect(0,0,W,H);
    var CellW=Math.floor((W-44)/N);
    var BARMAX=H-44;
    for(var i=0;i<N;i++){
      var p=persts[i];
      var bh=Math.round(p*BARMAX);
      cx.globalAlpha=0.2+0.8*p;
      cx.fillStyle=col;
      cx.fillRect(42+i*CellW,H-28-bh,CellW-2,bh);
      cx.globalAlpha=1;
      cx.strokeStyle=col; cx.lineWidth=0.5;
      cx.strokeRect(42+i*CellW,H-28-BARMAX,CellW-2,BARMAX);
      cx.fillStyle='#ccc'; cx.font='8px monospace'; cx.textAlign='center';
      cx.fillText(i,42+i*CellW+CellW/2,H-4);
      cx.fillStyle='#fff'; cx.font='8px monospace';
      cx.fillText(p.toFixed(2),42+i*CellW+CellW/2,H-18);
    }
    cx.fillStyle='#777'; cx.textAlign='left'; cx.font='9px monospace';
    cx.fillText('pers',2,H/2-4);
    /* ── Run distribution histogram ───────────────────────────────── */
    var rc=document.getElementById('prs-run');
    var rx=rc.getContext('2d');
    var RW=rc.width,RH=rc.height;
    rx.fillStyle='#0d0d0d'; rx.fillRect(0,0,RW,RH);
    var keys=Object.keys(hist).map(Number).sort(function(a,b){return a-b;});
    var maxCnt=Math.max.apply(null,keys.map(function(k){return hist[k];}));
    var NR=keys.length;
    if(NR>0){
      var BW=Math.min(40,Math.floor((RW-60)/NR));
      var X0=40;
      for(var ki=0;ki<NR;ki++){
        var r=keys[ki],cnt=hist[r];
        var bh2=Math.round((cnt/maxCnt)*(RH-40));
        rx.fillStyle=col; rx.globalAlpha=0.7;
        rx.fillRect(X0+ki*(BW+4),RH-28-bh2,BW,bh2);
        rx.globalAlpha=1;
        rx.fillStyle='#ccc'; rx.font='8px monospace'; rx.textAlign='center';
        rx.fillText('r='+r,X0+ki*(BW+4)+BW/2,RH-14);
        rx.fillStyle='#aaa';
        rx.fillText(cnt,X0+ki*(BW+4)+BW/2,RH-28-bh2-3);
      }
    }
    rx.fillStyle='#777'; rx.textAlign='left'; rx.font='9px monospace';
    rx.fillText('run\ndist',2,RH/2);
    /* Stats */
    document.getElementById('prs-stats').innerHTML=
      'P='+P+
      '  persist\u0304='+meanP.toFixed(4)+
      '  run\u0304='+meanR.toFixed(3)+
      '  CV\u0304='+meanCV.toFixed(3)+
      '  max_run='+maxRG+
      (allPersist?' \u00b7 \u0432\u0441\u0435 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b':'')+(allAlt?' \u00b7 \u0432\u0441\u0435 \u0447\u0435\u0440\u0435\u0434\u0443\u044e\u0449\u0438\u0435\u0441\u044f':'');
  };
  window.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('prs-word');
    if(sel&&window.LEXICON_ARR){
      window.LEXICON_ARR.forEach(function(w){
        var o=document.createElement('option');
        o.value=o.textContent=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('prs-btn');
    var wordEl=document.getElementById('prs-word');
    var ruleEl=document.getElementById('prs-rule');
    if(btn)    btn.addEventListener('click',prsRun);
    if(wordEl) wordEl.addEventListener('change',prsRun);
    if(ruleEl) ruleEl.addEventListener('change',prsRun);
    setTimeout(function(){if(window.encL) prsRun();},1700);
  });
})();
</script>
</div>
<div class="section">
<h2>C-H плоскость Q6 — энтропийная сложность (Rosso 2007)</h2>
<p class="meta">x = H_S = H_PE / log₂(m!) ∈ [0,1] нормированная энтропия перестановок · y = C = H_S · D_JS(P‖U) ∈ [0,1] статистическая сложность · фиксированная точка → (0,0); период-2 → (0.39, 0.18); сложный P=8 → (0.98, 0.01)</p>
<div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
  <select id="chp-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
  </select>
  <select id="chp-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
    <option value="xor3" selected>XOR3</option>
    <option value="xor">XOR</option>
    <option value="and">AND</option>
    <option value="or">OR</option>
  </select>
  <button id="chp-btn"
    style="background:#1e3a4a;color:#4fc3f7;border:1px solid #2a5a7a;
           padding:4px 14px;cursor:pointer;font-size:13px">Запустить</button>
</div>
<canvas id="chp-plot" width="530" height="260"
  style="display:block;border:1px solid #1a1a1a;margin-bottom:6px"></canvas>
<canvas id="chp-cell" width="530" height="90"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="chp-stats"
  style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"> </div>
<script>
(function(){
  /* ── Q6 CA helpers ─────────────────────────────────────────────────── */
  var M_ORD = 3, M_FACT = 6;   // m=3, m!=6
  function chpStep(cells,rule){
    var n=cells.length,out=[];
    for(var i=0;i<n;i++){
      var l=cells[(i-1+n)%n],c=cells[i],r=cells[(i+1)%n];
      if(rule==='xor')       out.push((l^r)&63);
      else if(rule==='xor3') out.push((l^c^r)&63);
      else if(rule==='and')  out.push((l&r)&63);
      else                   out.push((l|r)&63);
    }
    return out;
  }
  function chpOrbit(ic,rule){
    var seen={},t=0,cur=ic.slice();
    while(t<2000){
      var key=cur.join(',');
      if(key in seen){
        var trans=seen[key],period=Math.max(t-trans,1);
        cur=ic.slice();
        for(var i=0;i<trans;i++) cur=chpStep(cur,rule);
        var rows=[]; var rep=Math.max(1,Math.ceil(64/period));
        for(var i=0;i<period*rep;i++){rows.push(cur.slice());cur=chpStep(cur,rule);}
        return {rows:rows,period:period};
      }
      seen[key]=t++;
      cur=chpStep(cur,rule);
    }
    return {rows:[ic.slice()],period:1};
  }
  /* ── Ordinal pattern (stable sort) ─────────────────────────────────── */
  function ordPat(window){
    var m=window.length;
    var idx=[];
    for(var i=0;i<m;i++) idx.push(i);
    idx.sort(function(a,b){return window[a]!==window[b]?window[a]-window[b]:a-b;});
    var ranks=new Array(m);
    for(var r=0;r<m;r++) ranks[idx[r]]=r;
    return ranks.join(',');
  }
  function patDist(rows,cellIdx){
    var m=M_ORD,counts={},total=0;
    var n=rows.length;
    for(var j=0;j<n-m+1;j++){
      var win=[];
      for(var k=0;k<m;k++) win.push(rows[j+k][cellIdx]);
      var key=ordPat(win);
      counts[key]=(counts[key]||0)+1; total++;
    }
    var dist={};
    if(total) for(var k in counts) dist[k]=counts[k]/total;
    return dist;
  }
  function hNorm(dist){
    var M=M_FACT,h=0;
    for(var k in dist){var p=dist[k]; if(p>0) h-=p*Math.log2(p);}
    return M>1?Math.max(0,Math.min(h/Math.log2(M),1)):0;
  }
  function jsdUniform(dist){
    var M=M_FACT,u=1/M,nMiss=M-Object.keys(dist).length,hMix=0;
    for(var k in dist){var q=(dist[k]+u)/2; if(q>0) hMix-=q*Math.log2(q);}
    if(nMiss>0){var qm=u/2; hMix-=nMiss*qm*Math.log2(qm);}
    var hP=0; for(var k in dist){var p=dist[k]; if(p>0) hP-=p*Math.log2(p);}
    var hU=Math.log2(M);
    return Math.max(0,Math.min((hMix-(hP+hU)/2),1));
  }
  function chpPoint(rows,cellIdx){
    var d=patDist(rows,cellIdx);
    var hs=hNorm(d),djs=jsdUniform(d);
    return {hs:hs,djs:djs,c:hs*djs,nPat:Object.keys(d).length};
  }
  /* ── Main render ────────────────────────────────────────────────── */
  var RCOL={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
  var RULES=['xor','xor3','and','or'];
  window.chpRun=function(){
    var word=(document.getElementById('chp-word').value||'ТУМАН').toUpperCase();
    var activeRule=document.getElementById('chp-rule').value||'xor3';
    if(!window.encL) return;
    var ic=window.encL(word);
    /* Compute for all 4 rules */
    var ruleData={};
    RULES.forEach(function(rule){
      var res=chpOrbit(ic,rule);
      var N=res.rows[0].length;
      var pts=[],sumHs=0,sumC=0;
      for(var i=0;i<N;i++){var p=chpPoint(res.rows,i);pts.push(p);sumHs+=p.hs;sumC+=p.c;}
      var poolD={},poolT=0;
      res.rows.forEach(function(row,ri){
        if(ri<res.rows.length-M_ORD+1){
          for(var ci=0;ci<N;ci++){
            var win=[];
            for(var k=0;k<M_ORD;k++) win.push(res.rows[ri+k][ci]);
            var key=ordPat(win);
            poolD[key]=(poolD[key]||0)+1; poolT++;
          }
        }
      });
      var poolDist={};
      if(poolT) for(var k in poolD) poolDist[k]=poolD[k]/poolT;
      var phS=hNorm(poolDist),pdjs=jsdUniform(poolDist);
      ruleData[rule]={pts:pts,poolHs:phS,poolC:phS*pdjs,meanHs:sumHs/N,meanC:sumC/N,period:res.period};
    });
    /* ── C-H scatter plot ───────────────────────────────────────── */
    var pc=document.getElementById('chp-plot');
    var cx=pc.getContext('2d');
    var W=pc.width,H=pc.height;
    cx.fillStyle='#0d0d0d'; cx.fillRect(0,0,W,H);
    var X0=58,YBASE=H-38,XEND=W-20,YTOP=20;
    var WPLOT=XEND-X0,HPLOT=YBASE-YTOP;
    /* Axes */
    cx.strokeStyle='#333'; cx.lineWidth=1;
    cx.beginPath(); cx.moveTo(X0,YTOP); cx.lineTo(X0,YBASE); cx.lineTo(XEND,YBASE); cx.stroke();
    [0,0.25,0.5,0.75,1.0].forEach(function(f){
      var x=X0+f*WPLOT;
      cx.strokeStyle='#1a1a1a'; cx.beginPath(); cx.moveTo(x,YTOP); cx.lineTo(x,YBASE); cx.stroke();
      cx.fillStyle='#666'; cx.font='9px monospace'; cx.textAlign='center';
      cx.fillText(f.toFixed(2),x,YBASE+14);
    });
    [0,0.1,0.2,0.3,0.4].forEach(function(f){
      var y=YBASE-f*HPLOT/0.4;
      cx.strokeStyle='#1a1a1a'; cx.beginPath(); cx.moveTo(X0,y); cx.lineTo(XEND,y); cx.stroke();
      cx.fillStyle='#666'; cx.font='9px monospace'; cx.textAlign='right';
      cx.fillText(f.toFixed(2),X0-4,y+3);
    });
    cx.fillStyle='#555'; cx.font='10px monospace'; cx.textAlign='center';
    cx.fillText('H_S (энтропия)',X0+WPLOT/2,H-4);
    cx.save(); cx.translate(14,YTOP+HPLOT/2); cx.rotate(-Math.PI/2);
    cx.fillText('C (сложность)',0,0); cx.restore();
    /* Draw per-cell points (small) for active rule */
    var act=ruleData[activeRule];
    if(act){
      act.pts.forEach(function(pt){
        var x=X0+pt.hs*WPLOT, y=YBASE-Math.min(pt.c/0.4,1)*HPLOT;
        cx.beginPath(); cx.arc(x,y,3,0,Math.PI*2);
        cx.fillStyle=RCOL[activeRule]||'#4fc3f7'; cx.globalAlpha=0.4; cx.fill();
        cx.globalAlpha=1;
      });
    }
    /* Draw pooled points for all 4 rules */
    var RNAME={xor:'XOR',xor3:'XOR3',and:'AND',or:'OR'};
    RULES.forEach(function(rule){
      var d=ruleData[rule];
      if(!d) return;
      var x=X0+d.poolHs*WPLOT, y=YBASE-Math.min(d.poolC/0.4,1)*HPLOT;
      cx.beginPath(); cx.arc(x,y,rule===activeRule?9:6,0,Math.PI*2);
      cx.fillStyle=RCOL[rule]||'#aaa'; cx.globalAlpha=rule===activeRule?1:0.6; cx.fill();
      cx.globalAlpha=1;
      cx.fillStyle='#111'; cx.font='8px monospace'; cx.textAlign='center';
      cx.fillText(RNAME[rule],x,y+3);
      cx.fillStyle=RCOL[rule]; cx.font='8px monospace';
      cx.fillText('('+d.poolHs.toFixed(2)+','+d.poolC.toFixed(3)+')',x,y-12);
    });
    /* ── Per-cell C bars for active rule ──────────────────────────── */
    var hc=document.getElementById('chp-cell');
    var hx=hc.getContext('2d');
    var CW=hc.width,CH=hc.height;
    hx.fillStyle='#0d0d0d'; hx.fillRect(0,0,CW,CH);
    var N2=act?act.pts.length:16;
    var CellW=Math.floor((CW-44)/N2);
    var cmax=act?Math.max.apply(null,act.pts.map(function(p){return p.c;}))||0.001:0.001;
    if(act) act.pts.forEach(function(p,i){
      var frac=p.c/cmax;
      hx.globalAlpha=0.2+0.8*frac; hx.fillStyle=RCOL[activeRule]||'#4fc3f7';
      var bh=Math.round(frac*(CH-34));
      hx.fillRect(42+i*CellW,CH-18-bh,CellW-2,bh);
      hx.globalAlpha=1;
      hx.fillStyle='#ccc'; hx.font='8px monospace'; hx.textAlign='center';
      hx.fillText(i,42+i*CellW+CellW/2,CH-4);
      if(p.c>0.005) hx.fillText(p.c.toFixed(2),42+i*CellW+CellW/2,CH-18-bh-3);
    });
    hx.fillStyle='#777'; hx.textAlign='left'; hx.font='9px monospace'; hx.fillText('C',2,CH/2);
    /* Stats */
    var ad=ruleData[activeRule];
    document.getElementById('chp-stats').innerHTML=
      'P='+ad.period+
      '  H_S(pool)='+ad.poolHs.toFixed(4)+
      '  C(pool)='+ad.poolC.toFixed(4)+
      '  mean_H_S='+ad.meanHs.toFixed(4)+
      '  mean_C='+ad.meanC.toFixed(4);
  };
  window.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('chp-word');
    if(sel&&window.LEXICON_ARR){
      window.LEXICON_ARR.forEach(function(w){
        var o=document.createElement('option');
        o.value=o.textContent=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('chp-btn');
    var wordEl=document.getElementById('chp-word');
    var ruleEl=document.getElementById('chp-rule');
    if(btn)    btn.addEventListener('click',chpRun);
    if(wordEl) wordEl.addEventListener('change',chpRun);
    if(ruleEl) ruleEl.addEventListener('change',chpRun);
    setTimeout(function(){if(window.encL) chpRun();},2000);
  });
})();
</script>
</div>
<div class="section">
<h2>Мультимасштабная энтропия Q6 (MSE) — сложность по шкалам</h2>
<p class="meta">Для каждой шкалы τ=1..6: огрублённый ряд y_j^(τ)=(1/τ)Σ x_i, затем Sample Entropy SampEn(m=2, r=0.15σ) · CI = среднее по шкалам · τ* = шкала пика · постоянные → SampEn≈0; P=8 XOR3 → осциллирующий профиль</p>
<div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
  <select id="mse-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
  </select>
  <select id="mse-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
    <option value="xor3" selected>XOR3</option>
    <option value="xor">XOR</option>
    <option value="and">AND</option>
    <option value="or">OR</option>
  </select>
  <button id="mse-btn"
    style="background:#1e3a4a;color:#4fc3f7;border:1px solid #2a5a7a;
           padding:4px 14px;cursor:pointer;font-size:13px">Запустить</button>
</div>
<canvas id="mse-profile" width="530" height="200"
  style="display:block;border:1px solid #1a1a1a;margin-bottom:6px"></canvas>
<canvas id="mse-cell"    width="530" height="90"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="mse-stats"
  style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"> </div>
<script>
(function(){
  /* ── Q6 CA helpers ─────────────────────────────────────────────────── */
  function mseStep(cells,rule){
    var n=cells.length,out=[];
    for(var i=0;i<n;i++){
      var l=cells[(i-1+n)%n],c=cells[i],r=cells[(i+1)%n];
      if(rule==='xor')       out.push((l^r)&63);
      else if(rule==='xor3') out.push((l^c^r)&63);
      else if(rule==='and')  out.push((l&r)&63);
      else                   out.push((l|r)&63);
    }
    return out;
  }
  function mseOrbit(ic,rule,minLen){
    var seen={},t=0,cur=ic.slice();
    while(t<2000){
      var key=cur.join(',');
      if(key in seen){
        var trans=seen[key],period=Math.max(t-trans,1);
        cur=ic.slice();
        for(var i=0;i<trans;i++) cur=mseStep(cur,rule);
        var rep=Math.max(1,Math.ceil(minLen/period));
        var rows=[];
        for(var i=0;i<period*rep;i++){
          rows.push(cur.slice());
          cur=mseStep(cur,rule);
        }
        return {rows:rows,period:period};
      }
      seen[key]=t++;
      cur=mseStep(cur,rule);
    }
    return {rows:[ic.slice()],period:1};
  }
  /* ── Sample Entropy ─────────────────────────────────────────────── */
  function cgSeries(seq,tau){
    var n=seq.length,cg=[];
    for(var j=0;j<Math.floor(n/tau);j++){
      var s=0;
      for(var k=0;k<tau;k++) s+=seq[j*tau+k];
      cg.push(s/tau);
    }
    return cg;
  }
  function sampEn(series,m,r){
    var n=series.length;
    if(n<m+2) return NaN;
    function countT(len){
      var lim=n-len,count=0;
      for(var i=0;i<lim;i++){
        for(var j=0;j<lim;j++){
          if(i===j) continue;
          var ok=true;
          for(var k=0;k<len;k++){if(Math.abs(series[i+k]-series[j+k])>r){ok=false;break;}}
          if(ok) count++;
        }
      }
      return count;
    }
    var B=countT(m); if(B===0) return NaN;
    var A=countT(m+1); if(A===0) return Infinity;
    return Math.max(0,-Math.log(A/B));
  }
  function mseCellProfile(seq,maxTau){
    var n=seq.length,m=2;
    var mu=seq.reduce(function(a,b){return a+b;},0)/n;
    var sigma=Math.sqrt(seq.reduce(function(a,b){return a+(b-mu)*(b-mu);},0)/n);
    var r=0.15*sigma;
    var prof=[];
    for(var tau=1;tau<=maxTau;tau++){
      var cg=cgSeries(seq,tau);
      prof.push(cg.length>=10?sampEn(cg,m,r):NaN);
    }
    return prof;
  }
  /* ── Main render ────────────────────────────────────────────────── */
  window.mseRun=function(){
    var word=(document.getElementById('mse-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('mse-rule').value||'xor3';
    var MAX_TAU=6,MIN_LEN=100;
    if(!window.encL) return;
    var ic=window.encL(word);
    var res=mseOrbit(ic,rule,MIN_LEN);
    var rows=res.rows,P=res.period,N=rows[0].length;
    var cellProfs=[],meanProf=[];
    for(var i=0;i<N;i++){
      var seq=[];
      for(var t=0;t<rows.length;t++) seq.push(rows[t][i]);
      cellProfs.push(mseCellProfile(seq,MAX_TAU));
    }
    for(var ti=0;ti<MAX_TAU;ti++){
      var vals=[];
      for(var i=0;i<N;i++){var v=cellProfs[i][ti]; if(!isNaN(v)&&isFinite(v)) vals.push(v);}
      meanProf.push(vals.length?vals.reduce(function(a,b){return a+b;},0)/vals.length:NaN);
    }
    var RCOL={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
    var col=RCOL[rule]||'#4fc3f7';
    var validMean=meanProf.filter(function(v){return !isNaN(v)&&isFinite(v);});
    var seMax=validMean.length?Math.max.apply(null,validMean):1; seMax=Math.max(seMax,0.001);
    var CI=validMean.length?validMean.reduce(function(a,b){return a+b;},0)/validMean.length:0;
    var peakIdx=0;
    for(var i=1;i<meanProf.length;i++) if(!isNaN(meanProf[i])&&meanProf[i]>(meanProf[peakIdx]||0)) peakIdx=i;
    /* ── Profile line chart ─────────────────────────────────────── */
    var pc=document.getElementById('mse-profile');
    var cx=pc.getContext('2d');
    var W=pc.width,H=pc.height;
    cx.fillStyle='#0d0d0d'; cx.fillRect(0,0,W,H);
    var X0=58,YBASE=H-32,XEND=W-16,YMAXP=H-52;
    var WPLOT=XEND-X0,HPLOT=YBASE-YMAXP;
    [0,0.25,0.5,0.75,1.0].forEach(function(f){
      var y=YBASE-f*HPLOT;
      cx.strokeStyle='#222'; cx.lineWidth=0.5;
      cx.beginPath(); cx.moveTo(X0,y); cx.lineTo(XEND,y); cx.stroke();
      cx.fillStyle='#555'; cx.font='9px monospace'; cx.textAlign='right';
      cx.fillText((f*seMax).toFixed(3),X0-4,y+3);
    });
    for(var tau=1;tau<=MAX_TAU;tau++){
      var x=X0+(tau-1)*WPLOT/(MAX_TAU-1);
      cx.fillStyle='#666'; cx.font='9px monospace'; cx.textAlign='center';
      cx.fillText('\u03c4='+tau,x,YBASE+14);
    }
    cx.strokeStyle=col; cx.lineWidth=2;
    cx.beginPath(); var started=false;
    for(var ti=0;ti<MAX_TAU;ti++){
      var v=meanProf[ti]; if(isNaN(v)||!isFinite(v)) continue;
      var x=X0+ti*WPLOT/(MAX_TAU-1), y=YBASE-(v/seMax)*HPLOT;
      if(!started){cx.moveTo(x,y);started=true;} else cx.lineTo(x,y);
    }
    cx.stroke();
    for(var ti=0;ti<MAX_TAU;ti++){
      var v=meanProf[ti]; if(isNaN(v)||!isFinite(v)) continue;
      var x=X0+ti*WPLOT/(MAX_TAU-1), y=YBASE-(v/seMax)*HPLOT;
      cx.beginPath(); cx.arc(x,y,4,0,Math.PI*2);
      cx.fillStyle=ti===peakIdx?'#fff':col; cx.fill();
      cx.fillStyle='#ccc'; cx.font='9px monospace'; cx.textAlign='center';
      cx.fillText(v.toFixed(3),x,y-9);
    }
    cx.fillStyle='#777'; cx.textAlign='left'; cx.font='9px monospace'; cx.fillText('SE',2,H/2);
    /* ── Per-cell τ=1 bars ──────────────────────────────────────── */
    var hc=document.getElementById('mse-cell');
    var hx=hc.getContext('2d');
    var CW=hc.width,CH=hc.height;
    hx.fillStyle='#0d0d0d'; hx.fillRect(0,0,CW,CH);
    var CellW=Math.floor((CW-44)/N);
    var cell1max=0;
    for(var i=0;i<N;i++){var v=cellProfs[i][0]; if(!isNaN(v)&&isFinite(v)&&v>cell1max) cell1max=v;}
    cell1max=Math.max(cell1max,0.001);
    for(var i=0;i<N;i++){
      var v=cellProfs[i][0], frac=(!isNaN(v)&&isFinite(v))?v/cell1max:0;
      hx.globalAlpha=0.2+0.8*frac; hx.fillStyle=col;
      var bh=Math.round(frac*(CH-34));
      hx.fillRect(42+i*CellW,CH-18-bh,CellW-2,bh);
      hx.globalAlpha=1;
      hx.fillStyle='#ccc'; hx.font='8px monospace'; hx.textAlign='center';
      hx.fillText(i,42+i*CellW+CellW/2,CH-4);
      if(!isNaN(v)&&v>0.005) hx.fillText(v.toFixed(2),42+i*CellW+CellW/2,CH-18-bh-3);
    }
    hx.fillStyle='#777'; hx.textAlign='left'; hx.font='9px monospace'; hx.fillText('SE\u03c4=1',2,CH/2);
    /* Stats */
    document.getElementById('mse-stats').innerHTML=
      'P='+P+'  CI='+CI.toFixed(4)+
      '  \u03c4*='+(peakIdx+1)+
      '  peak_SE='+(!isNaN(meanProf[peakIdx])?meanProf[peakIdx].toFixed(4):'—')+
      '  SE(\u03c4=1)='+(!isNaN(meanProf[0])?meanProf[0].toFixed(4):'—');
  };
  window.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('mse-word');
    if(sel&&window.LEXICON_ARR){
      window.LEXICON_ARR.forEach(function(w){
        var o=document.createElement('option');
        o.value=o.textContent=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('mse-btn');
    var wordEl=document.getElementById('mse-word');
    var ruleEl=document.getElementById('mse-rule');
    if(btn)    btn.addEventListener('click',mseRun);
    if(wordEl) wordEl.addEventListener('change',mseRun);
    if(ruleEl) ruleEl.addEventListener('change',mseRun);
    setTimeout(function(){if(window.encL) mseRun();},1900);
  });
})();
</script>
</div>
<div class="section">
<h2>Блочная энтропия Q6 — H_n, скорость энтропии, избыточность</h2>
<p class="meta">H_n = −Σ P(x) log₂ P(x) для n-граммного распределения всех клеток аттрактора (бинаризация порог=32) · h_n = H_{n+1} − H_n — условная энтропия (убывает) · E ≈ H_{max_n} — избыточная энтропия (сложность) · n* — насыщение контекста</p>
<div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
  <select id="blo-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
  </select>
  <select id="blo-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
    <option value="xor3" selected>XOR3</option>
    <option value="xor">XOR</option>
    <option value="and">AND</option>
    <option value="or">OR</option>
  </select>
  <button id="blo-btn"
    style="background:#1e3a4a;color:#4fc3f7;border:1px solid #2a5a7a;
           padding:4px 14px;cursor:pointer;font-size:13px">Запустить</button>
</div>
<canvas id="blo-profile" width="530" height="220"
  style="display:block;border:1px solid #1a1a1a;margin-bottom:6px"></canvas>
<canvas id="blo-rate"    width="530" height="90"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="blo-stats"
  style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"> </div>
<script>
(function(){
  /* ── Q6 CA helpers ─────────────────────────────────────────────────── */
  function bloStep(cells,rule){
    var n=cells.length,out=[];
    for(var i=0;i<n;i++){
      var l=cells[(i-1+n)%n],c=cells[i],r=cells[(i+1)%n];
      if(rule==='xor')       out.push((l^r)&63);
      else if(rule==='xor3') out.push((l^c^r)&63);
      else if(rule==='and')  out.push((l&r)&63);
      else                   out.push((l|r)&63);
    }
    return out;
  }
  function bloOrbit(ic,rule){
    var seen={},t=0,cur=ic.slice();
    while(t<2000){
      var key=cur.join(',');
      if(key in seen){
        var trans=seen[key],period=t-trans;
        cur=ic.slice();
        for(var i=0;i<trans;i++) cur=bloStep(cur,rule);
        var grid=[];
        for(var i=0;i<period;i++){
          grid.push(cur.map(function(v){return v>=32?1:0;}));
          cur=bloStep(cur,rule);
        }
        return grid;
      }
      seen[key]=t++;
      cur=bloStep(cur,rule);
    }
    return [ic.map(function(v){return v>=32?1:0;})];
  }
  /* ── Block entropy computation ────────────────────────────────────── */
  function bloHBlock(seqs,n){
    var counts={},total=0;
    for(var si=0;si<seqs.length;si++){
      var s=seqs[si],m=s.length;
      for(var t=0;t<m;t++){
        var gram=[];
        for(var j=0;j<n;j++) gram.push(s[(t+j)%m]);
        var key=gram.join('');
        counts[key]=(counts[key]||0)+1; total++;
      }
    }
    if(!total) return 0;
    var h=0;
    for(var k in counts){var p=counts[k]/total; h-=p*Math.log2(p);}
    return Math.max(0,h);
  }
  function bloProfile(seqs,maxN){
    var prof=[];
    for(var n=1;n<=maxN;n++) prof.push(bloHBlock(seqs,n));
    return prof;
  }
  /* ── Main render ────────────────────────────────────────────────── */
  window.bloRun=function(){
    var word=(document.getElementById('blo-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('blo-rule').value||'xor3';
    var MAX_N=8;
    if(!window.encL) return;
    var ic=window.encL(word);
    var grid=bloOrbit(ic,rule);
    var P=grid.length;
    if(!P) return;
    var N=grid[0].length;
    var seqs=[];
    for(var i=0;i<N;i++){
      var s=[];
      for(var t=0;t<P;t++) s.push(grid[t][i]);
      seqs.push(s);
    }
    var prof=bloProfile(seqs,MAX_N);
    var rates=[];
    for(var i=1;i<prof.length;i++) rates.push(Math.max(0,prof[i]-prof[i-1]));
    var h1=prof[0]||0;
    var hMax=Math.max.apply(null,prof)||1;
    var exc=prof[prof.length-1]||0;
    var hInf=rates.length?rates[rates.length-1]:0;
    /* saturation index n* */
    var nStar=MAX_N;
    for(var i=0;i<rates.length;i++){if(rates[i]<0.01){nStar=i+2;break;}}
    var RCOL={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
    var col=RCOL[rule]||'#4fc3f7';
    /* ── H_n profile bars ──────────────────────────────────────────── */
    var pc=document.getElementById('blo-profile');
    var cx=pc.getContext('2d');
    var W=pc.width,H=pc.height;
    cx.fillStyle='#0d0d0d'; cx.fillRect(0,0,W,H);
    var BAR_W=52,BAR_GAP=6,X0=58,YBASE=H-38,MAX_HB=H-58;
    /* axis labels */
    cx.fillStyle='#555'; cx.font='10px monospace'; cx.textAlign='right';
    [0,0.25,0.5,0.75,1.0].forEach(function(frac){
      var y=YBASE-frac*MAX_HB;
      cx.fillStyle='#333'; cx.fillRect(X0-3,y,W-X0+3,1);
      cx.fillStyle='#666'; cx.fillText((frac*hMax).toFixed(2),X0-5,y+3);
    });
    for(var i=0;i<prof.length;i++){
      var hn=prof[i];
      var bh=hMax>0?Math.round((hn/hMax)*MAX_HB):0;
      var rate=i<rates.length?rates[i]:0;
      var rFrac=h1>0?rate/h1:0;
      var g=Math.round(rFrac*120+80); // green component — higher rate = greener
      cx.fillStyle='rgba(50,'+g+',160,0.75)';
      cx.globalAlpha=0.3+0.7*(hMax>0?hn/hMax:0);
      cx.fillRect(X0+i*(BAR_W+BAR_GAP),YBASE-bh,BAR_W,bh);
      cx.globalAlpha=1;
      cx.strokeStyle=col; cx.lineWidth=0.5;
      cx.strokeRect(X0+i*(BAR_W+BAR_GAP),YBASE-MAX_HB,BAR_W,MAX_HB);
      cx.fillStyle='#bbb'; cx.font='10px monospace'; cx.textAlign='center';
      cx.fillText('n='+(i+1),X0+i*(BAR_W+BAR_GAP)+BAR_W/2,YBASE+12);
      if(hn>0.01)
        cx.fillText(hn.toFixed(2),X0+i*(BAR_W+BAR_GAP)+BAR_W/2,YBASE-bh-5);
    }
    cx.textAlign='left';
    cx.fillStyle='#777'; cx.font='10px monospace';
    cx.fillText('H_n\n(bits)',2,H/2);
    /* ── h_n rate bars ─────────────────────────────────────────────── */
    var rc=document.getElementById('blo-rate');
    var rx=rc.getContext('2d');
    var RW=rc.width,RH=rc.height;
    rx.fillStyle='#0d0d0d'; rx.fillRect(0,0,RW,RH);
    var rMax=rates.length?Math.max.apply(null,rates)||1:1;
    for(var i=0;i<rates.length;i++){
      var bh2=Math.round((rates[i]/rMax)*(RH-36));
      rx.fillStyle=col; rx.globalAlpha=0.3+0.7*(rates[i]/rMax);
      rx.fillRect(X0+i*(BAR_W+BAR_GAP),RH-22-bh2,BAR_W,bh2);
      rx.globalAlpha=1;
      rx.fillStyle='#aaa'; rx.font='9px monospace'; rx.textAlign='center';
      rx.fillText('h'+(i+2),X0+i*(BAR_W+BAR_GAP)+BAR_W/2,RH-6);
      if(rates[i]>0.005)
        rx.fillText(rates[i].toFixed(3),X0+i*(BAR_W+BAR_GAP)+BAR_W/2,RH-22-bh2-3);
    }
    rx.fillStyle='#777'; rx.textAlign='left'; rx.font='9px monospace';
    rx.fillText('h_n',2,RH/2);
    /* Stats */
    var logPW=P>0&&N>0?Math.log2(P*N):1;
    document.getElementById('blo-stats').innerHTML=
      'P='+P+
      '  H\u2081='+h1.toFixed(4)+
      '  E\u2248'+exc.toFixed(4)+
      '  h\u221e\u2248'+hInf.toFixed(4)+
      '  n*='+nStar+
      '  E/log\u2082(P\u00b7N)='+(logPW>0?(exc/logPW).toFixed(3):'—');
  };
  window.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('blo-word');
    if(sel&&window.LEXICON_ARR){
      window.LEXICON_ARR.forEach(function(w){
        var o=document.createElement('option');
        o.value=o.textContent=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('blo-btn');
    var wordEl=document.getElementById('blo-word');
    var ruleEl=document.getElementById('blo-rule');
    if(btn)    btn.addEventListener('click',bloRun);
    if(wordEl) wordEl.addEventListener('change',bloRun);
    if(ruleEl) ruleEl.addEventListener('change',bloRun);
    setTimeout(function(){if(window.encL) bloRun();},1800);
  });
})();
</script>
</div>
<div class="section">
<h2>Взвешенная энтропия перестановок Q6 — WPE vs PE (Fadlallah 2013)</h2>
<p class="meta">nWPE = WPE / log₂(m!) — взвешенная PE с весом = дисперсия окна · ΔWPE = nWPE − nPE &gt; 0 → амплитуда усиливает сложность; &lt; 0 → концентрирует · фиксированная точка → WPE=PE=0; период-2 → ΔWPE≈0; P=8 → ΔWPE≈−0.018</p>
<div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
  <select id="wpe-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
  </select>
  <select id="wpe-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
    <option value="xor3" selected>XOR3</option>
    <option value="xor">XOR</option>
    <option value="and">AND</option>
    <option value="or">OR</option>
  </select>
  <button id="wpe-btn"
    style="background:#1e3a4a;color:#4fc3f7;border:1px solid #2a5a7a;
           padding:4px 14px;cursor:pointer;font-size:13px">Запустить</button>
</div>
<canvas id="wpe-cell"  width="530" height="130"
  style="display:block;border:1px solid #1a1a1a;margin-bottom:6px"></canvas>
<canvas id="wpe-delta" width="530" height="90"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="wpe-stats"
  style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"> </div>
<script>
(function(){
  /* ── Q6 CA helpers ─────────────────────────────────────────────────── */
  function wpeStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }
  function wpeOrbit(ic,rule){
    var seen={},t=0,cur=ic.slice();
    while(t<2000){
      var key=cur.join(',');
      if(key in seen){
        var trans=seen[key],period=t-trans;
        cur=ic.slice();
        for(var i=0;i<trans;i++) cur=wpeStep(cur,rule);
        var grid=[];
        for(var i=0;i<period;i++){
          grid.push(cur.map(Number));
          cur=wpeStep(cur,rule);
        }
        return grid;
      }
      seen[key]=t++;
      cur=wpeStep(cur,rule);
    }
    return [ic.map(Number)];
  }
  /* ── WPE computation ────────────────────────────────────────────────── */
  function wpeOrdPat(win){
    var m=win.length,idx=[];
    for(var i=0;i<m;i++) idx.push(i);
    idx.sort(function(a,b){return win[a]!==win[b]?win[a]-win[b]:a-b;});
    var ranks=new Array(m);
    for(var r=0;r<m;r++) ranks[idx[r]]=r;
    return ranks.join(',');
  }
  function wpeWW(win){
    var m=win.length;
    if(m<=1) return 0;
    var mean=0;
    for(var i=0;i<m;i++) mean+=win[i];
    mean/=m;
    var s=0;
    for(var i=0;i<m;i++) s+=(win[i]-mean)*(win[i]-mean);
    return s/(m-1);
  }
  function wpeWPE(series,m){
    var n=series.length;
    if(n<m) return 0;
    var weighted={},totalW=0;
    for(var j=0;j<=n-m;j++){
      var win=series.slice(j,j+m);
      var w=wpeWW(win);
      var pat=wpeOrdPat(win);
      weighted[pat]=(weighted[pat]||0)+w;
      totalW+=w;
    }
    if(totalW===0) return 0;
    var h=0;
    for(var k in weighted){var p=weighted[k]/totalW; if(p>0) h-=p*Math.log2(p);}
    return Math.max(0,h);
  }
  function wpeNPE(series,m){
    var n=series.length;
    if(n<m) return 0;
    var counts={},total=0;
    for(var j=0;j<=n-m;j++){
      var pat=wpeOrdPat(series.slice(j,j+m));
      counts[pat]=(counts[pat]||0)+1;
      total++;
    }
    if(!total) return 0;
    var h=0;
    for(var k in counts){var p=counts[k]/total; if(p>0) h-=p*Math.log2(p);}
    return Math.max(0,h);
  }
  function wpeFactLog2(m){var f=1;for(var i=2;i<=m;i++)f*=i;return Math.log2(f);}
  function wpeNWPE(series,m){
    var fl=wpeFactLog2(m);
    return fl>0?Math.min(wpeWPE(series,m)/fl,1):0;
  }
  function wpeNPENorm(series,m){
    var fl=wpeFactLog2(m);
    return fl>0?Math.min(wpeNPE(series,m)/fl,1):0;
  }
  /* ── Main render ────────────────────────────────────────────────────── */
  function wpeRun(){
    var word=(document.getElementById('wpe-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('wpe-rule').value||'xor3';
    var M=3,MIN_REPS=8;
    if(!window.encL) return;
    var ic=window.encL(word);
    var grid=wpeOrbit(ic,rule);
    var P=grid.length,N=grid[0].length;
    var repeat=Math.max(MIN_REPS,Math.ceil(24/Math.max(P,1)));
    /* Build cell temporal series (repeated) */
    var nwpeArr=[],npeArr=[],deltaArr=[];
    for(var i=0;i<N;i++){
      var s=[];
      for(var t=0;t<P*repeat;t++) s.push(grid[t%P][i]);
      var nw=wpeNWPE(s,M),np=wpeNPENorm(s,M);
      nwpeArr.push(nw);
      npeArr.push(np);
      deltaArr.push(nw-np);
    }
    var meanNW=nwpeArr.reduce(function(a,b){return a+b;},0)/N;
    var meanNP=npeArr.reduce(function(a,b){return a+b;},0)/N;
    var meanD=meanNW-meanNP;
    var RCOL={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
    var col=RCOL[rule]||'#4fc3f7';
    /* ── Cell nWPE canvas ───────────────────────────────────────────── */
    var cc=document.getElementById('wpe-cell');
    var cx=cc.getContext('2d');
    var CW=cc.width,CH=cc.height;
    cx.fillStyle='#0d0d0d'; cx.fillRect(0,0,CW,CH);
    var barW=Math.floor((CW-30)/N)-2,maxH=CH-50;
    for(var i=0;i<N;i++){
      var bx=20+i*(barW+2);
      var bh=Math.round(nwpeArr[i]*maxH);
      cx.fillStyle=col; cx.globalAlpha=0.85;
      cx.fillRect(bx,CH-30-bh,barW,bh);
      cx.globalAlpha=1;
      /* nPE dot overlay */
      var doty=CH-30-Math.round(npeArr[i]*maxH);
      cx.fillStyle='#fff';
      cx.fillRect(bx,doty-1,barW,2);
    }
    /* Y-axis labels */
    cx.fillStyle='#666'; cx.font='9px monospace'; cx.textAlign='left';
    cx.fillText('nWPE',2,CH-30-maxH+8); cx.fillText('0',2,CH-27);
    cx.fillText('1.0',2,CH-30-maxH+8);
    /* Legend */
    cx.fillStyle=col; cx.fillRect(CW-110,8,14,10);
    cx.fillStyle='#ccc'; cx.font='10px monospace'; cx.textAlign='left';
    cx.fillText('nWPE',CW-93,18);
    cx.fillStyle='#fff'; cx.fillRect(CW-110,22,14,3);
    cx.fillText('nPE',CW-93,29);
    /* X axis labels */
    cx.fillStyle='#555'; cx.font='9px monospace'; cx.textAlign='center';
    for(var i=0;i<N;i+=4){
      var bx=20+i*(barW+2)+barW/2;
      cx.fillText(i,bx,CH-18);
    }
    cx.fillStyle='#777'; cx.textAlign='left'; cx.font='9px monospace';
    cx.fillText('ячейка',2,CH-18);
    /* ── Delta canvas ─────────────────────────────────────────────── */
    var dc=document.getElementById('wpe-delta');
    var dx=dc.getContext('2d');
    var DW=dc.width,DH=dc.height;
    dx.fillStyle='#0d0d0d'; dx.fillRect(0,0,DW,DH);
    var dbarW=Math.floor((DW-30)/N)-2;
    var maxD=0;
    for(var i=0;i<N;i++) maxD=Math.max(maxD,Math.abs(deltaArr[i]));
    maxD=Math.max(maxD,0.05);
    var dmidY=Math.floor(DH/2);
    /* Zero line */
    dx.strokeStyle='#333'; dx.beginPath(); dx.moveTo(20,dmidY); dx.lineTo(DW-10,dmidY); dx.stroke();
    for(var i=0;i<N;i++){
      var bx=20+i*(dbarW+2);
      var dv=deltaArr[i];
      var bh=Math.round(Math.abs(dv)/maxD*(dmidY-8));
      if(dv>=0){
        dx.fillStyle='#4fc3f7'; dx.globalAlpha=0.8;
        dx.fillRect(bx,dmidY-bh,dbarW,bh);
      } else {
        dx.fillStyle='#ef5350'; dx.globalAlpha=0.8;
        dx.fillRect(bx,dmidY,dbarW,bh);
      }
      dx.globalAlpha=1;
    }
    dx.fillStyle='#666'; dx.font='9px monospace'; dx.textAlign='left';
    dx.fillText('ΔWPE',2,12);
    dx.fillStyle='#4fc3f7'; dx.fillText('+',2,dmidY-4);
    dx.fillStyle='#ef5350'; dx.fillText('−',2,dmidY+12);
    /* Stats */
    document.getElementById('wpe-stats').innerHTML=
      'P='+P+
      '  mean_nWPE='+meanNW.toFixed(4)+
      '  mean_nPE='+meanNP.toFixed(4)+
      '  mean_\u0394WPE='+(meanD>=0?'+':'')+meanD.toFixed(4)+
      '  m='+M;
  }
  window.wpeRun=wpeRun;
  window.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('wpe-word');
    if(sel&&window.LEXICON_ARR){
      window.LEXICON_ARR.forEach(function(w){
        var o=document.createElement('option');
        o.value=o.textContent=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('wpe-btn');
    var wordEl=document.getElementById('wpe-word');
    var ruleEl=document.getElementById('wpe-rule');
    if(btn)    btn.addEventListener('click',wpeRun);
    if(wordEl) wordEl.addEventListener('change',wpeRun);
    if(ruleEl) ruleEl.addEventListener('change',wpeRun);
    setTimeout(function(){if(window.encL) wpeRun();},2100);
  });
})();
</script>
</div>
<div class="section">
<h2>Фурье / PSD Q6 — спектральная энтропия аттрактора</h2>
<p class="meta">S[k] = |X[k]|²/P — односторонний спектр мощности (ровно 1 период) · nH_sp = H_sp/log₂(K+1) ∈ [0,1] · SF = геом./арифм. среднее (Wiener) · фиксированная точка → nH_sp=0; ГОРА AND (P=2) → nH_sp≈0.999; ТУМАН XOR3 (P=8) → nH_sp≈0.297</p>
<div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
  <select id="fou-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
  </select>
  <select id="fou-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
    <option value="xor3" selected>XOR3</option>
    <option value="xor">XOR</option>
    <option value="and">AND</option>
    <option value="or">OR</option>
  </select>
  <button id="fou-btn"
    style="background:#1e3a4a;color:#4fc3f7;border:1px solid #2a5a7a;
           padding:4px 14px;cursor:pointer;font-size:13px">Запустить</button>
</div>
<canvas id="fou-spectrum" width="530" height="160"
  style="display:block;border:1px solid #1a1a1a;margin-bottom:6px"></canvas>
<canvas id="fou-cell"     width="530" height="90"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="fou-stats"
  style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"> </div>
<script>
(function(){
  /* ── Q6 CA helpers ─────────────────────────────────────────────────── */
  function fouStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }
  function fouOrbit(ic,rule){
    var seen={},t=0,cur=ic.slice();
    while(t<2000){
      var key=cur.join(',');
      if(key in seen){
        var trans=seen[key],period=t-trans;
        cur=ic.slice();
        for(var i=0;i<trans;i++) cur=fouStep(cur,rule);
        var grid=[];
        for(var i=0;i<period;i++){grid.push(cur.map(Number)); cur=fouStep(cur,rule);}
        return grid;
      }
      seen[key]=t++;
      cur=fouStep(cur,rule);
    }
    return [ic.map(Number)];
  }
  /* ── DFT & spectrum ─────────────────────────────────────────────────── */
  function fouDFT(s){
    var N=s.length,X=[];
    for(var k=0;k<N;k++){
      var re=0,im=0;
      for(var t=0;t<N;t++){
        var angle=-2*Math.PI*k*t/N;
        re+=s[t]*Math.cos(angle); im+=s[t]*Math.sin(angle);
      }
      X.push({re:re,im:im});
    }
    return X;
  }
  function fouPS(s){
    var N=s.length;
    if(!N) return [];
    var X=fouDFT(s),K=Math.floor(N/2),ps=[];
    for(var k=0;k<=K;k++) ps.push((X[k].re*X[k].re+X[k].im*X[k].im)/N);
    return ps;
  }
  function fouNHsp(ps){
    var total=ps.reduce(function(a,b){return a+b;},0);
    if(total<=0||ps.length<=1) return 0;
    var h=0;
    ps.forEach(function(v){if(v>0){var p=v/total; h-=p*Math.log2(p);}});
    return Math.max(0,Math.min(h/Math.log2(ps.length),1));
  }
  function fouSF(ps){
    var n=ps.length,total=ps.reduce(function(a,b){return a+b;},0);
    if(!n||total<=0||ps.some(function(v){return v<=0;})) return 0;
    var logMean=ps.reduce(function(a,v){return a+Math.log(v);},0)/n;
    return Math.min(Math.exp(logMean)/(total/n),1);
  }
  function fouDomK(ps){
    if(ps.length<=1) return 1;
    var best=1,bestV=ps.length>1?ps[1]:0;
    for(var k=2;k<ps.length;k++){if(ps[k]>bestV){bestV=ps[k];best=k;}}
    return best;
  }
  /* ── Main render ────────────────────────────────────────────────────── */
  function fouRun(){
    var word=(document.getElementById('fou-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('fou-rule').value||'xor3';
    if(!window.encL) return;
    var ic=window.encL(word);
    var grid=fouOrbit(ic,rule);
    var P=grid.length,N=grid[0].length;
    /* Per-cell power spectra */
    var allPS=[],nhArr=[];
    for(var i=0;i<N;i++){
      var s=[];
      for(var t=0;t<P;t++) s.push(grid[t][i]);
      var ps=fouPS(s);
      allPS.push(ps);
      nhArr.push(fouNHsp(ps));
    }
    /* Mean power spectrum */
    var maxBins=allPS.reduce(function(m,ps){return Math.max(m,ps.length);},0);
    var meanPS=[];
    for(var k=0;k<maxBins;k++){
      var vals=allPS.filter(function(ps){return k<ps.length;}).map(function(ps){return ps[k];});
      meanPS.push(vals.length?vals.reduce(function(a,b){return a+b;},0)/vals.length:0);
    }
    var domK=fouDomK(meanPS);
    var effP=domK>0?Math.floor(P/domK):P;
    var meanNH=nhArr.reduce(function(a,b){return a+b;},0)/N;
    var meanSFv=allPS.map(fouSF).reduce(function(a,b){return a+b;},0)/N;
    var RCOL={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
    var col=RCOL[rule]||'#4fc3f7';
    /* ── Spectrum canvas ─────────────────────────────────────────────── */
    var sc=document.getElementById('fou-spectrum');
    var sx=sc.getContext('2d');
    var SW=sc.width,SH=sc.height;
    sx.fillStyle='#0d0d0d'; sx.fillRect(0,0,SW,SH);
    var sMax=Math.max.apply(null,meanPS)||1;
    var K=meanPS.length;
    var barW=K>0?Math.floor((SW-40)/K)-2:20;
    barW=Math.max(barW,4);
    var maxH=SH-46;
    for(var k=0;k<K;k++){
      var bx=30+k*(barW+2);
      var bh=Math.round(meanPS[k]/sMax*maxH);
      sx.fillStyle=(k===0)?'#888':(k===domK)?'#ffd54f':col;
      sx.globalAlpha=0.85;
      sx.fillRect(bx,SH-36-bh,barW,bh);
      sx.globalAlpha=1;
      sx.fillStyle='#555'; sx.font='8px monospace'; sx.textAlign='center';
      if(K<=9||k%2===0) sx.fillText('k='+k,bx+barW/2,SH-22);
      if(bh>14){sx.fillStyle='#aaa'; sx.fillText(meanPS[k].toFixed(0),bx+barW/2,SH-37-bh);}
    }
    sx.fillStyle='#666'; sx.font='9px monospace'; sx.textAlign='left';
    sx.fillText('S\u0304[k]',2,12); sx.fillText('0',2,SH-33);
    sx.fillStyle='#888'; sx.fillRect(SW-112,8,12,10);
    sx.fillStyle='#ccc'; sx.font='10px monospace'; sx.textAlign='left';
    sx.fillText('DC k=0',SW-97,18);
    sx.fillStyle='#ffd54f'; sx.fillRect(SW-112,22,12,10);
    sx.fillText('k*='+domK,SW-97,32);
    /* ── Cell nH_sp canvas ───────────────────────────────────────────── */
    var cc=document.getElementById('fou-cell');
    var cx=cc.getContext('2d');
    var CW=cc.width,CH=cc.height;
    cx.fillStyle='#0d0d0d'; cx.fillRect(0,0,CW,CH);
    var cbarW=Math.floor((CW-30)/N)-2,cmaxH=CH-38;
    for(var i=0;i<N;i++){
      var bx=20+i*(cbarW+2);
      var bh=Math.round(nhArr[i]*cmaxH);
      cx.fillStyle=col; cx.globalAlpha=0.85;
      cx.fillRect(bx,CH-28-bh,cbarW,bh);
      cx.globalAlpha=1;
    }
    cx.fillStyle='#666'; cx.font='9px monospace'; cx.textAlign='left';
    cx.fillText('nH_sp',2,12); cx.fillText('0',2,CH-25);
    cx.fillStyle='#555'; cx.textAlign='center';
    for(var i=0;i<N;i+=4) cx.fillText(i,20+i*(cbarW+2)+cbarW/2,CH-14);
    cx.fillText('\u044f\u0447\u0435\u0439\u043a\u0430',CW/2,CH-5);
    /* Stats */
    document.getElementById('fou-stats').innerHTML=
      'P='+P+
      '  k*='+domK+
      '  T_eff='+effP+
      '  mean_nH_sp='+meanNH.toFixed(4)+
      '  mean_SF='+meanSFv.toFixed(4);
  }
  window.fouRun=fouRun;
  window.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('fou-word');
    if(sel&&window.LEXICON_ARR){
      window.LEXICON_ARR.forEach(function(w){
        var o=document.createElement('option');
        o.value=o.textContent=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('fou-btn');
    var wordEl=document.getElementById('fou-word');
    var ruleEl=document.getElementById('fou-rule');
    if(btn)    btn.addEventListener('click',fouRun);
    if(wordEl) wordEl.addEventListener('change',fouRun);
    if(ruleEl) ruleEl.addEventListener('change',fouRun);
    setTimeout(function(){if(window.encL) fouRun();},2200);
  });
})();
</script>
</div>
<div class="section">
<h2>Запрещённые паттерны Q6 — детерминизм в ординальном пространстве</h2>
<p class="meta">F = M − |{наблюдаемые}| — число запрещённых паттернов · f = F/M! ∈ [0,1] · фиксированная точка → f=0.833 (1/6); период-2 → f=0.667 (2/6); ТУМАН XOR3 → f=0 (все 6 паттернов); ячейки: 3–6 паттернов</p>
<div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
  <select id="for-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
  </select>
  <select id="for-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
    <option value="xor3" selected>XOR3</option>
    <option value="xor">XOR</option>
    <option value="and">AND</option>
    <option value="or">OR</option>
  </select>
  <button id="for-btn"
    style="background:#1e3a4a;color:#4fc3f7;border:1px solid #2a5a7a;
           padding:4px 14px;cursor:pointer;font-size:13px">Запустить</button>
</div>
<canvas id="for-cell"  width="530" height="120"
  style="display:block;border:1px solid #1a1a1a;margin-bottom:6px"></canvas>
<canvas id="for-pat"   width="530" height="70"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="for-stats"
  style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"> </div>
<script>
(function(){
  /* ── Q6 CA helpers ─────────────────────────────────────────────────── */
  function forStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }
  function forOrbit(ic,rule){
    var seen={},t=0,cur=ic.slice();
    while(t<2000){
      var key=cur.join(',');
      if(key in seen){
        var trans=seen[key],period=t-trans;
        cur=ic.slice();
        for(var i=0;i<trans;i++) cur=forStep(cur,rule);
        var grid=[];
        for(var i=0;i<period;i++){grid.push(cur.map(Number)); cur=forStep(cur,rule);}
        return grid;
      }
      seen[key]=t++;
      cur=forStep(cur,rule);
    }
    return [ic.map(Number)];
  }
  /* ── Ordinal pattern ─────────────────────────────────────────────────── */
  var M3=3;
  function forOrdPat(win){
    var m=win.length,idx=[];
    for(var i=0;i<m;i++) idx.push(i);
    idx.sort(function(a,b){return win[a]!==win[b]?win[a]-win[b]:a-b;});
    var r=new Array(m);
    for(var i=0;i<m;i++) r[idx[i]]=i;
    return r.join(',');
  }
  /* All m! patterns for m=3 */
  var ALL_PATS3=['0,1,2','0,2,1','1,0,2','1,2,0','2,0,1','2,1,0'];
  /* ── Main render ────────────────────────────────────────────────────── */
  function forRun(){
    var word=(document.getElementById('for-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('for-rule').value||'xor3';
    var M=M3,MIN_REPS=8;
    if(!window.encL) return;
    var ic=window.encL(word);
    var grid=forOrbit(ic,rule);
    var P=grid.length,N=grid[0].length;
    var repeat=Math.max(MIN_REPS,Math.ceil(24/Math.max(P,1)));
    var n=P*repeat;
    /* Per-cell observed sets */
    var cellObs=[],pooledObs={};
    for(var i=0;i<N;i++){
      var s=[];
      for(var t=0;t<P;t++) s.push(grid[t][i]);
      var obs={};
      for(var j=0;j<=n-M;j++){
        var win=[]; for(var k=0;k<M;k++) win.push(s[(j+k)%P]);
        var pat=forOrdPat(win);
        obs[pat]=true; pooledObs[pat]=true;
      }
      cellObs.push(obs);
    }
    var nPooled=Object.keys(pooledObs).length;
    var Fpooled=ALL_PATS3.length-nPooled;
    var fpooled=Fpooled/ALL_PATS3.length;
    var meanObs=cellObs.map(function(o){return Object.keys(o).length;})
                       .reduce(function(a,b){return a+b;},0)/N;
    var RCOL={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
    var col=RCOL[rule]||'#4fc3f7';
    /* ── Per-cell observed fraction bars ──────────────────────────────── */
    var cc=document.getElementById('for-cell');
    var cx=cc.getContext('2d');
    var CW=cc.width,CH=cc.height;
    cx.fillStyle='#0d0d0d'; cx.fillRect(0,0,CW,CH);
    var barW=Math.floor((CW-30)/N)-2,maxH=CH-40;
    for(var i=0;i<N;i++){
      var nObs=Object.keys(cellObs[i]).length;
      var bh=Math.round(nObs/ALL_PATS3.length*maxH);
      var bx=20+i*(barW+2);
      cx.fillStyle=col; cx.globalAlpha=0.85;
      cx.fillRect(bx,CH-28-bh,barW,bh);
      cx.globalAlpha=1;
      /* forbidden fill (grey overlay) */
      var fh=maxH-bh;
      cx.fillStyle='#333'; cx.globalAlpha=0.5;
      cx.fillRect(bx,CH-28-maxH,barW,fh);
      cx.globalAlpha=1;
    }
    /* Y labels */
    cx.fillStyle='#666'; cx.font='9px monospace'; cx.textAlign='left';
    cx.fillText('6',2,CH-28-maxH+8); cx.fillText('0',2,CH-24);
    cx.fillText('obs',2,CH-28-maxH/2);
    cx.fillStyle='#555'; cx.textAlign='center';
    for(var i=0;i<N;i+=4) cx.fillText(i,20+i*(barW+2)+barW/2,CH-14);
    cx.fillText('\u044f\u0447\u0435\u0439\u043a\u0430',CW/2,CH-4);
    /* ── Pattern display ─────────────────────────────────────────────── */
    var pc=document.getElementById('for-pat');
    var px=pc.getContext('2d');
    var PW=pc.width,PH=pc.height;
    px.fillStyle='#0d0d0d'; px.fillRect(0,0,PW,PH);
    var np=ALL_PATS3.length;
    var pw=Math.floor((PW-20)/np)-4,ph=PH-28;
    for(var ki=0;ki<np;ki++){
      var pat=ALL_PATS3[ki];
      var isObs=!!pooledObs[pat];
      var bx=10+ki*(pw+4);
      px.fillStyle=isObs?col:'#333'; px.globalAlpha=isObs?0.85:0.4;
      px.fillRect(bx,8,pw,ph);
      px.globalAlpha=1;
      px.fillStyle=isObs?'#fff':'#555';
      px.font='9px monospace'; px.textAlign='center';
      /* Draw mini diagram for the pattern */
      var ranks=pat.split(',').map(Number);
      var stepW=pw/(M+1);
      for(var ri=0;ri<M;ri++){
        var px0=bx+stepW*(ri+0.5),py0=8+ph-(ranks[ri]+0.5)*ph/(M);
        px.fillStyle=isObs?'#0d0d0d':'#555'; px.fillStyle=isObs?col:'#555';
        px.fillRect(px0-2,py0-2,4,4);
      }
      /* connect dots */
      px.strokeStyle=isObs?col:'#555'; px.lineWidth=1; px.globalAlpha=0.7;
      px.beginPath();
      for(var ri=0;ri<M;ri++){
        var px0=bx+stepW*(ri+0.5),py0=8+ph-(ranks[ri]+0.5)*ph/(M);
        if(ri===0) px.moveTo(px0,py0); else px.lineTo(px0,py0);
      }
      px.stroke(); px.globalAlpha=1;
      px.fillStyle=isObs?'#fff':'#555';
      px.font='8px monospace'; px.textAlign='center';
      px.fillText('('+pat+')',bx+pw/2,PH-6);
    }
    /* Labels */
    px.fillStyle='#666'; px.font='9px monospace'; px.textAlign='left';
    px.fillText('\u043d\u0430\u0431\u043b. ',2,PH/2);
    /* Stats */
    document.getElementById('for-stats').innerHTML=
      'P='+P+
      '  M='+ALL_PATS3.length+
      '  \u043f\u0443\u043b\u043b: obs='+nPooled+'/'+ALL_PATS3.length+
      '  F='+Fpooled+
      '  f='+fpooled.toFixed(4)+
      '  mean_cell_obs='+meanObs.toFixed(2);
  }
  window.forRun=forRun;
  window.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('for-word');
    if(sel&&window.LEXICON_ARR){
      window.LEXICON_ARR.forEach(function(w){
        var o=document.createElement('option');
        o.value=o.textContent=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('for-btn');
    var wordEl=document.getElementById('for-word');
    var ruleEl=document.getElementById('for-rule');
    if(btn)    btn.addEventListener('click',forRun);
    if(wordEl) wordEl.addEventListener('change',forRun);
    if(ruleEl) ruleEl.addEventListener('change',forRun);
    setTimeout(function(){if(window.encL) forRun();},2300);
  });
})();
</script>
</div>
<div class="section">
<h2>Автокорреляция Q6 — ACF ячеек аттрактора</h2>
<p class="meta">ACF(k) = Corr(x_t, x_{t+k}) по круговой границе (ровно 1 период) · τ₀ — первое нулевое пересечение · фиксированная точка → ACF=[1] (нет лагов); ГОРА AND (P=2) → ACF=[1,−1] (антиперсистентность); ТУМАН XOR3 (P=8) → τ₀≈1</p>
<div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
  <select id="acf-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
  </select>
  <select id="acf-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
    <option value="xor3" selected>XOR3</option>
    <option value="xor">XOR</option>
    <option value="and">AND</option>
    <option value="or">OR</option>
  </select>
  <button id="acf-btn"
    style="background:#1e3a4a;color:#4fc3f7;border:1px solid #2a5a7a;
           padding:4px 14px;cursor:pointer;font-size:13px">Запустить</button>
</div>
<canvas id="acf-heat" width="530" height="140"
  style="display:block;border:1px solid #1a1a1a;margin-bottom:6px"></canvas>
<canvas id="acf-mean" width="530" height="80"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="acf-stats"
  style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"> </div>
<script>
(function(){
  /* ── Q6 CA helpers ─────────────────────────────────────────────────── */
  function acfStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }
  function acfOrbit(ic,rule){
    var seen={},t=0,cur=ic.slice();
    while(t<2000){
      var key=cur.join(',');
      if(key in seen){
        var trans=seen[key],period=t-trans;
        cur=ic.slice();
        for(var i=0;i<trans;i++) cur=acfStep(cur,rule);
        var grid=[];
        for(var i=0;i<period;i++){grid.push(cur.map(Number)); cur=acfStep(cur,rule);}
        return grid;
      }
      seen[key]=t++;
      cur=acfStep(cur,rule);
    }
    return [ic.map(Number)];
  }
  /* ── Circular ACF ───────────────────────────────────────────────────── */
  function circACF(s,maxLag){
    var n=s.length;
    if(!n) return [1];
    maxLag=Math.min(maxLag,n-1);
    var mu=0;
    for(var i=0;i<n;i++) mu+=s[i];
    mu/=n;
    var vr=0;
    for(var i=0;i<n;i++) vr+=(s[i]-mu)*(s[i]-mu);
    vr/=n;
    if(vr<1e-12){
      var r=[1];
      for(var k=0;k<maxLag;k++) r.push(NaN);
      return r;
    }
    var res=[];
    for(var k=0;k<=maxLag;k++){
      var s2=0;
      for(var t=0;t<n;t++) s2+=(s[t]-mu)*(s[(t+k)%n]-mu);
      res.push(s2/(n*vr));
    }
    return res;
  }
  /* ── ACF colour: blue(-1) → dark(0) → rule(+1) ─────────────────────── */
  function acfColor(v,col){
    if(isNaN(v)) return '#333';
    if(v>=0){
      /* interpolate #1a1a1a → col */
      var t=Math.min(v,1);
      var r0=0x1a,g0=0x1a,b0=0x1a;
      var r1=parseInt(col.slice(1,3),16)||0x4f;
      var g1=parseInt(col.slice(3,5),16)||0xc3;
      var b1=parseInt(col.slice(5,7),16)||0xf7;
      var r=Math.round(r0+t*(r1-r0));
      var g=Math.round(g0+t*(g1-g0));
      var b=Math.round(b0+t*(b1-b0));
      return 'rgb('+r+','+g+','+b+')';
    } else {
      var t=Math.min(-v,1);
      var r0=0x1a,g0=0x1a,b0=0x1a;
      var r=Math.round(r0+t*(0xef-r0));
      var g=Math.round(g0+t*(0x53-g0));
      var b=Math.round(b0+t*(0x50-b0));
      return 'rgb('+r+','+g+','+b+')';
    }
  }
  /* ── Main render ────────────────────────────────────────────────────── */
  function acfRun(){
    var word=(document.getElementById('acf-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('acf-rule').value||'xor3';
    var MAX_LAG=8;
    if(!window.encL) return;
    var ic=window.encL(word);
    var grid=acfOrbit(ic,rule);
    var P=grid.length,N=grid[0].length;
    var lag=Math.min(MAX_LAG,P-1);
    var RCOL={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
    var col=RCOL[rule]||'#4fc3f7';
    /* Per-cell ACFs */
    var cellACFs=[];
    for(var i=0;i<N;i++){
      var s=[];
      for(var t=0;t<P;t++) s.push(grid[t][i]);
      cellACFs.push(circACF(s,lag));
    }
    /* Mean ACF */
    var meanACF=[];
    for(var k=0;k<=lag;k++){
      var vals=cellACFs.map(function(a){return a[k];}).filter(function(v){return !isNaN(v);});
      meanACF.push(vals.length?vals.reduce(function(a,b){return a+b;},0)/vals.length:NaN);
    }
    /* Decorrelation */
    var tau0s=[];
    cellACFs.forEach(function(a){
      for(var k=1;k<a.length;k++){if(!isNaN(a[k])&&a[k]<=0){tau0s.push(k);return;}}
    });
    var meanTau0=tau0s.length?tau0s.reduce(function(a,b){return a+b;},0)/tau0s.length:null;
    var mpower=meanACF.slice(1).filter(function(v){return !isNaN(v);})
                .reduce(function(a,v){return a+v*v;},0)/Math.max(lag,1);
    /* ── Heatmap canvas ──────────────────────────────────────────────── */
    var hc=document.getElementById('acf-heat');
    var hx=hc.getContext('2d');
    var HW=hc.width,HH=hc.height;
    hx.fillStyle='#0d0d0d'; hx.fillRect(0,0,HW,HH);
    var nLags=lag+1;
    var cellH=Math.floor((HH-30)/N),lagW=Math.floor((HW-50)/nLags);
    lagW=Math.max(lagW,6);
    for(var i=0;i<N;i++){
      for(var k=0;k<nLags&&k<cellACFs[i].length;k++){
        var v=cellACFs[i][k];
        hx.fillStyle=acfColor(v,col);
        hx.fillRect(40+k*lagW,10+i*cellH,lagW-1,cellH-1);
      }
    }
    /* Lag labels */
    hx.fillStyle='#555'; hx.font='8px monospace'; hx.textAlign='center';
    for(var k=0;k<nLags;k++) hx.fillText(k,40+k*lagW+lagW/2,HH-16);
    hx.fillText('lag',40+nLags*lagW/2,HH-4);
    /* Cell labels */
    hx.fillStyle='#555'; hx.font='8px monospace'; hx.textAlign='right';
    for(var i=0;i<N;i+=4) hx.fillText(i,36,10+i*cellH+cellH/2+3);
    /* Color scale legend */
    var lx=HW-8,ly=10,lh=HH-40,lw=6;
    for(var j=0;j<lh;j++){
      var v2=1-2*j/lh;
      hx.fillStyle=acfColor(v2,col);
      hx.fillRect(lx,ly+j,lw,1);
    }
    hx.fillStyle='#666'; hx.font='8px monospace'; hx.textAlign='left';
    hx.fillText('+1',lx-14,ly+5); hx.fillText('0',lx-8,ly+lh/2+3); hx.fillText('\u22121',lx-14,ly+lh+3);
    /* ── Mean ACF bars ────────────────────────────────────────────────── */
    var mc=document.getElementById('acf-mean');
    var mx=mc.getContext('2d');
    var MW=mc.width,MH=mc.height;
    mx.fillStyle='#0d0d0d'; mx.fillRect(0,0,MW,MH);
    var midY=Math.floor(MH/2);
    mx.strokeStyle='#333'; mx.beginPath(); mx.moveTo(40,midY); mx.lineTo(MW-20,midY); mx.stroke();
    var barW2=Math.max(Math.floor((MW-60)/nLags)-2,4);
    for(var k=0;k<nLags;k++){
      var v=meanACF[k];
      if(isNaN(v)) continue;
      var bh=Math.round(Math.min(Math.abs(v),1)*(midY-8));
      var bx=40+k*(barW2+2);
      if(v>=0){
        mx.fillStyle=col; mx.globalAlpha=0.85;
        mx.fillRect(bx,midY-bh,barW2,bh);
      } else {
        mx.fillStyle='#ef5350'; mx.globalAlpha=0.85;
        mx.fillRect(bx,midY,barW2,bh);
      }
      mx.globalAlpha=1;
      mx.fillStyle='#555'; mx.font='8px monospace'; mx.textAlign='center';
      mx.fillText(k,bx+barW2/2,MH-6);
    }
    mx.fillStyle='#666'; mx.font='9px monospace'; mx.textAlign='left';
    mx.fillText('\u0441\u0440.ACF',2,midY+3); mx.fillText('+1',2,12); mx.fillText('\u22121',2,MH-16);
    /* Stats */
    document.getElementById('acf-stats').innerHTML=
      'P='+P+
      '  lag='+lag+
      (meanTau0!==null?'  \u03c4\u2080\u2248'+meanTau0.toFixed(2):'  \u03c4\u2080=\u221e')+
      '  mean_ACF\u00b2='+mpower.toFixed(4);
  }
  window.acfRun=acfRun;
  window.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('acf-word');
    if(sel&&window.LEXICON_ARR){
      window.LEXICON_ARR.forEach(function(w){
        var o=document.createElement('option');
        o.value=o.textContent=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('acf-btn');
    var wordEl=document.getElementById('acf-word');
    var ruleEl=document.getElementById('acf-rule');
    if(btn)    btn.addEventListener('click',acfRun);
    if(wordEl) wordEl.addEventListener('change',acfRun);
    if(ruleEl) ruleEl.addEventListener('change',acfRun);
    setTimeout(function(){if(window.encL) acfRun();},2400);
  });
})();
</script>
</div>
<div class="section">
<h2>Moran's I Q6 — пространственная автокорреляция</h2>
<p class="meta">I(t) = Σ_i(x_i−μ)(x_{i+1}−μ) / Σ_i(x_i−μ)² на круговой решётке · I=−1 шахматный паттерн · I=+1 кластеры · NaN — константное поле · ГОРА AND: I=−1 все шаги; ТУМАН XOR3: −0.68 … +0.49</p>
<div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
  <select id="moran-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
  </select>
  <select id="moran-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
    <option value="xor3" selected>XOR3</option>
    <option value="xor">XOR</option>
    <option value="and">AND</option>
    <option value="or">OR</option>
  </select>
  <button id="moran-btn"
    style="background:#1e3a4a;color:#4fc3f7;border:1px solid #2a5a7a;
           padding:4px 14px;cursor:pointer;font-size:13px">Запустить</button>
</div>
<canvas id="moran-time" width="530" height="90"
  style="display:block;border:1px solid #1a1a1a;margin-bottom:6px"></canvas>
<canvas id="moran-all" width="530" height="72"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="moran-stats"
  style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"> </div>
<script>
(function(){
  function moranStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }
  function moranOrbit(ic,rule){
    var seen={},t=0,cur=ic.slice();
    while(t<2000){
      var key=cur.join(',');
      if(key in seen){
        var trans=seen[key],period=t-trans;
        cur=ic.slice(); for(var i=0;i<trans;i++) cur=moranStep(cur,rule);
        var grid=[];
        for(var i=0;i<period;i++){grid.push(cur.map(Number)); cur=moranStep(cur,rule);}
        return grid;
      }
      seen[key]=t++; cur=moranStep(cur,rule);
    }
    return [ic.map(Number)];
  }
  function moransI(vals){
    var n=vals.length; if(n<2) return NaN;
    var mu=vals.reduce(function(a,b){return a+b;},0)/n;
    var denom=vals.reduce(function(a,x){return a+(x-mu)*(x-mu);},0);
    if(denom<1e-12) return NaN;
    var numer=0;
    for(var i=0;i<n;i++) numer+=(vals[i]-mu)*(vals[(i+1)%n]-mu);
    return numer/denom;
  }
  function classify(v){
    if(isNaN(v)) return 'constant';
    if(v>0.5)   return 'strongly clustered';
    if(v>0.1)   return 'clustered';
    if(v>=-0.1) return 'random';
    if(v>=-0.5) return 'dispersed';
    return 'strongly dispersed';
  }
  /* colour −1→blue, 0→dark, +1→rule colour */
  function moranColor(v,col){
    if(isNaN(v)) return '#2a2a2a';
    var t=Math.max(-1,Math.min(1,v));
    if(t>=0){
      var f=t;
      var r1=parseInt(col.slice(1,3),16)||0x4f;
      var g1=parseInt(col.slice(3,5),16)||0xc3;
      var b1=parseInt(col.slice(5,7),16)||0xf7;
      return 'rgb('+Math.round(0x1a+f*(r1-0x1a))+','+
                    Math.round(0x1a+f*(g1-0x1a))+','+
                    Math.round(0x1a+f*(b1-0x1a))+')';
    } else {
      var f=-t;
      return 'rgb('+Math.round(0x1a+f*(0xef-0x1a))+','+
                    Math.round(0x1a+f*(0x53-0x1a))+','+
                    Math.round(0x1a+f*(0x50-0x1a))+')';
    }
  }
  var RCOL={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
  var RLBL={xor:'XOR',xor3:'XOR3',and:'AND',or:'OR'};
  function moranRun(){
    var word=(document.getElementById('moran-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('moran-rule').value||'xor3';
    if(!window.encL) return;
    var ic=window.encL(word);
    var grid=moranOrbit(ic,rule);
    var P=grid.length,N=ic.length;
    var col=RCOL[rule]||'#4fc3f7';
    /* Per-step I */
    var series=grid.map(function(step){return moransI(step);});
    var valid=series.filter(function(v){return !isNaN(v);});
    var meanI=valid.length?valid.reduce(function(a,b){return a+b;},0)/valid.length:NaN;
    var minI=valid.length?Math.min.apply(null,valid):NaN;
    var maxI=valid.length?Math.max.apply(null,valid):NaN;
    /* ── Time-series canvas ─────────────────────────────────────────── */
    var tc=document.getElementById('moran-time');
    var tx=tc.getContext('2d');
    var TW=tc.width,TH=tc.height;
    tx.fillStyle='#0d0d0d'; tx.fillRect(0,0,TW,TH);
    var midY=Math.floor(TH/2);
    tx.strokeStyle='#333'; tx.beginPath(); tx.moveTo(40,midY); tx.lineTo(TW-10,midY); tx.stroke();
    tx.strokeStyle='#222'; tx.setLineDash([2,4]);
    [-0.5,0.5].forEach(function(ref){
      var y=midY-Math.round(ref*(midY-12));
      tx.beginPath(); tx.moveTo(40,y); tx.lineTo(TW-10,y); tx.stroke();
    });
    tx.setLineDash([]);
    var nBars=Math.max(P,1),barW=Math.max(Math.floor((TW-50)/nBars)-2,4);
    for(var t=0;t<nBars;t++){
      var v=series[t];
      if(isNaN(v)) continue;
      var bh=Math.round(Math.min(Math.abs(v),1)*(midY-12));
      var bx=40+t*(barW+2);
      tx.fillStyle=moranColor(v,col); tx.globalAlpha=0.9;
      if(v>=0){ tx.fillRect(bx,midY-bh,barW,bh); }
      else     { tx.fillRect(bx,midY,barW,bh); }
      tx.globalAlpha=1;
      tx.fillStyle='#555'; tx.font='8px monospace'; tx.textAlign='center';
      tx.fillText(t,bx+barW/2,TH-4);
    }
    tx.fillStyle='#666'; tx.font='9px monospace'; tx.textAlign='left';
    tx.fillText('I(t)',2,midY+3); tx.fillText('+1',2,14); tx.fillText('\u22121',2,TH-18);
    /* ── All-rules canvas ───────────────────────────────────────────── */
    var ac=document.getElementById('moran-all');
    var ax=ac.getContext('2d');
    var AW=ac.width,AH=ac.height;
    ax.fillStyle='#0d0d0d'; ax.fillRect(0,0,AW,AH);
    var rules=['xor','xor3','and','or'];
    var rowH=Math.floor(AH/rules.length);
    var midX=Math.floor(AW/2);
    ax.strokeStyle='#333'; ax.beginPath(); ax.moveTo(midX,0); ax.lineTo(midX,AH); ax.stroke();
    rules.forEach(function(r,ri){
      var rcol=RCOL[r]||'#4fc3f7';
      var rGrid=moranOrbit(ic,r);
      var rSeries=rGrid.map(function(s){return moransI(s);});
      var rValid=rSeries.filter(function(v){return !isNaN(v);});
      var rMean=rValid.length?rValid.reduce(function(a,b){return a+b;},0)/rValid.length:NaN;
      var y0=ri*rowH+4, barH=rowH-8;
      if(!isNaN(rMean)){
        var bw=Math.round(Math.abs(rMean)*(midX-60));
        ax.fillStyle=moranColor(rMean,rcol); ax.globalAlpha=0.85;
        if(rMean>=0) ax.fillRect(midX,y0,bw,barH);
        else         ax.fillRect(midX-bw,y0,bw,barH);
        ax.globalAlpha=1;
      }
      ax.fillStyle='#777'; ax.font='9px monospace'; ax.textAlign='right';
      ax.fillText(RLBL[r],midX-62,y0+barH/2+3);
      ax.fillStyle=rcol; ax.textAlign='left';
      var lbl=isNaN(rMean)?'NaN':rMean.toFixed(3);
      ax.fillText(lbl,midX+Math.round(Math.abs(rMean)*(midX-60))+4,y0+barH/2+3);
    });
    ax.fillStyle='#555'; ax.font='8px monospace'; ax.textAlign='center';
    ax.fillText('\u22121',4,AH/2+3); ax.fillText('+1',AW-8,AH/2+3);
    /* Stats */
    document.getElementById('moran-stats').innerHTML=
      'P='+P+
      '  \u012a='+(isNaN(meanI)?'NaN':meanI.toFixed(4))+
      '  min='+(isNaN(minI)?'NaN':minI.toFixed(4))+
      '  max='+(isNaN(maxI)?'NaN':maxI.toFixed(4))+
      '  '+classify(meanI);
  }
  window.moranRun=moranRun;
  window.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('moran-word');
    if(sel&&window.LEXICON_ARR){
      window.LEXICON_ARR.forEach(function(w){
        var o=document.createElement('option');
        o.value=o.textContent=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('moran-btn');
    var wordEl=document.getElementById('moran-word');
    var ruleEl=document.getElementById('moran-rule');
    if(btn)    btn.addEventListener('click',moranRun);
    if(wordEl) wordEl.addEventListener('change',moranRun);
    if(ruleEl) ruleEl.addEventListener('change',moranRun);
    setTimeout(function(){if(window.encL) moranRun();},2550);
  });
})();
</script>
</div>
<div class="section">
<h2>LZ76 Q6 — алгоритмическая сложность аттрактора</h2>
<p class="meta">LZ76 (copy-parsing): число уникальных фраз при разборе бинарной строки · C_norm = C / (n/log₂n) · C_norm→1 случайная строка · C_norm≪1 периодическая · ГОРА AND: min (структурированный) · ТУМАН XOR3: max</p>
<div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
  <select id="lz-word"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
  </select>
  <select id="lz-rule"
    style="background:#111;color:#ccc;border:1px solid #333;padding:4px 8px;font-size:13px">
    <option value="xor3" selected>XOR3</option>
    <option value="xor">XOR</option>
    <option value="and">AND</option>
    <option value="or">OR</option>
  </select>
  <button id="lz-btn"
    style="background:#1e3a4a;color:#4fc3f7;border:1px solid #2a5a7a;
           padding:4px 14px;cursor:pointer;font-size:13px">Запустить</button>
</div>
<canvas id="lz-cells" width="530" height="90"
  style="display:block;border:1px solid #1a1a1a;margin-bottom:6px"></canvas>
<canvas id="lz-rules" width="530" height="72"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="lz-stats"
  style="color:#ccc;font-family:monospace;font-size:12px;margin-top:6px"> </div>
<script>
(function(){
  function lzStep(cells,rule){
    var N=cells.length,out=new Array(N);
    for(var i=0;i<N;i++){
      var l=cells[(i-1+N)%N],c=cells[i],r=cells[(i+1)%N];
      if(rule==='xor')       out[i]=(l^r)&63;
      else if(rule==='xor3') out[i]=(l^c^r)&63;
      else if(rule==='and')  out[i]=(l&r)&63;
      else                   out[i]=(l|r)&63;
    }
    return out;
  }
  function lzOrbit(ic,rule){
    var seen={},t=0,cur=ic.slice();
    while(t<2000){
      var key=cur.join(',');
      if(key in seen){
        var trans=seen[key],period=t-trans;
        cur=ic.slice(); for(var i=0;i<trans;i++) cur=lzStep(cur,rule);
        var grid=[];
        for(var i=0;i<period;i++){grid.push(cur.map(Number)); cur=lzStep(cur,rule);}
        return grid;
      }
      seen[key]=t++; cur=lzStep(cur,rule);
    }
    return [ic.map(Number)];
  }
  function toBin(v){
    var s=((v&63)|64).toString(2); return s.slice(1);  /* 6 bits */
  }
  /* LZ76 copy-parsing on binary string */
  function lz76(s){
    var n=s.length; if(!n) return 0;
    var i=0,c=0;
    while(i<n){
      var j=i+1;
      while(j<=n && s.slice(0,i).indexOf(s.slice(i,j))>=0) j++;
      c++; i=j;
    }
    return c;
  }
  function normLZ(c,n){
    if(n<=1) return 1;
    return c/(n/Math.log2(n));
  }
  function seriesBin(grid,cell){
    return grid.map(function(row){return toBin(row[cell]);}).join('');
  }
  function fullBin(grid){
    var s='';
    grid.forEach(function(row){row.forEach(function(v){s+=toBin(v);});});
    return s;
  }
  var RCOL={xor:'#4fc3f7',xor3:'#80deea',and:'#ef5350',or:'#ffd54f'};
  var RLBL={xor:'XOR',xor3:'XOR3',and:'AND',or:'OR'};
  function lzRun(){
    var word=(document.getElementById('lz-word').value||'ТУМАН').toUpperCase();
    var rule=document.getElementById('lz-rule').value||'xor3';
    if(!window.encL) return;
    var ic=window.encL(word);
    var N=ic.length;
    var grid=lzOrbit(ic,rule);
    var P=grid.length;
    var col=RCOL[rule]||'#4fc3f7';
    /* Per-cell normalized LZ */
    var cellNorm=[];
    for(var i=0;i<N;i++){
      var s=seriesBin(grid,i);
      var c=lz76(s);
      cellNorm.push(normLZ(c,s.length));
    }
    var meanCN=cellNorm.reduce(function(a,b){return a+b;},0)/N;
    /* Full attractor LZ */
    var fs=fullBin(grid);
    var fc=lz76(fs);
    var fn=normLZ(fc,fs.length);
    /* ── Cell bars canvas ───────────────────────────────────────────── */
    var cc=document.getElementById('lz-cells');
    var cx=cc.getContext('2d');
    var CW=cc.width,CH=cc.height;
    cx.fillStyle='#0d0d0d'; cx.fillRect(0,0,CW,CH);
    var barW=Math.max(Math.floor((CW-60)/N)-2,4);
    var maxBar=CH-24;
    /* reference line at norm=1 */
    var ref1Y=Math.round(CH-16-maxBar*0.5);
    cx.strokeStyle='#333'; cx.beginPath(); cx.moveTo(40,ref1Y); cx.lineTo(CW-10,ref1Y); cx.stroke();
    cx.fillStyle='#444'; cx.font='8px monospace'; cx.textAlign='left';
    cx.fillText('1.0',2,ref1Y+3);
    for(var i=0;i<N;i++){
      var v=cellNorm[i];
      var bh=Math.round(Math.min(v,2.0)*maxBar/2);
      var bx=40+i*(barW+2);
      cx.fillStyle=col; cx.globalAlpha=0.82;
      cx.fillRect(bx,CH-16-bh,barW,bh);
      cx.globalAlpha=1;
      cx.fillStyle='#555'; cx.font='8px monospace'; cx.textAlign='center';
      cx.fillText(i,bx+barW/2,CH-4);
    }
    cx.fillStyle='#666'; cx.font='9px monospace'; cx.textAlign='left';
    cx.fillText('C_norm',2,CH-16);
    /* ── Rules comparison canvas ────────────────────────────────────── */
    var rc=document.getElementById('lz-rules');
    var rx=rc.getContext('2d');
    var RW=rc.width,RH=rc.height;
    rx.fillStyle='#0d0d0d'; rx.fillRect(0,0,RW,RH);
    var rules=['xor','xor3','and','or'];
    var rowH=Math.floor(RH/rules.length);
    rules.forEach(function(r,ri){
      var rcol=RCOL[r]||'#4fc3f7';
      var rGrid=lzOrbit(ic,r);
      var rFull=fullBin(rGrid);
      var rC=lz76(rFull);
      var rN=normLZ(rC,rFull.length);
      var bw=Math.round(rN*(RW-120)/2);  /* scale: 0..2 → 0..(RW-120) */
      var y0=ri*rowH+4, bh=rowH-8;
      rx.fillStyle=rcol; rx.globalAlpha=0.8;
      rx.fillRect(70,y0,bw,bh);
      rx.globalAlpha=1;
      rx.fillStyle='#777'; rx.font='9px monospace'; rx.textAlign='right';
      rx.fillText(RLBL[r],66,y0+bh/2+3);
      rx.fillStyle=rcol; rx.textAlign='left';
      rx.fillText('C='+rFull.length+'b lz='+rC+' norm='+rN.toFixed(3),72+bw+4,y0+bh/2+3);
    });
    /* Stats */
    document.getElementById('lz-stats').innerHTML=
      'P='+P+
      '  full: '+fs.length+'b lz='+fc+' norm='+fn.toFixed(4)+
      '  mean_cell_norm='+meanCN.toFixed(4);
  }
  window.lzRun=lzRun;
  window.addEventListener('DOMContentLoaded',function(){
    var sel=document.getElementById('lz-word');
    if(sel&&window.LEXICON_ARR){
      window.LEXICON_ARR.forEach(function(w){
        var o=document.createElement('option');
        o.value=o.textContent=w;
        if(w==='\u0422\u0423\u041c\u0410\u041d') o.selected=true;
        sel.appendChild(o);
      });
    }
    var btn=document.getElementById('lz-btn');
    var wordEl=document.getElementById('lz-word');
    var ruleEl=document.getElementById('lz-rule');
    if(btn)    btn.addEventListener('click',lzRun);
    if(wordEl) wordEl.addEventListener('change',lzRun);
    if(ruleEl) ruleEl.addEventListener('change',lzRun);
    setTimeout(function(){if(window.encL) lzRun();},2700);
  });
})();
</script>
</div>
<div class="section">
<h2>Предсказание Q6 — любое слово</h2>
<p class="meta">Введите произвольное русское слово · сигнатура + класс (из 13) + ближайшие соседи в лексиконе</p>
<div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
  <input id="pred-inp" type="text" value="КОМПЬЮТЕР"
    style="background:#111;color:#ccc;border:1px solid #333;padding:6px 10px;
           font-size:14px;width:160px;text-transform:uppercase"/>
  <button onclick="predRun()"
    style="background:#1e3a4a;color:#4fc3f7;border:1px solid #2a5a7a;
           padding:6px 16px;cursor:pointer;font-size:13px">Предсказать</button>
</div>
<canvas id="pred-canvas" width="700" height="300"
  style="display:block;border:1px solid #1a1a1a"></canvas>
<div id="pred-result"
  style="font-family:monospace;font-size:12px;color:#888;min-height:20px;margin-top:6px"> </div>
<script>
(function(){
var PRED_CLASSES = [
  {key:[2, 1, 2, 1, 2], count:20, words:["ВОДА", "НОРА", "ЛУНА", "ДУГА", "ЗИМА", "ЛУГА", "НАДО", "ТРОН", "ГОРН", "БОЛТ", "ЛИТР", "НОТА", "ЗОНТ", "ЗУБР", "ДРОН", "МАРТ", "РИТМ", "ДУМА", "МОДА", "ЖИТО"]},
  {key:[8, 7, 1, 3, 1], count:5,  words:["ГРУДА", "ОБРАЗ", "НАРОД", "НОРМА", "ЖАТВА"]},
  {key:[2, 1, 2, 1, 1], count:4,  words:["ГОРА", "УДАР", "РОТА", "УТРО"]},
  {key:[8, 7, 1, 7, 1], count:4,  words:["ТУМАН", "РУЛОН", "НАБОР", "БИТВА"]},
  {key:[8, 7, 1, 2, 1], count:4,  words:["ДОМРА", "ГОРОД", "ДРОВА", "РАТОН"]},
  {key:[8, 4, 1, 4, 1], count:3,  words:["ДОБРО", "МОНТАЖ", "МАТ"]},
  {key:[8, 4, 1, 3, 1], count:2,  words:["ВОЛНА", "ТОННА"]},
  {key:[8, 2, 2, 4, 1], count:2,  words:["ТУНДРА", "ВИТРАЖ"]},
  {key:[8, 2, 1, 7, 1], count:1,  words:["ВЗЛОМ"]},
  {key:[8, 4, 2, 4, 1], count:1,  words:["РАБОТА"]},
  {key:[8, 4, 2, 4, 2], count:1,  words:["ЖУРНАЛ"]},
  {key:[8, 3, 1, 7, 1], count:1,  words:["НИТРО"]},
  {key:[8, 7, 1, 6, 1], count:1,  words:["ЗАВОД"]},
];
var CLASS_PALETTE = [
  '#4fc3f7','#80deea','#ffd54f','#ce93d8','#ff9800',
  '#a5d6a7','#ef5350','#90caf9','#ffe082','#b39ddb',
  '#80cbc4','#f48fb1','#bcaaa4'
];

function keysEq(a,b){return a.length===b.length&&a.every(function(v,i){return v===b[i];});}

function predFullKey(sig){
  return [
    sig.xor  ? sig.xor.transient  : null,
    sig.and  ? sig.and.transient  : null,
    sig.and  ? sig.and.period     : null,
    sig.or   ? sig.or.transient   : null,
    sig.or   ? sig.or.period      : null,
  ];
}

window.predRun = function(){
  var word = (document.getElementById('pred-inp').value||'ГОРА').toUpperCase()
               .replace(/[^А-ЯЁ]/g,'');
  if(!word) return;
  document.getElementById('pred-inp').value = word;

  var sig = window.sigL ? window.sigL(word) : null;
  if(!sig){document.getElementById('pred-result').textContent='(сигнатура недоступна)';return;}

  var fk = predFullKey(sig);

  // Match class
  var classId = -1;
  for(var ci=0;ci<PRED_CLASSES.length;ci++){
    if(fk.every(function(v,i){return v===PRED_CLASSES[ci].key[i];})){classId=ci;break;}
  }
  var isNew = classId < 0;

  // Neighbors
  var lsigs = window.lexAllSigs ? window.lexAllSigs() : {};
  var lexWords = Object.keys(lsigs);
  var dists = lexWords.map(function(w){
    var d = window.lexDistL ? window.lexDistL(sig, lsigs[w]) : NaN;
    return {word:w, dist:d};
  });
  dists.sort(function(a,b){return isNaN(a.dist)?1:isNaN(b.dist)?-1:a.dist-b.dist;});
  var top10 = dists.slice(0,10);

  // Draw canvas
  var canvas = document.getElementById('pred-canvas');
  var ctx = canvas.getContext('2d');
  var W = canvas.width, H = canvas.height;
  ctx.fillStyle = '#0d0d0d';
  ctx.fillRect(0,0,W,H);

  // ── Left: signature table ─────────────────────────────
  var RULES = ['xor','xor3','and','or'];
  var RNAMES = {xor:'XOR ⊕', xor3:'XOR3', and:'AND &', or:'OR |'};
  var RCOL   = {xor:'#4fc3f7', xor3:'#80deea', and:'#ef5350', or:'#ffd54f'};

  var LX=20, TY=32, rowH=38, colW=80;
  ctx.font='bold 12px monospace';
  ctx.fillStyle='#555'; ctx.fillText('Правило',LX,TY);
  ctx.fillStyle='#4fc3f7'; ctx.fillText('Транзиент',LX+colW,TY);
  ctx.fillStyle='#4fc3f7'; ctx.fillText('Период',LX+colW*2,TY);
  ctx.strokeStyle='#222'; ctx.beginPath();
  ctx.moveTo(LX,TY+6); ctx.lineTo(LX+colW*3+10,TY+6); ctx.stroke();

  RULES.forEach(function(r,ri){
    var y = TY + rowH*(ri+1);
    var o = sig[r] || {};
    ctx.font='bold 11px monospace';
    ctx.fillStyle=RCOL[r]||'#aaa';
    ctx.fillText(RNAMES[r],LX,y);
    ctx.font='12px monospace';
    ctx.fillStyle='#ccc';
    ctx.fillText(o.transient!==null&&o.transient!==undefined?o.transient:'?', LX+colW+20, y);
    ctx.fillText(o.period!==null&&o.period!==undefined?o.period:'?',        LX+colW*2+20, y);
  });

  // Class label below table
  var clsY = TY + rowH*5 + 8;
  ctx.font='11px monospace';
  if(isNew){
    ctx.fillStyle='#ffd54f';
    ctx.fillText('Класс: НОВЫЙ  ключ=(' + fk.join(',') + ')', LX, clsY);
  } else {
    ctx.fillStyle = CLASS_PALETTE[classId % CLASS_PALETTE.length];
    var cls = PRED_CLASSES[classId];
    ctx.fillText('Класс ' + (classId+1) + '/13  (' + cls.count + ' слов)', LX, clsY);
    ctx.fillStyle='#555';
    ctx.font='10px monospace';
    ctx.fillText('ключ=(' + fk.join(',') + ')', LX, clsY+16);
    ctx.fillText(cls.words.slice(0,6).join('  ') + (cls.words.length>6?'  …':''), LX, clsY+30);
  }

  // Top neighbors below class
  var nbY = clsY + 58;
  ctx.font='bold 11px monospace';
  ctx.fillStyle='#555'; ctx.fillText('Ближайшие соседи:', LX, nbY);
  top10.slice(0,8).forEach(function(item,i){
    var y = nbY + 14*(i+1);
    var dStr = isNaN(item.dist)?'NaN':(item.dist===0?'0 (та же орбита)':item.dist.toFixed(4));
    ctx.font='10px monospace';
    ctx.fillStyle = item.dist===0 ? '#4caf50' : '#888';
    ctx.fillText((i+1)+'. '+item.word+'  d='+dStr, LX, y);
  });

  // ── Right: mini-MDS scatter ───────────────────────────
  var RX = 355, RW = W - RX - 10;

  if(window.classicalMds && lexWords.length > 2){
    var allWords = lexWords.concat([word]);
    var allSigs  = {};
    lexWords.forEach(function(w){ allSigs[w]=lsigs[w]; });
    allSigs[word] = sig;
    var n = allWords.length;
    var dmat = Array.from({length:n},function(_,i){
      return Array.from({length:n},function(_,j){
        if(i===j) return 0;
        var d = window.lexDistL ? window.lexDistL(allSigs[allWords[i]], allSigs[allWords[j]]) : NaN;
        return isNaN(d)?0:d;
      });
    });
    var coords = window.classicalMds(n, dmat);

    // Normalise to canvas area
    var xs=coords.map(function(c){return c[0];}), ys=coords.map(function(c){return c[1];});
    var xmin=Math.min.apply(null,xs), xmax=Math.max.apply(null,xs);
    var ymin=Math.min.apply(null,ys), ymax=Math.max.apply(null,ys);
    var pad=20;
    function cx(x){return RX+pad+(x-xmin)/(xmax-xmin||1)*(RW-2*pad);}
    function cy(y){return pad+(ymax-y)/(ymax-ymin||1)*(H-2*pad);}

    // Draw lexicon dots
    lexWords.forEach(function(w,i){
      // Determine class color
      var ws = window.lexAllSigs()[w];
      var wfk = predFullKey(ws);
      var wci = -1;
      for(var ci=0;ci<PRED_CLASSES.length;ci++){
        if(wfk.every(function(v,k){return v===PRED_CLASSES[ci].key[k];})){wci=ci;break;}
      }
      var col = wci>=0 ? CLASS_PALETTE[wci % CLASS_PALETTE.length] : '#555';
      ctx.beginPath();
      ctx.arc(cx(coords[i][0]), cy(coords[i][1]), 4, 0, 2*Math.PI);
      ctx.fillStyle = col + '88';
      ctx.fill();
      ctx.strokeStyle = col;
      ctx.lineWidth = 1;
      ctx.stroke();
      ctx.font='8px monospace';
      ctx.fillStyle='#444';
      ctx.fillText(w.slice(0,3), cx(coords[i][0])+5, cy(coords[i][1])+3);
    });

    // Draw query word (large dot)
    var qi = allWords.length - 1;
    var qx = cx(coords[qi][0]), qy = cy(coords[qi][1]);
    var qcol = isNew ? '#ffd54f' : CLASS_PALETTE[classId % CLASS_PALETTE.length];
    ctx.beginPath();
    ctx.arc(qx, qy, 8, 0, 2*Math.PI);
    ctx.fillStyle = qcol + 'cc';
    ctx.fill();
    ctx.strokeStyle = '#fff';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.font='bold 10px monospace';
    ctx.fillStyle='#fff';
    ctx.fillText(word.slice(0,6), qx+10, qy+4);

    // Title
    ctx.font='10px monospace';
    ctx.fillStyle='#333';
    ctx.fillText('MDS-карта орбит ('+n+' слов)', RX+pad, H-8);
  }

  // ── Text result ───────────────────────────────────────
  var html = '';
  if(isNew){
    html = '<span style="color:#ffd54f">Новый класс!</span>  '
          +'ключ=(' + fk.join(',') + ')  ';
  } else {
    var cls2 = PRED_CLASSES[classId];
    html = '<span style="color:'+CLASS_PALETTE[classId%CLASS_PALETTE.length]+'">'
          +'Класс '+(classId+1)+'/13</span>  '
          +'ключ=('+fk.join(',')+')  '
          +cls2.count+' слов: <span style="color:#555">'+cls2.words.join(' ')+'</span>  ';
  }
  html += '<br>Соседи: '+top10.slice(0,5).map(function(x){
    var ds=x.dist===0?'≡':(isNaN(x.dist)?'?':x.dist.toFixed(3));
    return '<span style="color:#4fc3f7">'+x.word+'</span> <span style="color:#333">('+ds+')</span>';
  }).join('  ');
  document.getElementById('pred-result').innerHTML = html;
};

// Export for sibling sections
window.PRED_CLASSES   = PRED_CLASSES;
window.CLASS_PALETTE  = CLASS_PALETTE;
window.predFullKey    = predFullKey;

// Run on Enter in input
document.getElementById('pred-inp').addEventListener('keydown', function(e){
  if(e.key==='Enter') predRun();
});

// Auto-run after page fully loaded
setTimeout(function(){
  if(window.lexAllSigs) predRun();
}, 1200);
})();
</script>
</div>
<div class="section">
<h2>Набрать текст в алфавите Solan</h2>
<textarea id="inp" rows="2" cols="50" 
  placeholder="Наберите латинский текст здесь..."
  style="background:#111;color:#ccc;border:1px solid #333;padding:8px;font-size:14px;width:100%;max-width:500px"></textarea>
<br><br>
<div id="out" style="font-family:Solan4,sans-serif;font-size:48px;color:#4fc3f7;
  min-height:60px;padding:8px;background:#111;border:1px solid #222;
  letter-spacing:8px;max-width:90vw;word-break:break-all"></div>
<p class="meta" style="margin-top:8px">Введите строчные/заглавные латинские буквы, цифры — увидите символы Solan</p>
<script>
document.getElementById('inp').addEventListener('input', function() {{
  document.getElementById('out').textContent = this.value;
}});
</script>
</div>
<div class="meta" style="margin-top:32px;border-top:1px solid #222;padding-top:12px">
Шрифт интегрирован в проект <code>/home/user/meta</code> как модуль <code>hexglyph</code>.<br>
Q6 = 6-мерный булев гиперкуб · 64 вершины · Граф Кэли группы (Z₂)⁶<br>
Параллельные открытия: Стахов (Фибоначчи), Беляев (Куб Закона), И-Цзин, Касаткин, Крюков
</div>
</body>
</html>
