# hexspec — Язык спецификации протоколов

Формальный язык описания сетевых протоколов и конечных автоматов
через граф Q6. Каждое состояние = 6 булевых свойств системы.

## Статус

Идея → исследование

## Концепция

```python
# Пример: описание TCP-состояний через 6 битов
# Бит 0: соединение открыто?
# Бит 1: отправлен SYN?
# Бит 2: получен SYN?
# Бит 3: отправлен FIN?
# Бит 4: получен FIN?
# Бит 5: таймер активен?

CLOSED      = 0b000000  # 0
SYN_SENT    = 0b000011  # 3
ESTABLISHED = 0b000111  # 7
FIN_WAIT_1  = 0b001111  # 15
TIME_WAIT   = 0b111111  # 63
```

Каждый переход = изменение одного свойства. Граф Q6 гарантирует:
- переход меняет ровно одно свойство за раз
- нет «скачков» через несколько состояний

## Что это даёт

- **Автоматическая верификация**: обнаружение недостижимых состояний
- **Deadlock-анализ**: поиск тупиков через BFS по Q6
- **Генерация тестов**: все пути покрытия = все переходы в Q6
- **Документация**: граф Q6 наглядно показывает все допустимые переходы

## Применения

- Сетевые протоколы (TCP, HTTP/2, WebSocket)
- Протоколы консенсуса (Raft, Paxos) — subset состояний Q6
- Конечные автоматы в играх (AI поведение)
- Бизнес-процессы (workflow с 6 булевыми флагами)

## Стек

Python 3.10+ (парсер + верификатор). Опционально: DSL на основе YAML/TOML.

## Зависимости

- `libs/hexcore`

## Структура (план)

```
hexspec/
├── parser.py       — парсер спецификаций
├── verifier.py     — верификатор (deadlock, достижимость)
├── generator.py    — генератор тестов
├── examples/
│   ├── tcp.hexspec
│   └── traffic_light.hexspec
└── README.md
```
