# Roadmap: проект `hexkub` на основе «Арифметической геометрии Касаткина»

**Дата:** 21 февраля 2026 г.
**Источник:** `arifm-geometria.pdf` — журнальная статья о системе КУБ В. В. Касаткина (~1988 г.)
**Анализ:** `analysis_kasatkin.md`

---

## Ключевое открытие

```
64 = 2^6  — Q6: 6-мерный гиперкуб (вся экосистема монорепо)
64 = 4^3  — КУБ(4): куб числа 4 в системе Касаткина

Q6 является одновременно 6-мерным гиперкубом И кубом числа 4.
```

Это прямая математическая связь между системой Касаткина и Q6-монорепо.

---

## Проект: `hexkub` — Арифметическая геометрия (система КУБ)

**Область:** Теория чисел, геометрия, история математики
**Приоритет:** Tier 1 — прямая связь с Q6, нет аналогов в PyPI
**Размер:** ~300 строк

---

## Математика

### КУБ числа N

Каждое натуральное число N представляется геометрически через куб:

```
КУБ(N) = (a, b, c)  — три координаты в пространстве

Для "правильных" кубов (кубических чисел):
  КУБ(1)  = (1, 1, 1)    — единичный куб
  КУБ(8)  = (2, 2, 2)    — куб числа 2
  КУБ(27) = (3, 3, 3)    — куб числа 3
  КУБ(64) = (4, 4, 4)    — куб числа 4 = Q6!

Для произвольного N:
  Разложение N = a * b * c (с учётом всех трёхфакторных разбиений)
  "Ближайший куб": k = round(N^(1/3)), отклонение = N - k³
  "КУБ-форма": представление N в системе трёх координат
```

### Геометрические операции

```python
# Сложение двух КУБов: объёмы складываются
add_kub(a³, b³) = a³ + b³   # (не куб, если a ≠ b — теорема Ферма!)

# Умножение: произведение рёбер
mul_kub(a, b, c) * k = (k^(1/3)*a, k^(1/3)*b, k^(1/3)*c)

# Кубический корень: прямо из координат
cube_root(N) = (N^(1/3), N^(1/3), N^(1/3))

# Квадратный корень через куб:
# sqrt(N) = sqrt(a*b*c) — произведение двух измерений
```

### Диагональ куба = шестиугольник

```
Куб (0,0,0)→(1,1,1):
  Вдоль главной диагонали (1,1,1)/√3 проецируется правильный шестиугольник.
  6 рёбер куба, видимых с этого ракурса, образуют шестиугольник.

Q6-интерпретация:
  Диагональ Q6: вершина 000000 (yang=0) → вершина 111111 (yang=6)
  Слои yang=0,1,2,3,4,5,6 имеют мощности C(6,k): 1,6,15,20,15,6,1
  Центральный слой yang=3: 20 вершин = "экватор" Q6
```

### Диофантовы уравнения и теорема Ферма

```
Ферма (n=3): a³ + b³ = c³  — нет решений в натуральных числах
  КУБ-смысл: объём куба a + объём куба b ≠ объём куба c
  (доказано Уайлсом, 1995)

Пифагоровы тройки (n=2): a² + b² = c² — решений бесконечно
  (связь с hexegypt в роадмапе раунда 9)

Первые несколько диофантовых уравнений с кубами:
  a³ + b³ + c³ = d³  — решения есть: (3,4,5,6), (1,6,8,9)...
  a³ + b³ = c² + d²  — смешанные
```

### Золотое сечение в геометрии куба

```
φ = (1+√5)/2 ≈ 1.618

В системе Касаткина (стр. 2 PDF):
  Золотое сечение строится геометрически на диагонали куба.
  Диаметр описанной сферы / ребро куба = √3 ≈ 1.732
  Диагональ грани куба / ребро = √2 ≈ 1.414

Связь с φ:
  φ ≈ диагональ правильного пятиугольника / сторона
  В кубической геометрии: φ появляется через икосаэдр
  (икосаэдр вписан в куб через φ-пропорции)
```

---

## Python API

```python
from hexkub import KubNumber, KubGeometry, KubArithmetic

# Основной объект
k = KubNumber(64)

# Кубические свойства
k.is_perfect_cube()    # → True  (64 = 4³)
k.cube_root()          # → 4.0
k.coordinates()        # → (4, 4, 4)  — КУБ(64) = (4, 4, 4)

# Q6-связь
k.q6_relation()        # → "64 = 4³ = 2⁶: КУБ числа 4 = Q6"

# Произвольное число
k2 = KubNumber(72)
k2.is_perfect_cube()   # → False
k2.cube_root()         # → 4.16...
k2.nearest_cube()      # → (64, 125)  — ближайшие кубы
k2.three_factor_decomp() # → [(2,4,9), (2,6,6), (3,3,8), (3,4,6), ...]

# Геометрические операции
kg = KubGeometry()
kg.cube_diagonal(a=1.0)        # → √3 ≈ 1.732  (пространств. диагональ)
kg.face_diagonal(a=1.0)        # → √2 ≈ 1.414  (диагональ грани)
kg.inscribed_sphere(a=1.0)     # → r = 0.5      (вписанная сфера)
kg.circumscribed_sphere(a=1.0) # → R = √3/2     (описанная сфера)
kg.sphere_cube_ratio()         # → V_куб/V_сфера = 6/(π√3·3) ≈ 0.3676

# Проекция куба вдоль диагонали → шестиугольник
kg.diagonal_projection()       # → 6 вершин шестиугольника (ASCII)
kg.hexagon_from_cube()         # → связь с Q6

# Арифметика через КУБ
ka = KubArithmetic()
ka.cube_add(8, 27)             # → 35 (не куб!), объяснение теоремы Ферма
ka.cube_sum_check(3, 4, 5)     # → 3³+4³=91 ≠ 5³=125: теорема Ферма
ka.cube_root_geometric(27)     # → 3.0, геометрическое построение
ka.golden_section_in_cube()    # → φ через икосаэдр, вписанный в куб

# Диофантовы уравнения
ka.fermat_n3_check(a=3,b=4,c=5) # → False (теорема Ферма)
ka.sum_of_three_cubes(n=29)    # → (29 = ?³+?³+?³) известная задача
ka.taxicab(n=1729)             # → [(1,12), (9,10)] — число такси Рамануджана

# Связь с Q6
ka.q6_cube_identity()          # → 64=2⁶=4³: два взгляда на одно число
ka.yang_layers_as_cube()       # → yang-слои Q6 = проекция куба 4×4×4
```

---

## CLI

```
python hexkub.py --kub 64          → КУБ(64) = (4,4,4), Q6-связь
python hexkub.py --kub 72          → разложения, ближайшие кубы
python hexkub.py --geometry        → диагонали, вписанная/описанная сфера
python hexkub.py --projection      → ASCII проекция куба вдоль диагонали
python hexkub.py --fermat 3 4 5    → проверка теоремы Ферма
python hexkub.py --taxicab 1729    → число такси Рамануджана
python hexkub.py --golden          → золотое сечение в геометрии куба
python hexkub.py --q6              → 64 = 4³ = 2⁶: полная Q6-диаграмма
python hexkub.py --glyphs          → 64 глифа как КУБ числа 4
python hexkub.py --star6           → диагональ куба = звезда Давида / шестиугольник
```

---

## Глиф-интерпретация

```
h (0..63) = КУБ числа 4 в позиции h

Три координатные оси КУБа ↔ три пары бит в h:
  bits 0,1  → ось X (значение 0..3)
  bits 2,3  → ось Y (значение 0..3)
  bits 4,5  → ось Z (значение 0..3)

h = X + 4*Y + 16*Z  (3D-координаты в сетке 4×4×4)

Цвет глифа: расстояние от центра куба (1.5, 1.5, 1.5)
  yang(h) = число единичных бит = "удалённость от 0"
  6 - yang(h) = "удалённость от 63"
  |yang - 3| = удалённость от экватора куба
```

---

## Связи с существующими проектами

| Проект | Связь |
|--------|-------|
| `hexdim` | Q6=Q3×Q3; куб Q3; 64=4³ — прямое пересечение |
| `hexcubenets` | Развёртки куба — тот же объект |
| `hexphi` | Золотое сечение: φ через икосаэдр в кубе |
| `hexgeom` | Вписанная/описанная сфера куба |
| `hexnumderiv` | Теория чисел; кубические числа |
| `hexmatroot` | Кубический корень как частный случай |
| `hexpolyenum` | Куб = одно из 5 тел Платона |
| `hexglyph` | 64 глифа = КУБ числа 4 = Q6 |

---

## Приоритет реализации

**Tier 1** (немедленно):
- `kub` — основной класс KubNumber
- `geometry` — геометрия куба (диагонали, сферы)
- `q6` — связь 64=4³=2⁶
- `projection` — проекция вдоль диагонали → шестиугольник

**Tier 2** (вторым шагом):
- `fermat` — теорема Ферма через геометрию КУБа
- `taxicab` — числа такси Рамануджана
- `golden` — золотое сечение в кубе

**Tier 3** (при наличии времени):
- `glyphs` — 3D-координаты 64 глифов как куб 4×4×4
- `star6` — проекция куба → шестиугольник → звезда Давида

---

*Roadmap составлен: 21 февраля 2026 г.*
*На основе анализа `arifm-geometria.pdf` (Касаткин В. В., ~1988 г.)*
