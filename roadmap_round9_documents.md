# Роадмап раунда 9: новые модули на основе трёх документов

> Источники: Герман «Теория упаковок замкнутых клеточных полей»,
> Андреев «Геометрически-числовая симметрия в матрице И-Цзин»,
> Андреев «Символ Мира».
> Существующая база: 39 модулей Q6-монорепо.

---

## Уже покрыто (Герман) — не дублировать

| Модуль | Документ Германа |
|--------|-----------------|
| `hexuniqgrp` | «Уникальные группы» |
| `hexperms` | «Алгоритм нахождения перестановок» |

**НЕ покрыто:** «Теория упаковок замкнутых клеточных полей» (3 раздела).

---

## Блок 1 — Герман: Теория упаковок (3 новых модуля)

### 1. `hexpack`
**Основа:** Раздел 1 — «Простейшие алгоритмы упаковок».

**Математика:**
- Замкнутое клеточное поле = кольцо P клеток; число m+1 ставится через m−1 клетку.
- Период P = n(n−1)/2 + 1. Полная упаковка возможна только при P = 2^k.
- **Следствие 1:** всегда ровно одна клетка содержит «собственное» число (неподвижная точка).
- **Следствие 2:** числа в «антиподах» (расстояние P/2) суммируются в P+1.
- Поле 2^(2k) × 2^(2k) → заготовка магического квадрата.

**Функции CLI:**

| Команда | Что делает |
|---------|-----------|
| `pack <n>` | Упаковать n чисел: показать кольцо размера P с расставленными числами |
| `fixpoint <n>` | Найти неподвижную точку; гипотеза: всегда ровно одна |
| `antipode <n>` | Показать антиподальные пары (x, P+1−x), сумма = P+1 |
| `packable <P>` | Проверить, упаковываемо ли поле: P=2^k? |
| `magic <k>` | Из P=2^(2k) поля построить магический квадрат; вывести константу |

**Глиф-интерпретация:** каждый h (0..63) → n=h+1 → P(n), yang(P mod 64) = цвет.

---

### 2. `hexnumsys`
**Основа:** Раздел 2 — «Упаковки и системы счисления».

**Математика:**
- Разные системы счисления как разные алгоритмы упаковки.
- Позиционная система с основанием b: какой период P_b соответствует b-ичному разряду?
- Связь: стандартный 10-й разряд k соответствует P = 10^k; при b=2: P = 2^k.
- Перевод H (0..63) в разные системы счисления.

**Функции CLI:**

| Команда | Что делает |
|---------|-----------|
| `convert <h> <base>` | Представить h в системе счисления с основанием base (2..16) |
| `ring_base <base> <n>` | Найти период поля для n чисел в base-ичной интерпретации |
| `compare` | Сравнить все h=0..63 в системах 2, 8, 10, 16 — цветная таблица |
| `balanced` | Сбалансированная троичная система (−1, 0, 1): h → BAL3 |
| `factorial` | Факториальная система счисления (связь с hexperms) |

**Глиф-интерпретация:** h в двоичном = сам гексаграммный код; цвет по длине записи в base.

---

### 3. `hexprimefield`
**Основа:** Раздел 3 — «Упаковки и простые числа».

**Математика:**
- При каких P = 2^k период является простым числом? (Ответ: только P = 2 для k=1.)
- Простые числа Мерсенна: M_p = 2^p − 1; связь с P = 2^k.
- Факторизация P(n) = n(n−1)/2 + 1; для каких n это простое?
- Распределение простых среди периодов P(1)..P(64).
- «Паттерны упаковки» для простых P: единственный допустимый паттерн.

**Функции CLI:**

| Команда | Что делает |
|---------|-----------|
| `mersenne` | Простые Мерсенна M_p = 2^p−1 для p ≤ 63 |
| `periods` | Таблица P(n) для n=1..64, маркировка простых |
| `prime_pack <p>` | Упаковка числа p как простого периода: единственный паттерн |
| `sophie` | Простые Софи Жермен: p, 2p+1 — оба простые; связь с P |
| `twin` | Пары близнецов (p, p+2): какие P(n) образуют близнецы? |

**Глиф-интерпретация:** h → P(h+1); цвет: простое/составное/степень двойки.

---

## Блок 2 — Андреев «И-Цзин»: Треугольная матрица (2 новых модуля)

### 4. `hextrimat`
**Основа:** «Геометрически-числовая симметрия в матрице И-Цзин».

**Математика:**
- 64 гексаграммы в треугольной матрице (строки 1..11, строка k содержит k ячеек).
- Сумма 1..64 = 2080 = 160×13 = 80×26. Число 13 = «число матрицы».
- Птица Времени: подмножество суммой **729 = 3^6 = 3×243**.
- Цветок Тота: **242 = 22²/2** — симметрия относительно главной высоты.
- Свастика-вихрь: **3×251 = 753** — тройная центральная симметрия.
- Свастика+узлы = **832 = 2080 × 0.4** → пропорция 3:4:5 (832:1248:2080).
- 13 пар «близнецов»: 13 подмножеств по 13 элементов с равными суммами.
- «Центр вращения»: ячейка 27 = главная Инь.

**Функции CLI:**

| Команда | Что делает |
|---------|-----------|
| `triangle` | Вывести 64 гексаграммы в треугольном виде (11 строк), цвет = yang |
| `bird` | Подсветить «Птицу Времени» (сумма 729 = 3^6) |
| `thoth` | Подсветить «Цветок Тота» (242) |
| `swastika` | Подсветить свастику-вихрь (753) и деление 3:4:5 |
| `twins` | Показать 13 пар «близнецов» с суммами |
| `center` | Выделить ячейку 27 (главная Инь) и трёхосевую симметрию |

**Глиф-интерпретация:** позиция в треугольнике → строка k, столбец j; цвет по принадлежности к фигуре симметрии.

---

### 5. `hexvortex`
**Основа:** Вихревые (ротационные) фигуры треугольной матрицы И-Цзин.

**Математика:**
- Группа D₃ (диэдральная порядка 6) действует на треугольнике поворотом на 0°, 120°, 240° и тремя отражениями.
- «Тройная симметрия»: фигуры, инвариантные под Z₃ ⊂ D₃ (повороты на 120°).
- Левая свастика (коловрат) ↔ орбита под Z₃ (против часовой = левая).
- Правая свастика ↔ связана с числом 666 (показано Андреевым).
- «Краб» (3×310 = 930): три ветви формируются вокруг «золотого 6-угольника».
- Вертушка: ещё один ротационный паттерн.

**Функции CLI:**

| Команда | Что делает |
|---------|-----------|
| `d3orbits` | Орбиты D₃ на 64 гексаграммах; размеры орбит |
| `z3` | Фигуры с тройной центральной симметрией: свастика, краб, вертушка |
| `left` | Левосторонняя свастика (коловрат) = 753 |
| `right` | Правосторонняя свастика = 666 |
| `crab` | Фигура «краб» 3×310 вокруг золотого шестиугольника |
| `golden6` | Золотой шестиугольник — внутренний контур краба |

**Глиф-интерпретация:** h → позиция в треугольнике → угловая орбита D₃; цвет по принадлежности к орбите.

---

## Блок 3 — Андреев «Символ Мира» (3 новых модуля)

### 6. `hexwuxing`
**Основа:** Пять элементов (У-Синь, 五行) из «Символа Мира».

**Математика:**
- 5 элементов: Вода, Дерево, Огонь, Земля, Металл.
- **Порождающий цикл:** Вода→Дерево→Огонь→Земля→Металл→Вода (каждый питает следующий).
- **Управляющий цикл:** Вода→Огонь→Металл→Дерево→Земля→Вода (каждый подавляет через один).
- Соответствие yang(h): 0→Вода, 1→Дерево, 2,3→Огонь, 4→Земля, 5,6→Металл (распределение по 5 уровней).
- Цвета: Вода=голубой, Дерево=зелёный, Огонь=красный, Земля=жёлтый, Металл=белый.
- **Квадрат Ло-Шу (Magic Square 3×3):** элементы в позициях 1..9 по числу У-Синь.

**Функции CLI:**

| Команда | Что делает |
|---------|-----------|
| `wheel` | ASCII-колесо 5 элементов с порождающим и управляющим циклами |
| `map` | Все 64 гексаграммы окрашены по принадлежности к элементу |
| `cycle <elem>` | Цепочка порождения/управления от данного элемента |
| `balance <h>` | Баланс элементов для h: какой элемент доминирует, какой подавлен |
| `loshu` | Магический квадрат Ло-Шу 3×3 с наложением элементов |

**Глиф-интерпретация:** h → yang(h) → элемент → цвет и символ элемента.

---

### 7. `hexphi`
**Основа:** Фи-треугольник и 7-конечная Звезда из «Символа Мира».

**Математика:**
- φ = (1+√5)/2 ≈ 1.618. Угол Фи-треугольника α = arctan(√φ) ≈ 51.827°.
- Этот же угол — наклон боковых граней Великой пирамиды Гизы.
- Фи-углы 7-конечной звезды: 6×α + β = 360°, β ≈ 49.04°.
- β ≈ угол отражения светового луча внутри пирамиды.
- Радиус вписанного круга / радиус описанного = 1/φ² = φ−1 ≈ 0.382.
- Числа φ-последовательности: φ⁰=1, φ¹≈1.618, φ²≈2.618, φ³≈4.236...
- Связь с `hexpowerxy`: X^Y=Y^X при X=φ, Y=φ²/(φ²-1).

**Функции CLI:**

| Команда | Что делает |
|---------|-----------|
| `triangle` | ASCII Фи-треугольник с углами и сторонами (φ-пропорции) |
| `star7` | 7-конечная звезда: 6 равных углов + 1 особый; все φ-зависимости |
| `pyramid` | Сечение Великой пирамиды: угол, пропорции, связь с φ |
| `powers` | φ^n для n=0..6 (= yang уровни Q6) |
| `approx` | Рациональные приближения φ: 1, 3/2, 5/3, 8/5, 13/8, 21/13 (Фибоначчи) |

**Глиф-интерпретация:** h → yang(h) = k → φ^k; цвет по диапазону φ-степени.

---

### 8. `hexlife`
**Основа:** Цветок Жизни, Древо Жизни, Плод Жизни из «Символа Мира».

**Математика:**
- Упаковка кругов в шестиугольнике: 1 → 7 → 19 → 37 → 61 ... (слои +6k).
- Ряд: a(k) = 1 + 6×(1+2+...+k) = 1 + 3k(k+1) — центрированные шестиугольные числа.
- При k=1: **7 кругов = Плод Жизни**.
- При k=2: **19 кругов = Цветок Жизни**.
- 13 кругов = **Древо Жизни** (особая неправильная выборка из 19).
- 64-й уровень: a(k)=64 → нет точного решения, ближайшие: k=4→61, k=5→91.
- Аполлонова прокладка (Apollonian gasket): рекурсивная упаковка кругов в Q6.
- Теорема Декарта о четырёх касательных кругах: (k₁+k₂+k₃+k₄)² = 2(k₁²+k₂²+k₃²+k₄²).

**Функции CLI:**

| Команда | Что делает |
|---------|-----------|
| `hex_pack <k>` | Центрированная шестиугольная упаковка k слоёв (показать a(k) кругов) |
| `flower` | Цветок Жизни: 19 кругов в шестиугольнике |
| `tree` | Древо Жизни: 13 кругов = Сефирот Каббалы |
| `fruit` | Плод Жизни: 7 кругов = 7 планет / 7 небес |
| `apollonian` | Аполлонова прокладка до глубины yang (0..6) |
| `descartes` | Теорема Декарта: дана тройка кривизн k₁,k₂,k₃ → найти k₄ |

**Глиф-интерпретация:** h → позиция в шестиугольной решётке; yang(h) = слой упаковки.

---

## Блок 4 — Синтез трёх документов (3 новых модуля)

### 9. `hexegypt`
**Основа:** Египетские пропорции в обоих документах Андреева и у Германа.

**Математика:**
- Египетский треугольник 3:4:5 (прямоугольный, периметр=12, площадь=6).
- У Германа: магические квадраты 4×4 (P=16=2^4) → 4 строки × 4 столбца.
- У Андреева (И-Цзин): 832:1248:2080 = 40%:60%:100% = 2:3:5 → 3:4:5 пропорция.
- У Андреева (Символ): малый круг r = R/5; египетский треугольник 3:4:5 вписан в Фи-треугольник.
- Все пифагоровы тройки (a,b,c) с a,b,c ≤ 64: (3,4,5), (5,12,13), (8,15,17), ...
- «Единица измерения» Q6: длина ребра Q6 = 1; длина диагонали = √k для k=1..6.

**Функции CLI:**

| Команда | Что делает |
|---------|-----------|
| `triples` | Все примитивные пифагоровы тройки с гипотенузой ≤ 63 |
| `map345` | Наложение пропорции 3:4:5 на 64 гексаграммы (слои 0..40%, 40..60%, 60..100%) |
| `diagonal <k>` | Длина k-мерной диагонали Q6 (= √k); yang=k |
| `area` | Площади фигур в Q6: треугольник 3:4:5, его связь с числом 64 |
| `ratio` | Пропорция 832:1248:2080 в контексте Q6 (пересчёт на 64 гексаграммы) |

**Глиф-интерпретация:** h → тройка (yang, 6-yang, √36) → принадлежность к египетскому треугольнику.

---

### 10. `hextaichi`
**Основа:** Инь-Ян (Тай-Цзи) — синтез Германа и обоих Андреевых.

**Математика:**
- Антиподальная карта Q6: h ↔ 63−h (= h XOR 63). Всегда yang(h)+yang(63−h) = 6.
- 32 антиподальных пары + 0 фиксированных (63 нечётное: нет h = 63−h).
- «Равновесная» орбита: yang(h) = 3 → C(6,3)=20 элементов (максимальная орбита).
- Германовский антипод: n и P+1−n суммируются в P+1 ↔ h и 63−h суммируются в 63.
- Андреев (Символ): центральный круг r=R/5; площадь пятна Инь внутри Ян = (1/5)².
- «Граница Тай-Цзи» в Q6: рёбра между yang=2 и yang=3 (переход середины).
- Yin-score(h) = yang(63−h) = 6 − yang(h): чем больше ян, тем меньше инь.

**Функции CLI:**

| Команда | Что делает |
|---------|-----------|
| `antipode <h>` | Антипод h: 63−h; показать оба глифа и их свойства |
| `pairs` | Все 32 пары Инь-Ян; упорядочены по yang(h) |
| `boundary` | «Граница Тай-Цзи»: рёбра Q6 между yang=2 и yang=3 (переход 3-го бита) |
| `balance` | Визуализация 64 гексаграмм: левая половина=Ян, правая=Инь (по коду Грея) |
| `spin <h>` | Анимация «вращения Тай-Цзи»: h→антипод→h циклически |

**Глиф-интерпретация:** h → yang(h) vs 6−yang(h); белый глиф на тёмном = Ян, тёмный на светлом = Инь.

---

### 11. `hexsacred`
**Основа:** «Священная геометрия» как синтез Андреева и исторических числовых систем.

**Математика:**
- **Шри-Янтра:** 9 интерлокирующих треугольников (4 вершинами вниз, 5 вверх) = 43 малых треугольника + центр. Андреев указывает: «строится из Фи-треугольника».
- **Куб Метатрона:** Цветок Жизни (19 кругов) + соединение центров = 13 кругов + 78 линий.
- **Числа Платона:** 360°/n для n=3,4,5,6,7 — правильные многоугольники; связь с yang=n.
- **Звезда Давида:** 6-конечная (yang=6) vs 7-конечная Андреева (yang=7... но yang≤6, специальная кодировка).
- **Числа 7, 13, 19:** прогрессия кругов Цветка Жизни; 7 = простое, 13 = простое, 19 = простое (все простые!).

**Функции CLI:**

| Команда | Что делает |
|---------|-----------|
| `yantra` | Схема Шри-Янтры: 9 треугольников, 43 области, 4 круга, лотос |
| `metatron` | Куб Метатрона: 13 кругов + линии из Цветка Жизни |
| `platonic <n>` | Правильный n-угольник и его yang-интерпретация в Q6 |
| `star <n>` | n-конечная звезда (n=5,6,7,8): углы, пропорции, связь с yang |
| `numbers` | Анализ 7, 13, 19 как «священных простых»; в Q6 контексте |

**Глиф-интерпретация:** h → позиция в Шри-Янтре/кубе Метатрона по схеме yang+bit-pattern.

---

## Итого: 11 новых модулей

| № | Модуль | Источник | Ключевая математика |
|---|--------|----------|---------------------|
| 1 | `hexpack` | Герман §1 | Кольца P=2^k, неподвижные точки, антиподы, магические квадраты |
| 2 | `hexnumsys` | Герман §2 | Системы счисления как паттерны упаковки, b-ичные кольца |
| 3 | `hexprimefield` | Герман §3 | Простые числа в теории упаковок, числа Мерсенна |
| 4 | `hextrimat` | Андреев-ИЦ | Треугольная матрица, 729=3^6, 242, 753, 13 близнецов |
| 5 | `hexvortex` | Андреев-ИЦ | D₃ симметрия, свастика-вихрь, краб, золотой шестиугольник |
| 6 | `hexwuxing` | Андреев-Символ | 5 элементов У-Синь, порождающий/управляющий цикл, Ло-Шу |
| 7 | `hexphi` | Андреев-Символ | φ-треугольник, 7-звезда, пирамидальные пропорции |
| 8 | `hexlife` | Андреев-Символ | Цветок/Древо/Плод Жизни, Аполлонова прокладка, теорема Декарта |
| 9 | `hexegypt` | Синтез | Тройка 3:4:5, диагонали Q6, соответствие пропорций |
| 10 | `hextaichi` | Синтез | Инь-Ян в Q6: h↔63−h, граница, баланс битов |
| 11 | `hexsacred` | Синтез | Шри-Янтра, куб Метатрона, «священные простые» 7,13,19 |

---

## Приоритет реализации

### Приоритет 1 (прямо из документов, строгая математика):
1. `hexpack` — самый прямой результат Германа; ещё не реализован.
2. `hextrimat` — числовые результаты Андреева точны и верифицируемы.
3. `hextaichi` — синтез, прямо вытекает из анализа.

### Приоритет 2 (расширения с интересной визуализацией):
4. `hexwuxing` — богатая цветовая визуализация 5 элементов.
5. `hexphi` — золотое сечение везде, эстетика.
6. `hexvortex` — D₃ орбиты, связь с hexsym.

### Приоритет 3 (более сложная или специализированная математика):
7. `hexlife` — теорема Декарта, Аполлонова прокладка.
8. `hexprimefield` — числа Мерсенна, распределение простых.
9. `hexnumsys` — системы счисления (частично уже в hexperms).
10. `hexegypt` — пифагоровы тройки в Q6.
11. `hexsacred` — самый синтетический, требует всех предыдущих.
